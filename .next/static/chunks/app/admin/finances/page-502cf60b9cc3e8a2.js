(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5395],{26711:function(e,t,a){Promise.resolve().then(a.bind(a,8995))},8995:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var l=a(57437),s=a(2265),r=a(61396),n=a.n(r),i=a(24033),o=a(96666),d=a(62385),c=a(66209),m=a(24215),u=a(95811);function h(){var e,t,a,r;let o=(0,i.usePathname)(),[h,x]=(0,s.useState)("withdrawals"),[p,b]=(0,s.useState)(""),[g,f]=(0,s.useState)("pending"),[w,v]=(0,s.useState)(1),[N,j]=(0,s.useState)(!1),[y,k]=(0,s.useState)(""),[S,C]=(0,s.useState)([]),[E,A]=(0,s.useState)([]),[B,I]=(0,s.useState)(1),[D,R]=(0,s.useState)(0),[_,O]=(0,s.useState)(null),[T,M]=(0,s.useState)(!1),[F,U]=(0,s.useState)(""),[z,H]=(0,s.useState)([]),[W,P]=(0,s.useState)(!1),[Y,Q]=(0,s.useState)(""),[G,K]=(0,s.useState)(""),[L,q]=(0,s.useState)(""),[Z,J]=(0,s.useState)(""),[V,X]=(0,s.useState)(""),[$,ee]=(0,s.useState)(!1),[et,ea]=(0,s.useState)(""),[el,es]=(0,s.useState)(""),[er,en]=(0,s.useState)("all"),[ei,eo]=(0,s.useState)(!1),[ed,ec]=(0,s.useState)(!1),[em,eu]=(0,s.useState)(null),[eh,ex]=(0,s.useState)({iban:"",ibanHolderName:"",bankName:""}),[ep,eb]=(0,s.useState)({amount:"",type:"add",description:""});(0,s.useEffect)(()=>{eg()},[h,g,w,Z,V,er]);let eg=async()=>{var e,t;j(!0),k("");try{let e={status:"Status: All"===g?void 0:g,page:w,limit:50};if(Z&&(e.startDate=Z),V&&(e.endDate=V),er&&"all"!==er&&(e.paymentMethod=er),"withdrawals"===h){let t=await d.Sb.getWithdrawalPool(e);C(t.data.withdrawals||[]),I(t.data.totalPages||1),R(t.data.total||0)}else{let t=await d.Sb.getDepositPool(e);A(t.data.deposits||[]),I(t.data.totalPages||1),R(t.data.total||0)}}catch(a){k((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Veri y\xfcklenirken bir hata oluştu"),"withdrawals"===h?(C(u.RN),I(1),R(u.RN.length)):(A(u.sR),I(1),R(u.sR.length)),m.cM.apiError("/admin/finances",a)}finally{j(!1)}},ef=e=>{switch(e){case"approved":case"paid":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"rejected":case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},ew=e=>{switch(e){case"pending":return"Beklemede";case"approved":return"Onaylandı";case"paid":return"\xd6dendi";case"rejected":return"Reddedildi";case"cancelled":return"İptal Edildi";default:return e}},ev=async e=>{try{"withdrawals"===h?await d.Sb.approveWithdrawal(e,{adminNotes:F}):await d.Sb.approveDeposit(e,{adminNotes:F}),M(!1),U(""),O(null),eg()}catch(e){var t,a;k((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Onaylama işlemi başarısız")}},eN=async e=>{let t=prompt("Red nedeni:");if(t)try{await d.Sb.rejectWithdrawal(e,{rejectionReason:t,adminNotes:F}),eg()}catch(e){var a,l;k((null===(l=e.response)||void 0===l?void 0:null===(a=l.data)||void 0===a?void 0:a.message)||"Red işlemi başarısız")}},ej=async e=>{if(confirm("Bu talebi iptal etmek istediğinizden emin misiniz?"))try{await d.Sb.cancelDeposit(e,{adminNotes:F}),q("Deposit cancelled successfully"),eg()}catch(e){var t,a;k((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"İptal işlemi başarısız")}},ey=e=>{H(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ek=async()=>{if(Y&&0!==z.length)try{if("withdrawals"===h){if("approve"===Y)await d.Sb.bulkApproveWithdrawals({withdrawalIds:z,adminNotes:F}),q("Successfully approved ".concat(z.length," withdrawals"));else if("reject"===Y){if(!G){k("Rejection reason is required");return}await d.Sb.bulkRejectWithdrawals({withdrawalIds:z,rejectionReason:G,adminNotes:F}),q("Successfully rejected ".concat(z.length," withdrawals"))}}else"approve"===Y?(await d.Sb.bulkApproveDeposits({depositIds:z,adminNotes:F}),q("Successfully approved ".concat(z.length," deposits"))):"cancel"===Y&&(await d.Sb.bulkCancelDeposits({depositIds:z,adminNotes:F}),q("Successfully cancelled ".concat(z.length," deposits")));H([]),P(!1),Q(""),K(""),U(""),eg()}catch(a){var e,t;k((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Bulk operation failed"),m.cM.apiError("/admin/bulk-action",a)}},eS=async()=>{try{let e={};g&&"Status: All"!==g&&(e.status=g),Z&&(e.startDate=Z),V&&(e.endDate=V),er&&"all"!==er&&(e.paymentMethod=er);let t="withdrawals"===h?await d.Sb.exportWithdrawals(e):await d.Sb.exportDeposits(e),a=new Blob([t.data],{type:"text/csv;charset=utf-8;"}),l=document.createElement("a"),s=URL.createObjectURL(a);l.setAttribute("href",s),l.setAttribute("download","".concat(h,"-export-").concat(new Date().toISOString().split("T")[0],".csv")),l.style.visibility="hidden",document.body.appendChild(l),l.click(),document.body.removeChild(l),q("".concat("withdrawals"===h?"Withdrawals":"Deposits"," exported successfully"))}catch(a){var e,t;k((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to export"),m.cM.apiError("/admin/export",a)}},eC=("withdrawals"===h?S:E).filter(e=>{var t,a,l,s,r;if(!p)return!0;let n=p.toLowerCase();return(null===(a=e.user)||void 0===a?void 0:null===(t=a.username)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(s=e.user)||void 0===s?void 0:null===(l=s.email)||void 0===l?void 0:l.toLowerCase().includes(n))||(null===(r=e._id)||void 0===r?void 0:r.toString().toLowerCase().includes(n))}),eE=("withdrawals"===h?S:E).filter(e=>"pending"===e.status).reduce((e,t)=>e+(t.amount||0),0);return(0,l.jsxs)("div",{className:"flex min-h-screen w-full bg-background-dark",children:[(0,l.jsxs)("div",{className:"flex bg-background-dark min-h-screen",children:[(0,l.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex flex-col bg-background-dark border-r border-surface p-4 z-50",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3 mb-8 px-2",children:[(0,l.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary",children:(0,l.jsx)("span",{className:"material-symbols-outlined text-black",children:"casino"})}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h1",{className:"text-base font-bold text-white",children:"Casino Admin"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Management"})]})]}),(0,l.jsx)("nav",{className:"flex flex-col gap-2",children:[{id:"dashboard",label:"Dashboard Overview",icon:"dashboard",href:"/admin"},{id:"users",label:"User Management",icon:"group",href:"/admin/users"},{id:"kyc",label:"KYC Management",icon:"badge",href:"/admin/kyc"},{id:"games",label:"Game Management",icon:"gamepad",href:"/admin/games"},{id:"betting",label:"Betting Management",icon:"sports_soccer",href:"/admin/betting"},{id:"promotions",label:"Promotions Management",icon:"campaign",href:"/admin/promotions"},{id:"deposits",label:"Deposits",icon:"arrow_downward",href:"/admin/deposits"},{id:"withdrawals",label:"Withdrawals",icon:"arrow_upward",href:"/admin/withdrawals"},{id:"tournaments",label:"Tournaments",icon:"emoji_events",href:"/admin/tournaments"},{id:"content",label:"Content Management",icon:"wysiwyg",href:"/admin/content"}].map(e=>(0,l.jsxs)(n(),{href:e.href,className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ".concat(o===e.href||"dashboard"===e.id&&"/admin"===o?"bg-primary/20 text-primary":"text-gray-300 hover:bg-white/10"),children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:e.icon}),(0,l.jsx)("p",{children:e.label})]},e.id))}),(0,l.jsxs)("div",{className:"mt-auto",children:[(0,l.jsxs)(n(),{href:"/admin/settings",className:"flex items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-white/10 transition-colors",children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"Settings"})]}),(0,l.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/auth/login"},className:"mt-2 flex w-full items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:"logout"}),(0,l.jsx)("p",{className:"text-sm font-medium",children:"Logout"})]}),(0,l.jsxs)("div",{className:"mt-4 flex items-center gap-3 border-t border-white/10 pt-4",children:[(0,l.jsx)("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAeBaCCsTptl1trq-7t7S9yHg2U-j1m_3eQJ6dpRP-IZjxZIDKL6U_iFBKUwWt18HwxovSG8ldqiQCa7NbmEcelTnHQGSwTeQORHSMYn7gGZDs-U982dOqo8QbAOQy7uCWkHjlHxe0m_eXtY2xDHYQYW3KAKuLgW2ZrQlV3yrUSs8tMyu4QaShzTzhohnzpDGQllaTrkdAQoFvcjS9zzhmKAnFrldqCRC16_VfbZD7OYbVjNJOiQ4Gz2-oKSG6XZ4azP4qWoBeSO74")'}}),(0,l.jsxs)("div",{className:"flex flex-col",children:[(0,l.jsx)("h2",{className:"text-sm font-medium text-white",children:(()=>{try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);return"".concat(t.firstName||""," ").concat(t.lastName||"").trim()||"Admin User"}}catch(e){}return"Admin User"})()}),(0,l.jsx)("p",{className:"text-xs text-gray-400",children:(()=>{try{let e=localStorage.getItem("user");if(e)return JSON.parse(e).email||"admin@casino.com"}catch(e){}return localStorage.getItem("adminEmail")||"admin@casino.com"})()})]})]})]})]}),(0,l.jsx)("main",{className:"ml-64 flex-1 min-h-screen"})]}),(0,l.jsx)("main",{className:"flex-1 p-6 lg:p-10 bg-background-light dark:bg-background-dark",children:(0,l.jsxs)("div",{className:"layout-content-container flex flex-col w-full max-w-7xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mb-6",children:[(0,l.jsx)("p",{className:"text-black dark:text-white text-4xl font-black leading-tight tracking-[-0.033em] min-w-72",children:"withdrawals"===h?"\xc7ekim Havuzu":"Yatırım Havuzu"}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[z.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-yellow-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-yellow-600 transition-colors",children:[(0,l.jsx)("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),(0,l.jsxs)("span",{className:"truncate",children:["Bulk Action (",z.length,")"]})]}),(0,l.jsx)("button",{onClick:()=>H([]),className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-gray-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-gray-600 transition-colors",children:(0,l.jsx)("span",{className:"truncate",children:"Clear"})})]}),(0,l.jsxs)("button",{onClick:eS,className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-green-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-green-600 transition-colors",children:[(0,l.jsx)("span",{className:"material-symbols-outlined text-lg",children:"download"}),(0,l.jsx)("span",{className:"truncate",children:"Export CSV"})]})]})]}),y&&(0,l.jsx)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,l.jsx)("p",{className:"text-sm text-red-400",children:y})}),L&&(0,l.jsx)("div",{className:"mb-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:(0,l.jsx)("p",{className:"text-sm text-green-400",children:L})}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-white/5 border border-white/10",children:[(0,l.jsx)("p",{className:"text-white/70 text-base font-medium leading-normal",children:"withdrawals"===h?"Toplam Bekleyen \xc7ekimler":"Toplam Bekleyen Yatırımlar"}),(0,l.jsxs)("p",{className:"text-white tracking-light text-2xl font-bold leading-tight",children:["₺",eE.toFixed(2)]})]}),(0,l.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-white/5 border border-white/10",children:[(0,l.jsx)("p",{className:"text-white/70 text-base font-medium leading-normal",children:"Toplam Kayıt"}),(0,l.jsx)("p",{className:"text-white tracking-light text-2xl font-bold leading-tight",children:D})]})]}),(0,l.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10",children:[(0,l.jsx)("div",{className:"pb-3",children:(0,l.jsxs)("div",{className:"flex border-b border-white/10 px-4 gap-8",children:[(0,l.jsx)("button",{onClick:()=>{x("deposits"),v(1)},className:"flex flex-col items-center justify-center border-b-[3px] pb-[13px] pt-4 transition-colors ".concat("deposits"===h?"border-b-[#0dccf2] text-[#0dccf2]":"border-b-transparent text-white/50"),children:(0,l.jsx)("p",{className:"text-sm font-bold leading-normal tracking-[0.015em]",children:"Yatırımlar"})}),(0,l.jsx)("button",{onClick:()=>{x("withdrawals"),v(1)},className:"flex flex-col items-center justify-center border-b-[3px] pb-[13px] pt-4 transition-colors ".concat("withdrawals"===h?"border-b-[#0dccf2] text-[#0dccf2]":"border-b-transparent text-white/50"),children:(0,l.jsx)("p",{className:"text-sm font-bold leading-normal tracking-[0.015em]",children:"\xc7ekimler"})})]})}),(0,l.jsxs)("div",{className:"p-4 flex flex-col lg:flex-row gap-4",children:[(0,l.jsx)("div",{className:"flex-grow",children:(0,l.jsx)("label",{className:"flex flex-col min-w-40 h-12 w-full",children:(0,l.jsxs)("div",{className:"flex w-full flex-1 items-stretch rounded-lg h-full",children:[(0,l.jsx)("div",{className:"text-white/50 flex border-none bg-white/5 items-center justify-center pl-4 rounded-l-lg border-r-0",children:(0,l.jsx)("span",{className:"material-symbols-outlined",children:"search"})}),(0,l.jsx)("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-[#0dccf2]/50 border-none bg-white/5 h-full placeholder:text-white/50 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal",placeholder:"Kullanıcı adı, email veya ID ile ara...",value:p,onChange:e=>b(e.target.value),type:"text"})]})})}),(0,l.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{className:"appearance-none form-select h-12 w-full lg:w-40 rounded-lg bg-white/5 border-none text-white focus:ring-2 focus:ring-[#0dccf2]/50 pl-4 pr-10",value:g,onChange:e=>{f(e.target.value),v(1)},children:[(0,l.jsx)("option",{value:"Status: All",className:"bg-[#1E1E2B] text-white",children:"Durum: T\xfcm\xfc"}),(0,l.jsx)("option",{value:"pending",className:"bg-[#1E1E2B] text-white",children:"Beklemede"}),(0,l.jsx)("option",{value:"approved",className:"bg-[#1E1E2B] text-white",children:"Onaylandı"}),(0,l.jsx)("option",{value:"rejected",className:"bg-[#1E1E2B] text-white",children:"Reddedildi"}),(0,l.jsx)("option",{value:"cancelled",className:"bg-[#1E1E2B] text-white",children:"İptal Edildi"})]}),(0,l.jsx)("span",{className:"material-symbols-outlined text-white/50 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:"expand_more"})]}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsxs)("select",{className:"appearance-none form-select h-12 w-full lg:w-40 rounded-lg bg-white/5 border-none text-white focus:ring-2 focus:ring-[#0dccf2]/50 pl-4 pr-10",value:er,onChange:e=>{en(e.target.value),v(1)},children:[(0,l.jsx)("option",{value:"all",className:"bg-[#1E1E2B] text-white",children:"Payment: All"}),(0,l.jsx)("option",{value:"IBAN",className:"bg-[#1E1E2B] text-white",children:"IBAN"}),(0,l.jsx)("option",{value:"Banka Havalesi",className:"bg-[#1E1E2B] text-white",children:"Banka Havalesi"}),(0,l.jsx)("option",{value:"Papara",className:"bg-[#1E1E2B] text-white",children:"Papara"}),(0,l.jsx)("option",{value:"Credit Card",className:"bg-[#1E1E2B] text-white",children:"Credit Card"})]}),(0,l.jsx)("span",{className:"material-symbols-outlined text-white/50 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:"expand_more"})]}),$?(0,l.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,l.jsx)("input",{type:"date",value:Z,onChange:e=>J(e.target.value),className:"h-12 rounded-lg bg-white/5 px-4 text-white text-sm border border-white/10 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Start Date"}),(0,l.jsx)("input",{type:"date",value:V,onChange:e=>X(e.target.value),className:"h-12 rounded-lg bg-white/5 px-4 text-white text-sm border border-white/10 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"End Date"}),(0,l.jsx)("button",{onClick:()=>{ee(!1),J(""),X("")},className:"h-12 w-12 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors",children:(0,l.jsx)("span",{className:"material-symbols-outlined text-white/50",children:"close"})})]}):(0,l.jsxs)("button",{onClick:()=>ee(!0),className:"flex h-12 items-center justify-center gap-2 rounded-lg bg-white/5 px-4 hover:bg-white/10 transition-colors text-white/80",children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:"calendar_month"}),(0,l.jsx)("span",{className:"text-sm",children:"Date Range"})]}),(0,l.jsxs)("button",{onClick:()=>{b(""),f("Status: All"),en("all"),J(""),X(""),ee(!1),ea(""),es("")},className:"flex h-12 items-center justify-center gap-2 rounded-lg bg-transparent px-4 hover:bg-white/10 transition-colors text-white/50 hover:text-white",children:[(0,l.jsx)("span",{className:"material-symbols-outlined",children:"close"}),(0,l.jsx)("span",{className:"text-sm",children:"Clear Filters"})]})]})]}),N?(0,l.jsx)("div",{className:"p-8 text-center",children:(0,l.jsx)("p",{className:"text-white/50",children:"Y\xfckleniyor..."})}):(0,l.jsx)("div",{className:"overflow-x-auto",children:(0,l.jsxs)("table",{className:"w-full text-sm text-left text-white/80",children:[(0,l.jsx)("thead",{className:"text-xs text-white/50 uppercase bg-black/20",children:(0,l.jsxs)("tr",{children:[(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:(0,l.jsx)("input",{type:"checkbox",checked:z.length===("withdrawals"===h?S:E).filter(e=>"pending"===e.status).length&&("withdrawals"===h?S:E).filter(e=>"pending"===e.status).length>0,onChange:()=>{let e=("withdrawals"===h?S:E).filter(e=>"pending"===e.status).map(e=>e._id);z.length===e.length&&e.length>0?H([]):H(e)},className:"rounded border-white/20 bg-transparent"})}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"ID"}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"Kullanıcı"}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"Tutar"}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"Y\xf6ntem"}),"withdrawals"===h&&(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"IBAN"}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"Tarih"}),(0,l.jsx)("th",{className:"px-6 py-3",scope:"col",children:"Durum"}),(0,l.jsx)("th",{className:"px-6 py-3 text-center",scope:"col",children:"İşlemler"})]})}),(0,l.jsx)("tbody",{children:0===eC.length?(0,l.jsx)("tr",{children:(0,l.jsx)("td",{colSpan:"withdrawals"===h?9:8,className:"px-6 py-8 text-center text-white/50",children:"withdrawals"===h?"Bekleyen \xe7ekim talebi bulunmamaktadır.":"Bekleyen yatırım talebi bulunmamaktadır."})}):eC.map(e=>{var t,a,s,r;return(0,l.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[(0,l.jsx)("td",{className:"px-6 py-4",children:"pending"===e.status&&(0,l.jsx)("input",{type:"checkbox",checked:z.includes(e._id),onChange:()=>ey(e._id),className:"rounded border-white/20 bg-transparent"})}),(0,l.jsxs)("td",{className:"px-6 py-4 font-mono text-white/60",children:[e._id.toString().substring(0,8),"..."]}),(0,l.jsx)("td",{className:"px-6 py-4 font-medium text-white",children:(null===(t=e.user)||void 0===t?void 0:t.username)||(null===(a=e.user)||void 0===a?void 0:a.email)||"N/A"}),(0,l.jsxs)("td",{className:"px-6 py-4 font-medium text-white",children:["₺",null===(s=e.amount)||void 0===s?void 0:s.toFixed(2)]}),(0,l.jsx)("td",{className:"px-6 py-4",children:e.paymentMethod||"IBAN"}),"withdrawals"===h&&(0,l.jsxs)("td",{className:"px-6 py-4 text-sm text-white/60",children:[null===(r=e.iban)||void 0===r?void 0:r.substring(0,12),"..."]}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,c.p6)(e.createdAt)}),(0,l.jsx)("td",{className:"px-6 py-4",children:(0,l.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat(ef(e.status)),children:ew(e.status)})}),(0,l.jsx)("td",{className:"px-6 py-4",children:"pending"===e.status?(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[(0,l.jsx)("button",{onClick:()=>{O(e),M(!0)},className:"px-3 py-1 text-xs font-bold text-black bg-green-400 rounded-md hover:bg-green-500 transition-colors",children:"Onayla"}),"withdrawals"===h?(0,l.jsx)("button",{onClick:()=>eN(e._id),className:"px-3 py-1 text-xs font-bold text-white bg-red-500/80 rounded-md hover:bg-red-500 transition-colors",children:"Reddet"}):(0,l.jsx)("button",{onClick:()=>ej(e._id),className:"px-3 py-1 text-xs font-bold text-white bg-red-500/80 rounded-md hover:bg-red-500 transition-colors",children:"İptal"}),"withdrawals"===h&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{onClick:()=>{var t,a,l,s;eu((null===(t=e.user)||void 0===t?void 0:t._id)||e.user),ex({iban:e.iban||(null===(a=e.user)||void 0===a?void 0:a.iban)||"",ibanHolderName:e.ibanHolderName||(null===(l=e.user)||void 0===l?void 0:l.ibanHolderName)||"",bankName:e.bankName||(null===(s=e.user)||void 0===s?void 0:s.bankName)||""}),eo(!0)},className:"px-3 py-1 text-xs font-bold text-white bg-blue-500/80 rounded-md hover:bg-blue-500 transition-colors",title:"Edit IBAN",children:"IBAN"}),(0,l.jsx)("button",{onClick:()=>{var t;eu((null===(t=e.user)||void 0===t?void 0:t._id)||e.user),eb({amount:"",type:"add",description:""}),ec(!0)},className:"px-3 py-1 text-xs font-bold text-white bg-purple-500/80 rounded-md hover:bg-purple-500 transition-colors",title:"Update Balance",children:"Bakiye"})]})]}):(0,l.jsx)("div",{className:"text-center text-white/50 italic",children:"Tamamlandı"})})]},e._id)})})]})}),B>1&&(0,l.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-white/10",children:[(0,l.jsxs)("span",{className:"text-sm text-white/50",children:["Sayfa ",w," / ",B," (Toplam ",D," kayıt)"]}),(0,l.jsxs)("div",{className:"inline-flex items-center -space-x-px text-sm",children:[(0,l.jsx)("button",{onClick:()=>v(Math.max(1,w-1)),disabled:1===w,className:"flex items-center justify-center px-3 h-8 ml-0 leading-tight text-white/60 bg-white/5 border border-white/10 rounded-l-lg hover:bg-white/10 hover:text-white transition-colors disabled:opacity-50",children:"\xd6nceki"}),[...Array(Math.min(5,B))].map((e,t)=>{let a=t+1;return(0,l.jsx)("button",{onClick:()=>v(a),className:"flex items-center justify-center px-3 h-8 leading-tight border border-white/10 transition-colors ".concat(w===a?"text-white bg-[#0dccf2]/20 border-[#0dccf2]/50 hover:bg-[#0dccf2]/30":"text-white/60 bg-white/5 hover:bg-white/10 hover:text-white"),children:a},a)}),(0,l.jsx)("button",{onClick:()=>v(Math.min(B,w+1)),disabled:w===B,className:"flex items-center justify-center px-3 h-8 leading-tight text-white/60 bg-white/5 border border-white/10 rounded-r-lg hover:bg-white/10 hover:text-white transition-colors disabled:opacity-50",children:"Sonraki"})]})]})]})]})}),T&&_&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[(0,l.jsx)("h3",{className:"text-white text-xl font-bold mb-4",children:"withdrawals"===h?"\xc7ekim Onayla":"Yatırım Onayla"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Kullanıcı: ",(null===(e=_.user)||void 0===e?void 0:e.username)||(null===(t=_.user)||void 0===t?void 0:t.email)]}),(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Tutar: ₺",null===(a=_.amount)||void 0===a?void 0:a.toFixed(2)]}),"withdrawals"===h&&(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["IBAN: ",_.iban]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Admin Notu (Opsiyonel)"}),(0,l.jsx)("textarea",{className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",value:F,onChange:e=>U(e.target.value),placeholder:"Not ekleyin..."})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:()=>ev(_._id),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Onayla"}),(0,l.jsx)("button",{onClick:()=>{M(!1),U(""),O(null)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"İptal"})]})]})}),ei&&em&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[(0,l.jsx)("h3",{className:"text-white text-xl font-bold mb-4",children:"Edit User IBAN"}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["User: ","object"==typeof em?em.username||em.email:"N/A"]})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"IBAN *"}),(0,l.jsx)("input",{type:"text",value:eh.iban,onChange:e=>ex({...eh,iban:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"TR00 0000 0000 0000 0000 0000 00"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"IBAN Holder Name *"}),(0,l.jsx)("input",{type:"text",value:eh.ibanHolderName,onChange:e=>ex({...eh,ibanHolderName:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Account Holder Name"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Bank Name (Optional)"}),(0,l.jsx)("input",{type:"text",value:eh.bankName,onChange:e=>ex({...eh,bankName:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Bank Name"})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:async()=>{try{let e="object"==typeof em?em._id:em;await d.Sb.updateUserIban(e,eh),q("IBAN updated successfully"),eo(!1),eu(null),ex({iban:"",ibanHolderName:"",bankName:""}),eg(),setTimeout(()=>q(""),3e3)}catch(a){var e,t;k((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to update IBAN")}},disabled:!eh.iban||!eh.ibanHolderName,className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Update IBAN"}),(0,l.jsx)("button",{onClick:()=>{eo(!1),eu(null),ex({iban:"",ibanHolderName:"",bankName:""})},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),ed&&em&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[(0,l.jsx)("h3",{className:"text-white text-xl font-bold mb-4",children:"Update User Balance"}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["User: ","object"==typeof em?em.username||em.email:"N/A"]}),"object"==typeof em&&void 0!==em.balance&&(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Current Balance: ₺",(null===(r=em.balance)||void 0===r?void 0:r.toFixed(2))||"0.00"]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Amount *"}),(0,l.jsx)("input",{type:"number",value:ep.amount,onChange:e=>eb({...ep,amount:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"0.00",min:"0",step:"0.01"})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Type *"}),(0,l.jsxs)("select",{value:ep.type,onChange:e=>eb({...ep,type:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,l.jsx)("option",{value:"add",children:"Add (Credit)"}),(0,l.jsx)("option",{value:"subtract",children:"Subtract (Debit)"})]})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Description (Optional)"}),(0,l.jsx)("textarea",{value:ep.description,onChange:e=>eb({...ep,description:e.target.value}),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Transaction description..."})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)("button",{onClick:async()=>{try{let e="object"==typeof em?em._id:em;await d.Sb.updateUserBalance(e,ep),q("Balance ".concat("add"===ep.type?"added":"subtracted"," successfully")),ec(!1),eu(null),eb({amount:"",type:"add",description:""}),eg(),setTimeout(()=>q(""),3e3)}catch(a){var e,t;k((null===(t=a.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to update balance")}},disabled:!ep.amount||0>=parseFloat(ep.amount),className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Balance"}),(0,l.jsx)("button",{onClick:()=>{ec(!1),eu(null),eb({amount:"",type:"add",description:""})},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),W&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[(0,l.jsx)("h3",{className:"text-white text-xl font-bold mb-4",children:"Bulk Action"}),(0,l.jsx)("div",{className:"mb-4",children:(0,l.jsxs)("p",{className:"text-white/70 text-sm mb-4",children:["withdrawals"===h?"Withdrawals":"Deposits",": ",(0,l.jsx)("span",{className:"font-bold text-white",children:z.length})," selected"]})}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Action"}),(0,l.jsxs)("select",{value:Y,onChange:e=>Q(e.target.value),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,l.jsx)("option",{value:"",children:"Select Action"}),(0,l.jsx)("option",{value:"approve",children:"Approve"}),"withdrawals"===h?(0,l.jsx)("option",{value:"reject",children:"Reject"}):(0,l.jsx)("option",{value:"cancel",children:"Cancel"})]})]}),"reject"===Y&&(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Rejection Reason *"}),(0,l.jsx)("textarea",{value:G,onChange:e=>K(e.target.value),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Enter rejection reason...",required:!0})]}),(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Admin Notes (Optional)"}),(0,l.jsx)("textarea",{value:F,onChange:e=>U(e.target.value),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Add notes..."})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsxs)("button",{onClick:ek,disabled:!Y||"reject"===Y&&!G,className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["approve"===Y?"Approve":"reject"===Y?"Reject":"Cancel"," ",z.length," Items"]}),(0,l.jsx)("button",{onClick:()=>{P(!1),Q(""),K(""),U("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function x(){return(0,l.jsx)(o.Z,{children:(0,l.jsx)(h,{})})}},96666:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var l=a(57437),s=a(2265),r=a(24033),n=a(87300);function i(e){let{children:t}=e,a=(0,r.useRouter)(),i=(0,r.usePathname)(),[o,d]=(0,s.useState)(!1),[c,m]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(()=>{if(!(0,n.$8)()){let e=encodeURIComponent(i||"/admin");a.push("/auth/login?next=".concat(e));return}if(!(0,n.GJ)()){a.push("/dashboard");return}d(!0),m(!1)})()},[a,i]),c)?(0,l.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background-dark",children:(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"}),(0,l.jsx)("p",{className:"text-white/70 text-sm",children:"Verifying access..."})]})}):o?(0,l.jsx)(l.Fragment,{children:t}):null}},87300:function(e,t,a){"use strict";a.d(t,{$8:function(){return r},GJ:function(){return n},My:function(){return i},kS:function(){return o},ts:function(){return l}});let l=()=>{try{let e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},s=()=>localStorage.getItem("token"),r=()=>!!s(),n=()=>{let e=l();return!!e&&["admin","super_admin","operator"].includes(e.role)},i=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/"}},66209:function(e,t,a){"use strict";a.d(t,{X6:function(){return i},dN:function(){return n},o0:function(){return s},p6:function(){return l}});let l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"N/A";try{let a=new Date(e);if(isNaN(a.getTime()))return"N/A";let l={day:"2-digit",month:"2-digit",year:"numeric",...t};return a.toLocaleDateString("tr-TR",l)}catch(e){return console.error("Error formatting date:",e),"N/A"}},s=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TRY",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tr-TR";if(null==e)return r(0,t,a);try{let l="string"==typeof e?parseFloat(e):e;if(isNaN(l))return r(0,t,a);return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(l)}catch(a){return console.error("Error formatting currency:",a),"".concat(e," ").concat(t)}},n=e=>r(e,"TRY","tr-TR"),i=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return"+".concat(t.toFixed(1),"%");if(t<0)return"".concat(t.toFixed(1),"%");return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},24215:function(e,t,a){"use strict";a.d(t,{cM:function(){return n}});let l={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class s{formatMessage(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=new Date().toISOString(),s="[".concat(l,"] [").concat(e.toUpperCase(),"]");return a?{prefix:s,message:t,data:a}:{prefix:s,message:t}}debug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isDevelopment)return;let a=this.formatMessage(l.DEBUG,e,t);t?console.log(a.prefix,a.message,a.data):console.log(a.prefix,a.message)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(l.INFO,e,t);t?console.info(a.prefix,a.message,a.data):console.info(a.prefix,a.message)}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(l.WARN,e,t);t?console.warn(a.prefix,a.message,a.data):console.warn(a.prefix,a.message)}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(l.ERROR,e,t);t?(console.error(a.prefix,a.message,t),this.isDevelopment):console.error(a.prefix,a.message)}apiError(e,t){var a,l,s,r;this.error("API Error [".concat(e,"]"),{endpoint:e,status:null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.status,message:(null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(l=s.data)||void 0===l?void 0:l.message)||(null==t?void 0:t.message),data:null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.data})}constructor(){this.isDevelopment=!1}}let r=new s,n={debug:(e,t)=>r.debug(e,t),info:(e,t)=>r.info(e,t),warn:(e,t)=>r.warn(e,t),error:(e,t)=>r.error(e,t),apiError:(e,t)=>r.apiError(e,t)}},24033:function(e,t,a){e.exports=a(15313)}},function(e){e.O(0,[1176,4829,2385,5811,2971,4938,1744],function(){return e(e.s=26711)}),_N_E=e.O()}]);