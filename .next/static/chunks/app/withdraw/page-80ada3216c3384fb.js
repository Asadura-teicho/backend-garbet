(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[549],{99911:function(e,t,r){Promise.resolve().then(r.bind(r,30462))},30462:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var a=r(57437),s=r(2265),n=r(24033),i=r(24322),l=r(62385),o=r(66209),d=r(18965),c=r(96299),u=r(49453);function m(){let{t:e,language:t}=(0,c.$)(),r=(0,n.useRouter)(),[i,m]=(0,s.useState)(null),[h,x]=(0,s.useState)(!1),[b,f]=(0,s.useState)(""),[p,w]=(0,s.useState)(""),[g,v]=(0,s.useState)(""),[N,y]=(0,s.useState)(""),[j,k]=(0,s.useState)([]),[R,E]=(0,s.useState)(!1);(0,s.useEffect)(()=>{T(),O()},[]);let T=async()=>{try{let e=await l.kv.getMe();m(e.data)}catch(t){var e;(null===(e=t.response)||void 0===e?void 0:e.status)===401&&r.push("/auth/login")}},O=async()=>{E(!0);try{var e,t;let r=await l.wm.getWithdrawalRequests({}),a=(null===(e=r.data)||void 0===e?void 0:e.withdrawalRequests)||(null===(t=r.data)||void 0===t?void 0:t.withdrawals);Array.isArray(a)?k(a):Array.isArray(r.data)?k(r.data):k([])}catch(e){console.error("Failed to fetch withdrawals:",e),k([])}finally{E(!1)}},A=async t=>{if(t.preventDefault(),!g||0>=parseFloat(g)){f(e("errors.invalidAmount"));return}if(!(null==i?void 0:i.iban)||!(null==i?void 0:i.ibanHolderName)){f(e("errors.ibanRequired")),r.push("/profile");return}x(!0),f(""),w("");try{await l.wm.createWithdrawal({amount:parseFloat(g),description:N||e("common.withdrawTitle")}),w(e("common.withdrawTitle")+" "+e("common.completed")),v(""),y(""),await T(),await O()}catch(t){f((0,u.e$)(t)||e("errors.withdrawalFailed"))}finally{x(!1)}},S=e=>{switch(e){case"approved":case"paid":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"rejected":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},P=t=>e("withdraw.status.".concat(t))||t;return(0,a.jsxs)("div",{className:"flex min-h-screen bg-background-light dark:bg-background-dark font-display text-[#EAEAEA]",children:[(0,a.jsx)(d.Z,{}),(0,a.jsx)("div",{className:"flex-1 flex flex-col ml-0 lg:ml-64",children:(0,a.jsx)("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8",children:(0,a.jsx)("div",{className:"max-w-6xl mx-auto",children:(0,a.jsxs)("main",{className:"flex-grow pt-8 sm:pt-12 pb-12",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between gap-4 p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("p",{className:"text-white text-3xl sm:text-4xl font-black leading-tight tracking-[-0.033em]",children:e("withdraw.title")}),(0,a.jsx)("p",{className:"text-text-dark text-base font-normal leading-normal",children:e("withdraw.subtitle")})]}),i&&(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsx)("p",{className:"text-text-dark text-sm",children:e("withdraw.currentBalance")}),(0,a.jsx)("p",{className:"text-white text-2xl font-bold",children:(0,o.dN)(i.balance||0)})]})]}),b&&(0,a.jsx)("div",{className:"mb-4 mx-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:b})}),p&&(0,a.jsx)("div",{className:"mb-4 mx-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:(0,a.jsx)("p",{className:"text-sm text-green-400",children:p})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8 p-4",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/10",children:[(0,a.jsx)("h2",{className:"text-white text-xl font-bold mb-6",children:e("withdraw.withdrawalForm")}),(null==i?void 0:i.iban)&&(null==i?void 0:i.ibanHolderName)?(0,a.jsxs)("div",{className:"mb-6 p-4 bg-white/5 rounded-lg",children:[(0,a.jsx)("p",{className:"text-text-dark text-sm mb-1",children:e("withdraw.ibanInfo")}),(0,a.jsx)("p",{className:"text-white font-medium",children:i.iban}),(0,a.jsx)("p",{className:"text-text-dark text-sm mt-1",children:i.ibanHolderName}),i.bankName&&(0,a.jsx)("p",{className:"text-text-dark text-sm",children:i.bankName})]}):(0,a.jsxs)("div",{className:"bg-yellow-500/20 border border-yellow-500/50 rounded-lg p-4 mb-6",children:[(0,a.jsx)("p",{className:"text-yellow-400 text-sm mb-2",children:e("withdraw.ibanInfoMissing")}),(0,a.jsx)("button",{onClick:()=>r.push("/profile"),className:"px-4 py-2 bg-primary text-black rounded-lg font-medium hover:bg-yellow-400 transition-colors",children:e("withdraw.goToProfile")})]}),(0,a.jsxs)("form",{onSubmit:A,children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:e("withdraw.amount")}),(0,a.jsx)("input",{type:"number",value:g,onChange:e=>v(e.target.value),placeholder:"0.00",min:"100",max:(null==i?void 0:i.balance)||0,step:"0.01",className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-primary",required:!0,disabled:h||!(null==i?void 0:i.iban)||!(null==i?void 0:i.ibanHolderName)}),(0,a.jsxs)("p",{className:"text-text-dark text-xs mt-2",children:[e("withdraw.minimum"),": ₺100 | ",e("withdraw.maximum"),": ",(0,o.dN)((null==i?void 0:i.balance)||0)]})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("p",{className:"text-text-dark text-sm mb-2",children:e("withdraw.quickSelection")}),(0,a.jsx)("div",{className:"flex flex-wrap gap-2",children:[100,250,500,1e3,2500,5e3].map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>{e<=((null==i?void 0:i.balance)||0)&&v(e.toString())},disabled:e>((null==i?void 0:i.balance)||0)||h||!(null==i?void 0:i.iban)||!(null==i?void 0:i.ibanHolderName),className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white text-sm hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["₺",e]},e))})]}),(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:e("withdraw.description")}),(0,a.jsx)("textarea",{value:N,onChange:e=>y(e.target.value),placeholder:e("withdraw.descriptionPlaceholder"),rows:"3",className:"w-full rounded-lg bg-white/5 border border-white/10 text-white px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary resize-none",disabled:h||!(null==i?void 0:i.iban)||!(null==i?void 0:i.ibanHolderName)})]}),(0,a.jsx)("button",{type:"submit",disabled:h||!(null==i?void 0:i.iban)||!(null==i?void 0:i.ibanHolderName)||!g||0>=parseFloat(g),className:"w-full h-12 rounded-lg bg-primary text-black font-bold hover:bg-yellow-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h?e("withdraw.processing"):e("withdraw.createRequest")})]})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-surface-dark rounded-xl p-6 border border-white/10",children:[(0,a.jsx)("h2",{className:"text-white text-xl font-bold mb-6",children:e("withdraw.withdrawalHistory")}),R?(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-primary border-t-transparent"})}):0===j.length?(0,a.jsx)("p",{className:"text-text-dark text-sm text-center py-8",children:e("withdraw.noWithdrawals")}):(0,a.jsx)("div",{className:"space-y-4 max-h-[600px] overflow-y-auto",children:j.map(r=>(0,a.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-white font-medium",children:(0,o.dN)(r.amount)}),(0,a.jsx)("p",{className:"text-text-dark text-xs mt-1",children:new Date(r.createdAt).toLocaleDateString("en"===t?"en-US":"tr-TR")})]}),(0,a.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(S(r.status)),children:P(r.status)})]}),r.rejectionReason&&(0,a.jsxs)("p",{className:"text-red-400 text-xs mt-2",children:[e("withdraw.rejectionReason"),": ",r.rejectionReason]}),r.adminNotes&&(0,a.jsxs)("p",{className:"text-text-dark text-xs mt-2",children:[e("withdraw.note"),": ",r.adminNotes]})]},r._id))})]})})]})]})})})})]})}function h(){return(0,a.jsx)(i.Z,{children:(0,a.jsx)(m,{})})}},24322:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var a=r(57437),s=r(2265),n=r(24033),i=r(87300),l=r(60473);function o(e){let{children:t,requiredRole:r=null,allowedRoles:o=null}=e,d=(0,n.useRouter)(),[c,u]=(0,s.useState)(!1),[m,h]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(()=>{if(!(0,i.$8)()){d.push("/auth/login");return}let e=(0,i.ts)();if(!e){d.push("/auth/login");return}if(r&&e.role!==r||o&&!o.includes(e.role)){d.push((0,i.My)(e.role));return}u(!0),h(!1)})()},[d,r,o]),m)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),(0,a.jsx)("p",{className:"text-white",children:"Loading..."})]})}):c?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{}),t]}):null}},18965:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var a=r(57437),s=r(2265),n=r(61396),i=r.n(n),l=r(24033),o=r(96299),d=r(62385);function c(){let{t:e}=(0,o.$)(),t=(0,l.usePathname)(),[r,n]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await d.kv.getMe();n(e.data)}catch(e){console.error("Failed to fetch user:",e)}})()},[]);let c=[{id:"overview",label:e("dashboard.menuOverview"),icon:"dashboard",href:"/dashboard"},{id:"deposit",label:e("dashboard.menuDeposit"),icon:"account_balance_wallet",href:"/deposit"},{id:"withdraw",label:e("dashboard.menuWithdraw"),icon:"payments",href:"/withdraw"},{id:"transactions",label:"Transactions",icon:"receipt_long",href:"/transactions"},{id:"bet-history",label:e("dashboard.menuBetHistory"),icon:"sports_soccer",href:"/sports"},{id:"game-history",label:e("dashboard.menuGameHistory"),icon:"casino",href:"/slots"},{id:"bonuses",label:e("dashboard.menuBonuses"),icon:"emoji_events",href:"/bonuses"},{id:"settings",label:e("dashboard.menuSettings"),icon:"settings",href:"/profile"}];return(0,a.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex-col bg-background-dark border-r border-surface hidden lg:flex z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-surface",children:[(0,a.jsx)("div",{className:"size-8 text-primary",children:(0,a.jsxs)("svg",{fill:"currentColor",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{clipPath:"url(#clip0_6_319)",children:(0,a.jsx)("path",{d:"M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z"})}),(0,a.jsx)("defs",{children:(0,a.jsx)("clipPath",{id:"clip0_6_319",children:(0,a.jsx)("rect",{fill:"white",height:"48",width:"48"})})})]})}),(0,a.jsx)(i(),{href:"/",children:(0,a.jsx)("h2",{className:"text-white text-xl font-bold",children:"Garbet"})})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 p-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 mb-4",children:[(0,a.jsx)("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAuhux6dpQvPR-RdOeaTaRrgQkV5Eq0ycakfmhZ14nIjMP68y4K7cXqyORaLFyN0P3tEwtd0zZqPHn5rulfpLx7bkvQElTJmDbLf6Z44yXJAlanpWVQqtzFfVEkFtQzWBb5CBABwV-PJyT82HfkwXfNrquaMr92GzVOd2NyezQu1QoSzfn8PkY_ukvA5q1szlNZBBw1SZD83oQj2FTqIMaRH8Js3ufJIyWtGhy9ml7_96FcmxSt35SIW7FQ2v-822p0zaAR0bRc0S8")'}}),(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("h1",{className:"text-white text-base font-medium leading-normal",children:(null==r?void 0:r.firstName)&&(null==r?void 0:r.lastName)?"".concat(r.firstName," ").concat(r.lastName):(null==r?void 0:r.username)||"User"}),(0,a.jsx)("p",{className:"text-gray-400 text-sm font-normal leading-normal",children:(null==r?void 0:r.email)||"user@email.com"})]})]}),(0,a.jsx)("nav",{className:"flex flex-col gap-2",children:c.map(e=>{let r=t===e.href||"/dashboard"===e.href&&t.startsWith("/dashboard");return(0,a.jsxs)(i(),{href:e.href,className:"flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ".concat(r?"bg-surface text-primary":"hover:bg-surface/50 text-white"),children:[(0,a.jsx)("span",{className:"material-symbols-outlined ".concat(r?"text-blue":"text-white/70"),style:r?{fontVariationSettings:"'FILL' 1"}:{},children:e.icon}),(0,a.jsx)("p",{className:"text-white text-sm font-medium leading-normal",children:e.label})]},e.id)})})]})]})}},49453:function(e,t,r){"use strict";r.d(t,{e$:function(){return l},eZ:function(){return s},zG:function(){return c}});let a=null,s=e=>{a=e},n=(e,t)=>{if(a&&"function"==typeof a){let r=a("errors.".concat(e));return r!=="errors.".concat(e)?r:t}return t},i={NETWORK:"NETWORK_ERROR",TIMEOUT:"TIMEOUT_ERROR",AUTH:"AUTH_ERROR",VALIDATION:"VALIDATION_ERROR",SERVER:"SERVER_ERROR",CLIENT:"CLIENT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},l=function(e){var t,r,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e)return e;if(null==e?void 0:e.response){let r=e.response.status,a=null===(t=e.response.data)||void 0===t?void 0:t.message;if(a){let e=a.toLowerCase();if(e.includes("token expired")||e.includes("token inval"))return n("tokenExpired",a);if(e.includes("unauthorized")||e.includes("no access token"))return n("noAccessToken",a);if(e.includes("banned"))return n("accountBanned",a);if(e.includes("insufficient balance")||e.includes("yetersiz bakiye"))return n("insufficientBalance",a);if(e.includes("iban")&&e.includes("required"))return n("ibanRequired",a);if(e.includes("kyc")){if(e.includes("required"))return n("kycRequired",a);if(e.includes("pending"))return n("kycPending",a);if(e.includes("rejected"))return n("kycRejected",a)}return a}switch(r){case 400:return n("invalidRequest","Invalid request. Please check your input and try again.");case 401:return n("sessionExpired","Your session has expired. Please log in again.");case 403:return n("noPermission","You do not have permission to perform this action.");case 404:return n("notFound","The requested resource was not found.");case 409:return n("conflict","This action conflicts with existing data.");case 422:return n("validationError","Validation error. Please check your input.");case 429:return n("tooManyRequests","Too many requests. Please try again later.");case 500:return n("serverError","Server error. Please try again later or contact support.");case 502:case 503:return n("serviceUnavailable","Service temporarily unavailable. Please try again later.");default:return n("unexpectedError","An error occurred. Please try again.")}}return(null==e?void 0:e.request)?"ECONNABORTED"===e.code||(null===(r=e.message)||void 0===r?void 0:r.includes("timeout"))?n("timeoutError","Request timed out. Please check your internet connection and try again."):"ERR_NETWORK"===e.code||(null===(a=e.message)||void 0===a?void 0:a.includes("Network Error"))?n("networkError","Network error. Please check your internet connection and ensure the server is running."):"ERR_CORS"===e.code?n("corsError","CORS error. Please contact support if this persists."):n("connectionError","Unable to connect to server. Please check your internet connection."):(null==e?void 0:e.name)==="ValidationError"?n("validationError",e.message||"Validation error. Please check your input."):(null==e?void 0:e.message)&&(e.message.includes("Network")||e.message.includes("timeout"))?n("networkError","Network error. Please check your connection."):n("unexpectedError",s||"An unexpected error occurred. Please try again.")},o=e=>{if(null==e?void 0:e.response){let t=e.response.status;if(401===t||403===t)return i.AUTH;if(t>=500)return i.SERVER;if(t>=400)return i.CLIENT}if(null==e?void 0:e.request){var t;return"ECONNABORTED"===e.code||(null===(t=e.message)||void 0===t?void 0:t.includes("timeout"))?i.TIMEOUT:i.NETWORK}return(null==e?void 0:e.name)==="ValidationError"?i.VALIDATION:i.UNKNOWN},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r={type:o(e),message:l(e),context:t,timestamp:new Date().toISOString()};return console.error("Error:",r),r},c=function(e){var t,r,a;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=d(e,{source:"API"});return{message:s||n.message,type:n.type,status:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.status,data:null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.data,isNetworkError:!(null==e?void 0:e.response)&&(null==e?void 0:e.request),isTimeout:(null==e?void 0:e.code)==="ECONNABORTED"||(null==e?void 0:null===(a=e.message)||void 0===a?void 0:a.includes("timeout"))}}}},function(e){e.O(0,[1176,4829,2385,6299,1761,473,2971,4938,1744],function(){return e(e.s=99911)}),_N_E=e.O()}]);