(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9674],{57479:function(e,t,r){Promise.resolve().then(r.bind(r,32602))},32602:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return h}});var n=r(57437),a=r(2265);r(61396);var s=r(24033),i=r(96666),l=r(62385),o=r(66209),c=r(24215);r(95811);var d=r(96299),u=r(28707);function m(){let{t:e}=(0,d.$)();(0,s.usePathname)();let[t,r]=(0,a.useState)(1),[i,m]=(0,a.useState)(""),[h,x]=(0,a.useState)("All"),[g,f]=(0,a.useState)(""),[p,b]=(0,a.useState)([]),[v,N]=(0,a.useState)(!1),[j,y]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[k,E]=(0,a.useState)(1),[C,A]=(0,a.useState)(0),[D,I]=(0,a.useState)(null),[R,_]=(0,a.useState)(!1),[F,U]=(0,a.useState)(""),[O,T]=(0,a.useState)([]),[M,P]=(0,a.useState)(!1),[B,L]=(0,a.useState)(""),[z,G]=(0,a.useState)(!1),[Z,$]=(0,a.useState)(""),[J,V]=(0,a.useState)("");(0,a.useEffect)(()=>{W()},[t,i,h,g]);let W=async()=>{N(!0),y("");try{let e={page:t,limit:50,status:"All"!==h?h.toLowerCase():void 0,search:i||void 0,startDate:Z||void 0,endDate:J||void 0},r=await l.Sb.getUsers(e),n=r.data.users||r.data.data||[];b(n),E(r.data.totalPages||1),A(r.data.total||n.length)}catch(t){var e,r;console.error("API Error Details:",t.response),y((null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.message)||"Failed to fetch users from server."),b([])}finally{N(!1)}},Y=e=>(0,o.dN)(e||0),X=e=>{switch(e){case"active":return"bg-green-500/20 text-green-400";case"blocked":case"suspended":return"bg-red-500/20 text-red-400";case"pending":return"bg-yellow-500/20 text-yellow-400";default:return"bg-gray-500/20 text-gray-400"}},q=e=>{switch(e){case"active":return"Active";case"blocked":return"Blocked";case"suspended":return"Suspended";case"pending":return"Pending";default:return e}},H=e=>{I(e),U(e.status),_(!0)},K=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},Q=async()=>{try{let e={};i&&(e.search=i),h&&"All"!==h&&(e.status=h),Z&&(e.startDate=Z),J&&(e.endDate=J);let t=await l.Sb.exportUsers(e),r=new Blob([t.data],{type:"text/csv;charset=utf-8;"}),n=document.createElement("a"),a=URL.createObjectURL(r);n.setAttribute("href",a),n.setAttribute("download","users-export-".concat(new Date().toISOString().split("T")[0],".csv")),n.style.visibility="hidden",document.body.appendChild(n),n.click(),document.body.removeChild(n),S("Users exported successfully")}catch(r){var e,t;y((null===(t=r.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to export users"),c.cM.apiError("/admin/users/export",r)}};return(0,n.jsxs)("div",{className:"flex min-h-screen w-full bg-background-dark",children:[(0,n.jsx)(u.Z,{}),(0,n.jsx)("main",{className:"flex-1 p-8 ml-64",children:(0,n.jsxs)("div",{className:"w-full max-w-7xl mx-auto",children:[(0,n.jsxs)("div",{className:"flex flex-wrap justify-between items-center gap-4 mb-6",children:[(0,n.jsx)("p",{className:"text-white text-4xl font-black leading-tight tracking-[-0.033em]",children:"User Management"}),(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[O.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("button",{onClick:()=>P(!0),className:"h-10 px-4 rounded-lg bg-yellow-500 text-white font-bold",children:["Bulk Update (",O.length,")"]}),(0,n.jsx)("button",{onClick:()=>T([]),className:"h-10 px-4 rounded-lg bg-gray-500 text-white font-bold",children:"Clear"})]}),(0,n.jsx)("button",{onClick:Q,className:"h-10 px-4 rounded-lg bg-green-500 text-white font-bold",children:"Export CSV"})]})]}),j&&(0,n.jsx)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,n.jsx)("p",{className:"text-sm text-red-400",children:j})}),w&&(0,n.jsx)("div",{className:"mb-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:(0,n.jsx)("p",{className:"text-sm text-green-400",children:w})}),(0,n.jsx)("div",{className:"overflow-x-auto rounded-xl border border-white/10 bg-[#111718]",children:(0,n.jsxs)("table",{className:"w-full text-sm text-white",children:[(0,n.jsx)("thead",{className:"bg-[#1b2527]",children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"px-6 py-4",children:(0,n.jsx)("input",{type:"checkbox",checked:O.length===p.length&&p.length>0,onChange:()=>{O.length===p.length?T([]):T(p.map(e=>e._id))}})}),(0,n.jsx)("th",{className:"px-6 py-4 text-left",children:"Username"}),(0,n.jsx)("th",{className:"px-6 py-4 text-left",children:"Email"}),(0,n.jsx)("th",{className:"px-6 py-4 text-left",children:"Status"}),(0,n.jsx)("th",{className:"px-6 py-4 text-left",children:"Balance"}),(0,n.jsx)("th",{className:"px-6 py-4 text-right",children:"Actions"})]})}),(0,n.jsx)("tbody",{children:v?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-white/60",children:"Loading..."})}):0===p.length?(0,n.jsx)("tr",{children:(0,n.jsx)("td",{colSpan:6,className:"px-6 py-8 text-center text-white/60",children:"No users found"})}):p.map(e=>(0,n.jsxs)("tr",{className:"border-t border-white/10",children:[(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("input",{type:"checkbox",checked:O.includes(e._id),onChange:()=>K(e._id)})}),(0,n.jsx)("td",{className:"px-6 py-4",children:e.username}),(0,n.jsx)("td",{className:"px-6 py-4 text-white/70",children:e.email}),(0,n.jsx)("td",{className:"px-6 py-4",children:(0,n.jsx)("span",{className:X(e.status),children:q(e.status)})}),(0,n.jsx)("td",{className:"px-6 py-4 text-white/70",children:Y(e.balance)}),(0,n.jsx)("td",{className:"px-6 py-4 text-right",children:(0,n.jsx)("button",{onClick:()=>H(e),className:"text-[#0dccf2]",children:"Edit"})})]},e._id))})]})})]})})]})}function h(){return(0,n.jsx)(i.Z,{children:(0,n.jsx)(m,{})})}},96666:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var n=r(57437),a=r(2265),s=r(24033),i=r(87300);function l(e){let{children:t}=e,r=(0,s.useRouter)(),l=(0,s.usePathname)(),[o,c]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(()=>{if(!(0,i.$8)()){let e=encodeURIComponent(l||"/admin");r.push("/auth/login?next=".concat(e));return}if(!(0,i.GJ)()){r.push("/dashboard");return}c(!0),u(!1)})()},[r,l]),d)?(0,n.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background-dark",children:(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,n.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"}),(0,n.jsx)("p",{className:"text-white/70 text-sm",children:"Verifying access..."})]})}):o?(0,n.jsx)(n.Fragment,{children:t}):null}},28707:function(e,t,r){"use strict";r.d(t,{Z:function(){return c}});var n=r(57437),a=r(2265),s=r(61396),i=r.n(s),l=r(24033),o=r(96299);function c(){let{t:e}=(0,o.$)(),t=(0,l.usePathname)(),[r,s]=(0,a.useState)(!1),c=[{id:"dashboard",label:e("admin.dashboard"),icon:"dashboard",href:"/admin"},{id:"users",label:e("admin.users"),icon:"group",href:"/admin/users"},{id:"kyc",label:e("admin.kyc"),icon:"badge",href:"/admin/kyc"},{id:"games",label:e("admin.games"),icon:"gamepad",href:"/admin/games"},{id:"betting",label:e("admin.betting"),icon:"sports_soccer",href:"/admin/betting"},{id:"promotions",label:e("admin.promotions"),icon:"campaign",href:"/admin/promotions"},{id:"deposits",label:e("admin.deposits"),icon:"arrow_downward",href:"/admin/deposits"},{id:"withdrawals",label:e("admin.withdrawals"),icon:"arrow_upward",href:"/admin/withdrawals"},{id:"tournaments",label:e("admin.tournaments"),icon:"emoji_events",href:"/admin/tournaments"},{id:"content",label:e("admin.content"),icon:"wysiwyg",href:"/admin/content"}];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:()=>s(!r),className:"lg:hidden fixed top-4 left-4 z-[60] p-2 bg-background-dark border border-surface rounded-lg text-white hover:bg-white/10 transition-colors","aria-label":"Toggle sidebar",children:(0,n.jsx)("span",{className:"material-symbols-outlined",children:r?"close":"menu"})}),r&&(0,n.jsx)("div",{className:"lg:hidden fixed inset-0 bg-black/50 z-[55]",onClick:()=>s(!1)}),(0,n.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex flex-col bg-background-dark border-r border-surface p-4 z-50 transition-transform duration-300 ".concat(r?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:[(0,n.jsxs)("div",{className:"flex items-center gap-3 mb-8 px-2",children:[(0,n.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary",children:(0,n.jsx)("span",{className:"material-symbols-outlined text-black",children:"casino"})}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("h1",{className:"text-base font-bold text-white",children:e("admin.title")}),(0,n.jsx)("p",{className:"text-sm text-gray-400",children:e("admin.management")})]})]}),(0,n.jsx)("nav",{className:"flex flex-col gap-2",children:c.map(e=>(0,n.jsxs)(i(),{href:e.href,onClick:()=>s(!1),className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ".concat(t===e.href||"dashboard"===e.id&&"/admin"===t?"bg-primary/20 text-primary":"text-gray-300 hover:bg-white/10"),children:[(0,n.jsx)("span",{className:"material-symbols-outlined",children:e.icon}),(0,n.jsx)("p",{children:e.label})]},e.id))}),(0,n.jsxs)("div",{className:"mt-auto",children:[(0,n.jsxs)(i(),{href:"/admin/settings",onClick:()=>s(!1),className:"flex items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-white/10 transition-colors",children:[(0,n.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:e("admin.settings")})]}),(0,n.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/auth/login"},className:"mt-2 flex w-full items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[(0,n.jsx)("span",{className:"material-symbols-outlined",children:"logout"}),(0,n.jsx)("p",{className:"text-sm font-medium",children:e("admin.logout")})]})]})]})]})}},87300:function(e,t,r){"use strict";r.d(t,{$8:function(){return s},GJ:function(){return i},My:function(){return l},kS:function(){return o},ts:function(){return n}});let n=()=>{try{let e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},a=()=>localStorage.getItem("token"),s=()=>!!a(),i=()=>{let e=n();return!!e&&["admin","super_admin","operator"].includes(e.role)},l=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/"}},66209:function(e,t,r){"use strict";r.d(t,{X6:function(){return l},dN:function(){return i},o0:function(){return a},p6:function(){return n}});let n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"N/A";try{let r=new Date(e);if(isNaN(r.getTime()))return"N/A";let n={day:"2-digit",month:"2-digit",year:"numeric",...t};return r.toLocaleDateString("tr-TR",n)}catch(e){return console.error("Error formatting date:",e),"N/A"}},a=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TRY",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tr-TR";if(null==e)return s(0,t,r);try{let n="string"==typeof e?parseFloat(e):e;if(isNaN(n))return s(0,t,r);return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(r){return console.error("Error formatting currency:",r),"".concat(e," ").concat(t)}},i=e=>s(e,"TRY","tr-TR"),l=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return"+".concat(t.toFixed(1),"%");if(t<0)return"".concat(t.toFixed(1),"%");return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},24215:function(e,t,r){"use strict";r.d(t,{cM:function(){return i}});let n={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class a{formatMessage(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=new Date().toISOString(),a="[".concat(n,"] [").concat(e.toUpperCase(),"]");return r?{prefix:a,message:t,data:r}:{prefix:a,message:t}}debug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isDevelopment)return;let r=this.formatMessage(n.DEBUG,e,t);t?console.log(r.prefix,r.message,r.data):console.log(r.prefix,r.message)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.formatMessage(n.INFO,e,t);t?console.info(r.prefix,r.message,r.data):console.info(r.prefix,r.message)}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.formatMessage(n.WARN,e,t);t?console.warn(r.prefix,r.message,r.data):console.warn(r.prefix,r.message)}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=this.formatMessage(n.ERROR,e,t);t?(console.error(r.prefix,r.message,t),this.isDevelopment):console.error(r.prefix,r.message)}apiError(e,t){var r,n,a,s;this.error("API Error [".concat(e,"]"),{endpoint:e,status:null==t?void 0:null===(r=t.response)||void 0===r?void 0:r.status,message:(null==t?void 0:null===(a=t.response)||void 0===a?void 0:null===(n=a.data)||void 0===n?void 0:n.message)||(null==t?void 0:t.message),data:null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.data})}constructor(){this.isDevelopment=!1}}let s=new a,i={debug:(e,t)=>s.debug(e,t),info:(e,t)=>s.info(e,t),warn:(e,t)=>s.warn(e,t),error:(e,t)=>s.error(e,t),apiError:(e,t)=>s.apiError(e,t)}},24033:function(e,t,r){e.exports=r(15313)}},function(e){e.O(0,[1176,4829,2385,6299,5811,2971,4938,1744],function(){return e(e.s=57479)}),_N_E=e.O()}]);