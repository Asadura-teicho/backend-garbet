(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6716],{69471:function(e,r,t){Promise.resolve().then(t.bind(t,38786))},38786:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return m}});var n=t(57437),s=t(2265),i=t(24033),o=t(61396),a=t.n(o),l=t(96299),c=t(62385),u=t(49453);let d=["admin","super_admin","operator"];function m(){let{t:e}=(0,l.$)();(0,i.useRouter)();let r=(0,i.useSearchParams)(),[t,o]=(0,s.useState)(!1),[m,f]=(0,s.useState)(""),[h,g]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[v,b]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(0,u.eZ)(e)},[e]);let N=async t=>{t.preventDefault(),p(""),b(!0);try{let e;let{token:t,user:n,redirectPath:s}=(await c.kv.login(m,h)).data||{};if(!n||!t)throw Error("Login succeeded but no user or token payload was returned");localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(n));let i=d.includes(n.role);localStorage.setItem("isAdmin",i?"true":"false"),i&&n.email&&localStorage.setItem("adminEmail",n.email);let o=null==r?void 0:r.get("next"),a=o&&o.startsWith("/")?o:null;e=a?a.startsWith("/admin")&&!i?"/dashboard":a:s||(i?"/admin":"/dashboard"),window.location.href=e}catch(r){p((0,u.zG)(r,e("errors.loginFailed")).message)}finally{b(!1)}};return(0,n.jsxs)("div",{className:"relative flex min-h-screen w-full flex-col items-center justify-center bg-[#121212] bg-[url('https://images.unsplash.com/photo-1542744095-291d1f67b221?q=80&w=2070&auto=format&fit=crop')] bg-cover bg-center bg-no-repeat p-4 md:p-6 lg:p-8",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),(0,n.jsxs)("div",{className:"relative z-10 flex w-full max-w-md flex-col items-center",children:[(0,n.jsx)("header",{className:"mb-8 text-center",children:(0,n.jsx)("svg",{className:"mx-auto h-12 w-auto text-primary",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm-1-13h2v6h-2zm0 8h2v2h-2z"})})}),(0,n.jsx)("main",{className:"w-full rounded-xl border border-white/10 bg-[#1E1E1E]/85 p-6 shadow-2xl shadow-black/30 md:p-8",children:(0,n.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold leading-tight tracking-tight text-white md:text-3xl",children:e("login.title")}),(0,n.jsx)("p",{className:"mt-1 text-sm text-[#E0E0E0]/60",children:e("login.subtitle")})]}),x&&(0,n.jsxs)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3",children:[(0,n.jsx)("p",{className:"text-sm text-red-400 font-medium",children:x}),!1]}),(0,n.jsxs)("form",{className:"flex flex-col gap-6",onSubmit:N,children:[(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{className:"mb-2 text-sm font-medium leading-normal text-white",htmlFor:"email",children:e("login.email")}),(0,n.jsx)("input",{className:"h-12 w-full rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-sm font-normal leading-normal text-white placeholder:text-gray-500 transition-all focus:border-primary focus:bg-[#2f2f2f] focus:outline-none focus:ring-2 focus:ring-primary/20 disabled:opacity-50",id:"email",placeholder:e("login.emailPlaceholder"),type:"email",value:m,onChange:e=>f(e.target.value),required:!0,disabled:v,"aria-required":"true"})]}),(0,n.jsxs)("div",{className:"flex flex-col",children:[(0,n.jsx)("label",{className:"mb-2 text-sm font-medium leading-normal text-white",htmlFor:"password",children:e("login.password")}),(0,n.jsxs)("div",{className:"relative flex w-full items-center",children:[(0,n.jsx)("input",{className:"h-12 w-full rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 pr-12 text-sm font-normal leading-normal text-white placeholder:text-gray-500 transition-all focus:border-primary focus:bg-[#2f2f2f] focus:outline-none focus:ring-2 focus:ring-primary/20 disabled:opacity-50",id:"password",placeholder:e("login.passwordPlaceholder"),type:t?"text":"password",value:h,onChange:e=>g(e.target.value),required:!0,disabled:v,"aria-required":"true"}),(0,n.jsx)("button",{"aria-label":t?"Hide password":"Show password",className:"absolute right-3 flex items-center justify-center text-gray-400 transition-colors hover:text-white focus:outline-none focus:ring-2 focus:ring-primary/20 rounded",type:"button",onClick:()=>o(!t),tabIndex:0,children:(0,n.jsx)("span",{className:"material-symbols-outlined text-xl",children:t?"visibility_off":"visibility"})})]})]}),(0,n.jsx)("div",{className:"text-right",children:(0,n.jsx)(a(),{className:"text-sm font-medium text-[#4D96FF] hover:text-primary hover:underline transition-colors",href:"/auth/forgot-password",children:e("login.forgotPassword")})}),(0,n.jsx)("button",{className:"mt-2 flex h-12 w-full items-center justify-center rounded-lg bg-primary text-center text-sm font-bold text-black transition-all hover:brightness-110 active:scale-[0.98] focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 focus:ring-offset-[#1E1E1E] disabled:opacity-50 disabled:cursor-not-allowed",type:"submit",disabled:v,children:v?"Logging in...":e("common.login")})]}),(0,n.jsx)("div",{className:"mt-6 text-center",children:(0,n.jsxs)("p",{className:"text-sm text-gray-400",children:[e("login.dontHaveAccount")," ",(0,n.jsx)(a(),{className:"font-medium text-[#4D96FF] hover:text-primary hover:underline transition-colors",href:"/auth/register",children:e("login.createAccount")})]})})]})})]}),(0,n.jsx)("footer",{className:"absolute bottom-4 left-4 right-4 z-10 text-center",children:(0,n.jsx)("p",{className:"text-xs text-white/50",children:"\xa9 2024 Your Casino. All rights reserved. Please play responsibly."})})]})}},49453:function(e,r,t){"use strict";t.d(r,{e$:function(){return a},eZ:function(){return s},zG:function(){return u}});let n=null,s=e=>{n=e},i=(e,r)=>{if(n&&"function"==typeof n){let t=n("errors.".concat(e));return t!=="errors.".concat(e)?t:r}return r},o={NETWORK:"NETWORK_ERROR",TIMEOUT:"TIMEOUT_ERROR",AUTH:"AUTH_ERROR",VALIDATION:"VALIDATION_ERROR",SERVER:"SERVER_ERROR",CLIENT:"CLIENT_ERROR",UNKNOWN:"UNKNOWN_ERROR"},a=function(e){var r,t,n;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e)return e;if(null==e?void 0:e.response){let t=e.response.status,n=null===(r=e.response.data)||void 0===r?void 0:r.message;if(n){let e=n.toLowerCase();if(e.includes("token expired")||e.includes("token inval"))return i("tokenExpired",n);if(e.includes("unauthorized")||e.includes("no access token"))return i("noAccessToken",n);if(e.includes("banned"))return i("accountBanned",n);if(e.includes("insufficient balance")||e.includes("yetersiz bakiye"))return i("insufficientBalance",n);if(e.includes("iban")&&e.includes("required"))return i("ibanRequired",n);if(e.includes("kyc")){if(e.includes("required"))return i("kycRequired",n);if(e.includes("pending"))return i("kycPending",n);if(e.includes("rejected"))return i("kycRejected",n)}return n}switch(t){case 400:return i("invalidRequest","Invalid request. Please check your input and try again.");case 401:return i("sessionExpired","Your session has expired. Please log in again.");case 403:return i("noPermission","You do not have permission to perform this action.");case 404:return i("notFound","The requested resource was not found.");case 409:return i("conflict","This action conflicts with existing data.");case 422:return i("validationError","Validation error. Please check your input.");case 429:return i("tooManyRequests","Too many requests. Please try again later.");case 500:return i("serverError","Server error. Please try again later or contact support.");case 502:case 503:return i("serviceUnavailable","Service temporarily unavailable. Please try again later.");default:return i("unexpectedError","An error occurred. Please try again.")}}return(null==e?void 0:e.request)?"ECONNABORTED"===e.code||(null===(t=e.message)||void 0===t?void 0:t.includes("timeout"))?i("timeoutError","Request timed out. Please check your internet connection and try again."):"ERR_NETWORK"===e.code||(null===(n=e.message)||void 0===n?void 0:n.includes("Network Error"))?i("networkError","Network error. Please check your internet connection and ensure the server is running."):"ERR_CORS"===e.code?i("corsError","CORS error. Please contact support if this persists."):i("connectionError","Unable to connect to server. Please check your internet connection."):(null==e?void 0:e.name)==="ValidationError"?i("validationError",e.message||"Validation error. Please check your input."):(null==e?void 0:e.message)&&(e.message.includes("Network")||e.message.includes("timeout"))?i("networkError","Network error. Please check your connection."):i("unexpectedError",s||"An unexpected error occurred. Please try again.")},l=e=>{if(null==e?void 0:e.response){let r=e.response.status;if(401===r||403===r)return o.AUTH;if(r>=500)return o.SERVER;if(r>=400)return o.CLIENT}if(null==e?void 0:e.request){var r;return"ECONNABORTED"===e.code||(null===(r=e.message)||void 0===r?void 0:r.includes("timeout"))?o.TIMEOUT:o.NETWORK}return(null==e?void 0:e.name)==="ValidationError"?o.VALIDATION:o.UNKNOWN},c=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t={type:l(e),message:a(e),context:r,timestamp:new Date().toISOString()};return console.error("Error:",t),t},u=function(e){var r,t,n;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=c(e,{source:"API"});return{message:s||i.message,type:i.type,status:null==e?void 0:null===(r=e.response)||void 0===r?void 0:r.status,data:null==e?void 0:null===(t=e.response)||void 0===t?void 0:t.data,isNetworkError:!(null==e?void 0:e.response)&&(null==e?void 0:e.request),isTimeout:(null==e?void 0:e.code)==="ECONNABORTED"||(null==e?void 0:null===(n=e.message)||void 0===n?void 0:n.includes("timeout"))}}},24033:function(e,r,t){e.exports=t(15313)}},function(e){e.O(0,[1176,4829,2385,6299,2971,4938,1744],function(){return e(e.s=69471)}),_N_E=e.O()}]);