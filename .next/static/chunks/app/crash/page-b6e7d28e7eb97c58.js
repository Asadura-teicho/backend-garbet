(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4188],{93497:function(e,t,s){Promise.resolve().then(s.bind(s,25742))},25742:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var a=s(57437),l=s(2265);s(61396);var r=s(24033),n=s(96299),c=s(24322),d=s(62385),i=s(24215);function o(){let{t:e}=(0,n.$)(),t=(0,r.useRouter)(),[s,c]=(0,l.useState)(""),[o,x]=(0,l.useState)("50"),[u,m]=(0,l.useState)("1.50x"),[h,p]=(0,l.useState)(null),[f,g]=(0,l.useState)(0),[b,j]=(0,l.useState)(!1),[N,v]=(0,l.useState)(!1),[y,w]=(0,l.useState)(""),[k,F]=(0,l.useState)(""),[S,C]=(0,l.useState)([]),[R,B]=(0,l.useState)(1),[E,M]=(0,l.useState)("1.00x");(0,l.useEffect)(()=>{A(),L()},[]);let A=async()=>{try{let e=await d.kv.me();p(e.data),g(e.data.balance||0)}catch(s){var e;(null===(e=s.response)||void 0===e?void 0:e.status)===401?t.push("/auth/login"):i.cM.apiError("/auth/me",s)}},L=async()=>{try{var e;let t=await d.jZ.getBetRoundHistory({page:1,limit:12,sortBy:"createdAt",sortOrder:"desc"});if((null===(e=t.data)||void 0===e?void 0:e.betRounds)&&(C(t.data.betRounds),t.data.betRounds.length>0)){let e=t.data.betRounds[0];B((e.roundNumber||0)+1)}}catch(e){i.cM.apiError("/bet-rounds/history",e)}},_=e=>e>0?"".concat((1+e/100).toFixed(2),"x"):e<0?"Crashed":"1.00x",T=e=>e>0?e>=100?"bg-accent-blue/20 text-accent-blue":e>=50?"bg-accent-teal/20 text-accent-teal":"bg-surface":"bg-red-500/20 text-red-400",Z=e=>{x(e),c(e)},D=async()=>{var e,t,a;if(!s||0>=parseFloat(s)){w("Please enter a valid bet amount");return}let l=parseFloat(s);if(l>f){w("Insufficient balance");return}v(!0),w(""),F("");try{let t=(250*Math.random()-50).toFixed(2),s=parseFloat(t),a=await d.jZ.placeBetRound({roundNumber:R,betAmount:l,percentage:s});F("Bet placed successfully! Result: ".concat(s>0?"+":"").concat(s,"%")),c(""),x("50"),(null===(e=a.data)||void 0===e?void 0:e.balance)!==void 0&&g(a.data.balance),await A(),await L(),B(e=>e+1)}catch(e){w((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to place bet"),i.cM.apiError("/bet-rounds/place",e)}finally{v(!1)}};return(0,a.jsx)("div",{className:"relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden",children:(0,a.jsxs)("main",{className:"flex-grow p-4 lg:p-8",children:[(0,a.jsx)("div",{className:"mb-8",children:(0,a.jsx)("div",{className:"flex min-h-[240px] flex-col gap-6 bg-cover bg-center bg-no-repeat rounded-xl items-start justify-center p-8 md:p-12 text-left",style:{backgroundImage:'linear-gradient(90deg, rgba(26, 26, 46, 0.85) 0%, rgba(26, 26, 46, 0.3) 100%), url("https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80")'},children:(0,a.jsxs)("div",{className:"flex flex-col gap-4 max-w-lg",children:[(0,a.jsx)("h1",{className:"text-white text-4xl font-black leading-tight tracking-[-0.033em]",children:e("crash.title")}),(0,a.jsx)("p",{className:"text-white/80 text-lg font-medium",children:e("crash.subtitle")}),(0,a.jsx)("div",{className:"flex gap-3",children:(0,a.jsx)("button",{className:"flex min-w-[120px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-primary text-background-dark text-sm font-bold leading-normal tracking-[0.015em] hover:bg-yellow-400 transition-all",children:(0,a.jsx)("span",{className:"truncate",children:e("crash.playNow")})})})]})})}),(0,a.jsxs)("div",{className:"grid grid-cols-12 gap-4 lg:gap-6",children:[(0,a.jsx)("aside",{className:"col-span-12 lg:col-span-2 order-2 lg:order-1",children:(0,a.jsxs)("div",{className:"bg-surface/50 rounded-lg p-3 h-full",children:[(0,a.jsx)("h3",{className:"text-text-secondary font-semibold text-sm px-1 mb-3",children:"Recent Results"}),(0,a.jsx)("div",{className:"flex flex-row lg:flex-col gap-2 flex-wrap",children:S.length>0?S.slice(0,12).map((e,t)=>(0,a.jsx)("div",{className:"flex h-8 shrink-0 items-center justify-center gap-x-2 rounded-lg px-3 text-sm font-medium ".concat(T(e.percentage)),children:_(e.percentage)},e.id||t)):(0,a.jsx)("p",{className:"text-text-secondary text-xs",children:"No recent rounds"})})]})}),(0,a.jsx)("div",{className:"col-span-12 lg:col-span-7 order-1 lg:order-2",children:(0,a.jsxs)("div",{className:"relative w-full aspect-[16/10] bg-surface/30 rounded-lg overflow-hidden flex items-center justify-center p-8 shadow-inner",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-grid-pattern opacity-10"}),(0,a.jsxs)("div",{className:"z-10 text-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-primary",children:"Game in Progress"}),(0,a.jsx)("p",{className:"text-6xl sm:text-7xl font-bold tracking-tighter my-2 text-accent-teal",children:"4.51x"}),(0,a.jsx)("p",{className:"text-text-secondary text-sm",children:"Waiting for next round..."})]}),(0,a.jsx)("div",{className:"absolute bottom-0 left-0 h-3/4 w-full bg-gradient-to-t from-accent-teal/20 to-transparent"})]})}),(0,a.jsx)("aside",{className:"col-span-12 lg:col-span-3 order-3 lg:order-3",children:(0,a.jsxs)("div",{className:"bg-surface/50 rounded-lg p-4 space-y-4 h-full",children:[(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-text-secondary text-sm font-medium pb-2",children:e("crash.betAmount")}),(0,a.jsxs)("div",{className:"flex w-full items-stretch rounded-lg",children:[(0,a.jsx)("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-none bg-surface h-14 placeholder:text-text-secondary p-4 rounded-r-none border-r-0 pr-2 text-base font-normal leading-normal",placeholder:"0.00",value:s,onChange:e=>c(e.target.value),type:"text"}),(0,a.jsxs)("div",{className:"flex items-center bg-surface rounded-r-lg px-2",children:[(0,a.jsx)("button",{onClick:()=>{let e=parseFloat(s)||0;e>0&&c((e-1).toFixed(2))},className:"text-text-secondary hover:text-white transition-colors p-1",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-lg",children:"remove"})}),(0,a.jsx)("button",{onClick:()=>{c(((parseFloat(s)||0)+1).toFixed(2))},className:"text-text-secondary hover:text-white transition-colors p-1",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-lg",children:"add"})})]})]})]}),(0,a.jsx)("div",{className:"flex h-10 w-full items-center justify-center rounded-lg bg-surface p-1",children:["10","50","100","500"].map(e=>(0,a.jsxs)("label",{className:"flex cursor-pointer h-full grow items-center justify-center overflow-hidden rounded-md px-2 has-[:checked]:bg-background-dark has-[:checked]:shadow-sm has-[:checked]:text-white text-text-secondary text-sm font-medium transition-colors",children:[(0,a.jsxs)("span",{className:"truncate",children:[e," TL"]}),(0,a.jsx)("input",{className:"invisible w-0",name:"bet-amount",type:"radio",value:e,checked:o===e,onChange:()=>Z(e)})]},e))}),(0,a.jsxs)("label",{className:"flex flex-col",children:[(0,a.jsx)("p",{className:"text-text-secondary text-sm font-medium pb-2",children:e("crash.autoCashout")}),(0,a.jsx)("div",{className:"flex w-full items-stretch rounded-lg",children:(0,a.jsx)("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-primary/50 border-none bg-surface h-14 placeholder:text-text-secondary p-4 text-base font-normal leading-normal",placeholder:"1.50x",value:u,onChange:e=>m(e.target.value),type:"text"})})]}),y&&(0,a.jsx)("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-3",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:y})}),k&&(0,a.jsx)("div",{className:"rounded-lg bg-teal-500/20 border border-teal-500/50 p-3",children:(0,a.jsx)("p",{className:"text-sm text-teal-400",children:k})}),(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsx)("span",{className:"text-text-secondary",children:"Balance:"}),(0,a.jsxs)("span",{className:"text-white font-bold",children:[f.toFixed(2)," TL"]})]}),(0,a.jsx)("button",{onClick:D,disabled:N||!s||0>=parseFloat(s)||parseFloat(s)>f,className:"w-full flex min-w-[84px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-14 px-4 bg-primary text-background-dark text-base font-bold leading-normal tracking-wide hover:bg-yellow-400 transition-colors shadow-md shadow-primary/20 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,a.jsx)("span",{className:"truncate",children:N?"Placing Bet...":e("crash.placeBet")})})]})}),(0,a.jsx)("div",{className:"col-span-12 order-4 mt-4",children:(0,a.jsxs)("div",{className:"bg-surface/50 rounded-lg p-4",children:[(0,a.jsx)("h3",{className:"text-text-secondary font-semibold text-lg mb-4",children:e("crash.recentBets")}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,a.jsx)("thead",{className:"text-xs text-text-secondary uppercase border-b border-surface",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3",scope:"col",children:e("crash.player")}),(0,a.jsx)("th",{className:"px-6 py-3",scope:"col",children:e("crash.bet")}),(0,a.jsx)("th",{className:"px-6 py-3",scope:"col",children:e("crash.multiplier")}),(0,a.jsx)("th",{className:"px-6 py-3 text-right",scope:"col",children:e("crash.profit")})]})}),(0,a.jsx)("tbody",{children:S.length>0?S.slice(0,10).map((t,s)=>{let l=t.percentage<0,r=t.amountChange,n=r>=0?"+".concat(r.toFixed(2)," TL"):"".concat(r.toFixed(2)," TL");return(0,a.jsxs)("tr",{className:s<S.length-1?"border-b border-surface/50":"",children:[(0,a.jsx)("th",{className:"px-6 py-4 font-medium text-white whitespace-nowrap",scope:"row",children:(null==h?void 0:h.username)||"You"}),(0,a.jsxs)("td",{className:"px-6 py-4",children:[t.betAmount.toFixed(2)," TL"]}),(0,a.jsx)("td",{className:"px-6 py-4 ".concat(l?"text-red-400":""),children:l?e("crash.crashed"):_(t.percentage)}),(0,a.jsx)("td",{className:"px-6 py-4 text-right ".concat(r>=0?"text-accent-teal":"text-red-400"),children:n})]},t.id||s)}):(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:4,className:"px-6 py-8 text-center text-text-secondary",children:"No betting history yet"})})})]})})]})})]})]})})}function x(){return(0,a.jsx)(c.Z,{children:(0,a.jsx)(o,{})})}},24322:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(57437),l=s(2265),r=s(24033),n=s(87300),c=s(60473);function d(e){let{children:t,requiredRole:s=null,allowedRoles:d=null}=e,i=(0,r.useRouter)(),[o,x]=(0,l.useState)(!1),[u,m]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(()=>{if(!(0,n.$8)()){i.push("/auth/login");return}let e=(0,n.ts)();if(!e){i.push("/auth/login");return}if(s&&e.role!==s||d&&!d.includes(e.role)){i.push((0,n.My)(e.role));return}x(!0),m(!1)})()},[i,s,d]),u)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),(0,a.jsx)("p",{className:"text-white",children:"Loading..."})]})}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{}),t]}):null}}},function(e){e.O(0,[1176,4829,2385,6299,1761,473,2971,4938,1744],function(){return e(e.s=93497)}),_N_E=e.O()}]);