(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1679],{89688:function(e,t,s){Promise.resolve().then(s.bind(s,1506))},1506:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return x}});var r=s(57437),a=s(2265),l=s(61396),i=s.n(l),n=s(24033),o=s(96666),c=s(62385),d=s(66209),m=s(24215);function u(){var e,t,s;let l=(0,n.usePathname)(),[o,u]=(0,a.useState)([]),[x,h]=(0,a.useState)(null),[g,b]=(0,a.useState)(!0),[p,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)(""),[N,w]=(0,a.useState)(""),[y,E]=(0,a.useState)(null),[k,S]=(0,a.useState)("all"),[C,B]=(0,a.useState)("all"),[T,A]=(0,a.useState)("all"),[_,I]=(0,a.useState)(""),[M,R]=(0,a.useState)(1),[D,O]=(0,a.useState)(1),[F,U]=(0,a.useState)(0),[P,z]=(0,a.useState)(!1),[G,Q]=(0,a.useState)(""),[W,H]=(0,a.useState)(!1),[Y,Z]=(0,a.useState)(""),[J,K]=(0,a.useState)(!1),[q,L]=(0,a.useState)("");(0,a.useEffect)(()=>{V(),X()},[k,C,T,_,M]);let V=async()=>{b(!0),j("");try{let e={page:M,limit:20};"all"!==k&&(e.status=k),"all"!==C&&(e.category=C),"all"!==T&&(e.priority=T),_&&(e.search=_);let t=await c.Sb.getAllTickets(e);u(t.data.tickets||[]),O(t.data.totalPages||1),U(t.data.total||0)}catch(s){var e,t;j((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to load tickets"),m.cM.apiError("/support/tickets",s)}finally{b(!1)}},X=async()=>{try{let e=await c.Sb.getTicketStatistics();E(e.data)}catch(e){m.cM.apiError("/support/statistics",e)}},$=async e=>{try{let t=await c.Sb.getTicketById(e);h(t.data)}catch(r){var t,s;j((null===(s=r.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to load ticket details"),m.cM.apiError("/support/tickets/".concat(e),r)}},ee=async()=>{if(x){f(!0),j("");try{await c.Sb.updateTicketStatus(x._id,{status:Y}),w("Ticket status updated successfully!"),H(!1),V(),x&&$(x._id),setTimeout(()=>w(""),3e3)}catch(s){var e,t;j((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to update status"),m.cM.apiError("/support/tickets/".concat(x._id,"/status"),s)}finally{f(!1)}}},et=async()=>{if(x&&G.trim()){f(!0),j("");try{await c.Sb.respondToTicket(x._id,{message:G}),w("Response added successfully!"),z(!1),Q(""),V(),$(x._id),setTimeout(()=>w(""),3e3)}catch(s){var e,t;j((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to add response"),m.cM.apiError("/support/tickets/".concat(x._id,"/respond"),s)}finally{f(!1)}}},es=async()=>{if(x){f(!0),j("");try{await c.Sb.closeTicket(x._id,{resolution:q}),w("Ticket closed successfully!"),K(!1),L(""),V(),$(x._id),setTimeout(()=>w(""),3e3)}catch(s){var e,t;j((null===(t=s.response)||void 0===t?void 0:null===(e=t.data)||void 0===e?void 0:e.message)||"Failed to close ticket"),m.cM.apiError("/support/tickets/".concat(x._id,"/close"),s)}finally{f(!1)}}},er=e=>{switch(e){case"open":return"bg-blue-500/20 text-blue-400";case"in_progress":return"bg-yellow-500/20 text-yellow-400";case"closed":default:return"bg-gray-500/20 text-gray-400";case"resolved":return"bg-green-500/20 text-green-400"}},ea=e=>{switch(e){case"urgent":return"bg-red-500/20 text-red-400";case"high":return"bg-orange-500/20 text-orange-400";case"medium":return"bg-yellow-500/20 text-yellow-400";case"low":return"bg-green-500/20 text-green-400";default:return"bg-gray-500/20 text-gray-400"}},el=e=>({general:"General",deposit:"Deposit",withdrawal:"Withdrawal",betting:"Betting",technical:"Technical",account:"Account",other:"Other"})[e]||e;return(0,r.jsxs)("div",{className:"flex min-h-screen w-full bg-background-dark",children:[(0,r.jsxs)("div",{className:"flex bg-background-dark min-h-screen",children:[(0,r.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex flex-col bg-background-dark border-r border-surface p-4 z-50",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-8 px-2",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-black",children:"casino"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h1",{className:"text-base font-bold text-white",children:"Casino Admin"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Management"})]})]}),(0,r.jsx)("nav",{className:"flex flex-col gap-2",children:[{id:"dashboard",label:"Dashboard Overview",icon:"dashboard",href:"/admin"},{id:"users",label:"User Management",icon:"group",href:"/admin/users"},{id:"kyc",label:"KYC Management",icon:"badge",href:"/admin/kyc"},{id:"games",label:"Game Management",icon:"gamepad",href:"/admin/games"},{id:"betting",label:"Betting Management",icon:"sports_soccer",href:"/admin/betting"},{id:"promotions",label:"Promotions Management",icon:"campaign",href:"/admin/promotions"},{id:"deposits",label:"Deposits",icon:"arrow_downward",href:"/admin/deposits"},{id:"withdrawals",label:"Withdrawals",icon:"arrow_upward",href:"/admin/withdrawals"},{id:"tournaments",label:"Tournaments",icon:"emoji_events",href:"/admin/tournaments"},{id:"content",label:"Content Management",icon:"wysiwyg",href:"/admin/content"}].map(e=>(0,r.jsxs)(i(),{href:e.href,className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ".concat(l===e.href||"dashboard"===e.id&&"/admin"===l?"bg-primary/20 text-primary":"text-gray-300 hover:bg-white/10"),children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:e.icon}),(0,r.jsx)("p",{children:e.label})]},e.id))}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsxs)(i(),{href:"/admin/settings",className:"flex items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-white/10 transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Settings"})]}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/auth/login"},className:"mt-2 flex w-full items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"logout"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Logout"})]}),(0,r.jsxs)("div",{className:"mt-4 flex items-center gap-3 border-t border-white/10 pt-4",children:[(0,r.jsx)("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAeBaCCsTptl1trq-7t7S9yHg2U-j1m_3eQJ6dpRP-IZjxZIDKL6U_iFBKUwWt18HwxovSG8ldqiQCa7NbmEcelTnHQGSwTeQORHSMYn7gGZDs-U982dOqo8QbAOQy7uCWkHjlHxe0m_eXtY2xDHYQYW3KAKuLgW2ZrQlV3yrUSs8tMyu4QaShzTzhohnzpDGQllaTrkdAQoFvcjS9zzhmKAnFrldqCRC16_VfbZD7OYbVjNJOiQ4Gz2-oKSG6XZ4azP4qWoBeSO74")'}}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h2",{className:"text-sm font-medium text-white",children:(()=>{try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);return"".concat(t.firstName||""," ").concat(t.lastName||"").trim()||"Admin User"}}catch(e){}return"Admin User"})()}),(0,r.jsx)("p",{className:"text-xs text-gray-400",children:(()=>{try{let e=localStorage.getItem("user");if(e)return JSON.parse(e).email||"admin@casino.com"}catch(e){}return localStorage.getItem("adminEmail")||"admin@casino.com"})()})]})]})]})]}),(0,r.jsx)("main",{className:"ml-64 flex-1 min-h-screen"})]}),(0,r.jsx)("main",{className:"flex-1 p-6 lg:p-10 bg-background-light dark:bg-background-dark overflow-y-auto",children:(0,r.jsxs)("div",{className:"layout-content-container flex flex-col w-full max-w-7xl mx-auto",children:[(0,r.jsx)("div",{className:"flex flex-wrap justify-between gap-3 mb-6",children:(0,r.jsx)("p",{className:"text-black dark:text-white text-4xl font-black leading-tight tracking-[-0.033em]",children:"Support Tickets"})}),y&&(0,r.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Total"}),(0,r.jsx)("p",{className:"text-white text-2xl font-bold",children:y.total||0})]}),(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Open"}),(0,r.jsx)("p",{className:"text-blue-400 text-2xl font-bold",children:y.open||0})]}),(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"In Progress"}),(0,r.jsx)("p",{className:"text-yellow-400 text-2xl font-bold",children:y.inProgress||0})]}),(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Closed"}),(0,r.jsx)("p",{className:"text-gray-400 text-2xl font-bold",children:y.closed||0})]}),(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-4",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Resolved"}),(0,r.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:y.resolved||0})]})]}),v&&(0,r.jsx)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-400",children:v})}),N&&(0,r.jsx)("div",{className:"mb-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-green-400",children:N})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,r.jsx)("div",{className:"lg:col-span-2",children:(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-6",children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-4 mb-6",children:[(0,r.jsx)("input",{type:"text",placeholder:"Search tickets...",value:_,onChange:e=>{I(e.target.value),R(1)},className:"flex-1 min-w-[200px] h-10 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50"}),(0,r.jsxs)("select",{value:k,onChange:e=>{S(e.target.value),R(1)},className:"h-10 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,r.jsx)("option",{value:"all",className:"bg-[#1E1E2B]",children:"All Status"}),(0,r.jsx)("option",{value:"open",className:"bg-[#1E1E2B]",children:"Open"}),(0,r.jsx)("option",{value:"in_progress",className:"bg-[#1E1E2B]",children:"In Progress"}),(0,r.jsx)("option",{value:"closed",className:"bg-[#1E1E2B]",children:"Closed"}),(0,r.jsx)("option",{value:"resolved",className:"bg-[#1E1E2B]",children:"Resolved"})]}),(0,r.jsxs)("select",{value:C,onChange:e=>{B(e.target.value),R(1)},className:"h-10 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,r.jsx)("option",{value:"all",className:"bg-[#1E1E2B]",children:"All Categories"}),(0,r.jsx)("option",{value:"general",className:"bg-[#1E1E2B]",children:"General"}),(0,r.jsx)("option",{value:"deposit",className:"bg-[#1E1E2B]",children:"Deposit"}),(0,r.jsx)("option",{value:"withdrawal",className:"bg-[#1E1E2B]",children:"Withdrawal"}),(0,r.jsx)("option",{value:"betting",className:"bg-[#1E1E2B]",children:"Betting"}),(0,r.jsx)("option",{value:"technical",className:"bg-[#1E1E2B]",children:"Technical"}),(0,r.jsx)("option",{value:"account",className:"bg-[#1E1E2B]",children:"Account"}),(0,r.jsx)("option",{value:"other",className:"bg-[#1E1E2B]",children:"Other"})]}),(0,r.jsxs)("select",{value:T,onChange:e=>{A(e.target.value),R(1)},className:"h-10 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,r.jsx)("option",{value:"all",className:"bg-[#1E1E2B]",children:"All Priorities"}),(0,r.jsx)("option",{value:"urgent",className:"bg-[#1E1E2B]",children:"Urgent"}),(0,r.jsx)("option",{value:"high",className:"bg-[#1E1E2B]",children:"High"}),(0,r.jsx)("option",{value:"medium",className:"bg-[#1E1E2B]",children:"Medium"}),(0,r.jsx)("option",{value:"low",className:"bg-[#1E1E2B]",children:"Low"})]})]}),g?(0,r.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,r.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"})}):0===o.length?(0,r.jsx)("div",{className:"text-center py-12",children:(0,r.jsx)("p",{className:"text-gray-400",children:"No tickets found"})}):(0,r.jsx)("div",{className:"space-y-2 max-h-[600px] overflow-y-auto",children:o.map(e=>{var t,s;return(0,r.jsxs)("div",{onClick:()=>{h(e),$(e._id)},className:"p-4 rounded-lg border cursor-pointer transition-colors ".concat((null==x?void 0:x._id)===e._id?"bg-[#0dccf2]/20 border-[#0dccf2]":"bg-white/5 border-white/10 hover:bg-white/10"),children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-white font-medium",children:e.subject}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:(null===(t=e.user)||void 0===t?void 0:t.username)||(null===(s=e.user)||void 0===s?void 0:s.email)||"Unknown User"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(er(e.status)),children:e.status.replace("_"," ")}),(0,r.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat(ea(e.priority)),children:e.priority})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[(0,r.jsx)("span",{children:el(e.category)}),(0,r.jsx)("span",{children:(0,d.p6)(e.createdAt)}),e.assignedTo&&(0,r.jsxs)("span",{children:["Assigned to: ",e.assignedTo.username]})]})]},e._id)})}),D>1&&(0,r.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-white/10",children:[(0,r.jsxs)("p",{className:"text-gray-400 text-sm",children:["Showing ",(M-1)*20+1," to ",Math.min(20*M,F)," of ",F," tickets"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("button",{onClick:()=>R(e=>Math.max(1,e-1)),disabled:1===M,className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-colors",children:"Previous"}),(0,r.jsxs)("span",{className:"text-white px-4",children:["Page ",M," of ",D]}),(0,r.jsx)("button",{onClick:()=>R(e=>Math.min(D,e+1)),disabled:M===D,className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-colors",children:"Next"})]})]})]})}),(0,r.jsx)("div",{className:"lg:col-span-1",children:x?(0,r.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,r.jsx)("h3",{className:"text-white text-lg font-semibold",children:"Ticket Details"}),(0,r.jsx)("button",{onClick:()=>h(null),className:"text-gray-400 hover:text-white",children:(0,r.jsx)("span",{className:"material-symbols-outlined",children:"close"})})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Subject"}),(0,r.jsx)("p",{className:"text-white",children:x.subject})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"User"}),(0,r.jsxs)("p",{className:"text-white",children:[null===(e=x.user)||void 0===e?void 0:e.firstName," ",null===(t=x.user)||void 0===t?void 0:t.lastName]}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:null===(s=x.user)||void 0===s?void 0:s.email})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Status"}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat(er(x.status)),children:x.status.replace("_"," ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Priority"}),(0,r.jsx)("span",{className:"inline-block px-2 py-1 rounded text-xs font-medium ".concat(ea(x.priority)),children:x.priority})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Category"}),(0,r.jsx)("p",{className:"text-white",children:el(x.category)})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Created"}),(0,r.jsx)("p",{className:"text-white",children:(0,d.o0)(x.createdAt)})]}),x.assignedTo&&(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Assigned To"}),(0,r.jsx)("p",{className:"text-white",children:x.assignedTo.username})]}),(0,r.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Initial Message"}),(0,r.jsx)("p",{className:"text-white text-sm bg-white/5 p-3 rounded-lg",children:x.message})]}),x.responses&&x.responses.length>1&&(0,r.jsxs)("div",{className:"pt-4 border-t border-white/10",children:[(0,r.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Conversation"}),(0,r.jsx)("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:x.responses.slice(1).map((e,t)=>{var s;return(0,r.jsxs)("div",{className:"bg-white/5 p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,r.jsxs)("p",{className:"text-white text-sm font-medium",children:[(null===(s=e.user)||void 0===s?void 0:s.username)||"User",e.isAdmin&&(0,r.jsx)("span",{className:"ml-2 text-[#0dccf2] text-xs",children:"(Admin)"})]}),(0,r.jsx)("p",{className:"text-gray-400 text-xs",children:(0,d.o0)(e.createdAt)})]}),(0,r.jsx)("p",{className:"text-gray-300 text-sm",children:e.message})]},t)})})]}),(0,r.jsx)("div",{className:"pt-4 border-t border-white/10 space-y-2",children:"closed"!==x.status&&"resolved"!==x.status&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("button",{onClick:()=>{z(!0),Q("")},className:"w-full px-4 py-2 rounded-lg bg-[#0dccf2] text-white font-medium hover:bg-[#0bb5d9] transition-colors",children:"Respond"}),(0,r.jsx)("button",{onClick:()=>{H(!0),Z(x.status)},className:"w-full px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white font-medium hover:bg-white/10 transition-colors",children:"Change Status"}),(0,r.jsx)("button",{onClick:()=>{K(!0),L("")},className:"w-full px-4 py-2 rounded-lg bg-red-500/20 border border-red-500/50 text-red-400 font-medium hover:bg-red-500/30 transition-colors",children:"Close Ticket"})]})})]})]}):(0,r.jsx)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10 p-6",children:(0,r.jsx)("p",{className:"text-gray-400 text-center",children:"Select a ticket to view details"})})})]})]})}),P&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl border border-white/10 p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-white text-xl font-semibold mb-4",children:"Respond to Ticket"}),(0,r.jsx)("textarea",{value:G,onChange:e=>Q(e.target.value),rows:6,className:"w-full rounded-lg bg-white/5 border border-white/10 text-white px-4 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Enter your response..."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:et,disabled:p||!G.trim(),className:"flex-1 px-4 py-2 rounded-lg bg-[#0dccf2] text-white font-medium hover:bg-[#0bb5d9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Sending...":"Send Response"}),(0,r.jsx)("button",{onClick:()=>{z(!1),Q("")},className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white font-medium hover:bg-white/10 transition-colors",children:"Cancel"})]})]})}),W&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl border border-white/10 p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-white text-xl font-semibold mb-4",children:"Change Status"}),(0,r.jsxs)("select",{value:Y,onChange:e=>Z(e.target.value),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 mb-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[(0,r.jsx)("option",{value:"open",className:"bg-[#1E1E2B]",children:"Open"}),(0,r.jsx)("option",{value:"in_progress",className:"bg-[#1E1E2B]",children:"In Progress"}),(0,r.jsx)("option",{value:"resolved",className:"bg-[#1E1E2B]",children:"Resolved"}),(0,r.jsx)("option",{value:"closed",className:"bg-[#1E1E2B]",children:"Closed"})]}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:ee,disabled:p,className:"flex-1 px-4 py-2 rounded-lg bg-[#0dccf2] text-white font-medium hover:bg-[#0bb5d9] transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Updating...":"Update Status"}),(0,r.jsx)("button",{onClick:()=>{H(!1),Z("")},className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white font-medium hover:bg-white/10 transition-colors",children:"Cancel"})]})]})}),J&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl border border-white/10 p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-white text-xl font-semibold mb-4",children:"Close Ticket"}),(0,r.jsx)("textarea",{value:q,onChange:e=>L(e.target.value),rows:4,className:"w-full rounded-lg bg-white/5 border border-white/10 text-white px-4 py-2 mb-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Resolution notes (optional)..."}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("button",{onClick:es,disabled:p,className:"flex-1 px-4 py-2 rounded-lg bg-red-500 text-white font-medium hover:bg-red-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Closing...":"Close Ticket"}),(0,r.jsx)("button",{onClick:()=>{K(!1),L("")},className:"px-4 py-2 rounded-lg bg-white/5 border border-white/10 text-white font-medium hover:bg-white/10 transition-colors",children:"Cancel"})]})]})})]})}function x(){return(0,r.jsx)(o.Z,{children:(0,r.jsx)(u,{})})}},96666:function(e,t,s){"use strict";s.d(t,{Z:function(){return n}});var r=s(57437),a=s(2265),l=s(24033),i=s(87300);function n(e){let{children:t}=e,s=(0,l.useRouter)(),n=(0,l.usePathname)(),[o,c]=(0,a.useState)(!1),[d,m]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(()=>{if(!(0,i.$8)()){let e=encodeURIComponent(n||"/admin");s.push("/auth/login?next=".concat(e));return}if(!(0,i.GJ)()){s.push("/dashboard");return}c(!0),m(!1)})()},[s,n]),d)?(0,r.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background-dark",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"}),(0,r.jsx)("p",{className:"text-white/70 text-sm",children:"Verifying access..."})]})}):o?(0,r.jsx)(r.Fragment,{children:t}):null}},87300:function(e,t,s){"use strict";s.d(t,{$8:function(){return l},GJ:function(){return i},My:function(){return n},kS:function(){return o},ts:function(){return r}});let r=()=>{try{let e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},a=()=>localStorage.getItem("token"),l=()=>!!a(),i=()=>{let e=r();return!!e&&["admin","super_admin","operator"].includes(e.role)},n=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/"}},66209:function(e,t,s){"use strict";s.d(t,{X6:function(){return n},dN:function(){return i},o0:function(){return a},p6:function(){return r}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"N/A";try{let s=new Date(e);if(isNaN(s.getTime()))return"N/A";let r={day:"2-digit",month:"2-digit",year:"numeric",...t};return s.toLocaleDateString("tr-TR",r)}catch(e){return console.error("Error formatting date:",e),"N/A"}},a=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},l=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TRY",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tr-TR";if(null==e)return l(0,t,s);try{let r="string"==typeof e?parseFloat(e):e;if(isNaN(r))return l(0,t,s);return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}catch(s){return console.error("Error formatting currency:",s),"".concat(e," ").concat(t)}},i=e=>l(e,"TRY","tr-TR"),n=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return"+".concat(t.toFixed(1),"%");if(t<0)return"".concat(t.toFixed(1),"%");return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},24215:function(e,t,s){"use strict";s.d(t,{cM:function(){return i}});let r={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class a{formatMessage(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new Date().toISOString(),a="[".concat(r,"] [").concat(e.toUpperCase(),"]");return s?{prefix:a,message:t,data:s}:{prefix:a,message:t}}debug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isDevelopment)return;let s=this.formatMessage(r.DEBUG,e,t);t?console.log(s.prefix,s.message,s.data):console.log(s.prefix,s.message)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.formatMessage(r.INFO,e,t);t?console.info(s.prefix,s.message,s.data):console.info(s.prefix,s.message)}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.formatMessage(r.WARN,e,t);t?console.warn(s.prefix,s.message,s.data):console.warn(s.prefix,s.message)}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=this.formatMessage(r.ERROR,e,t);t?(console.error(s.prefix,s.message,t),this.isDevelopment):console.error(s.prefix,s.message)}apiError(e,t){var s,r,a,l;this.error("API Error [".concat(e,"]"),{endpoint:e,status:null==t?void 0:null===(s=t.response)||void 0===s?void 0:s.status,message:(null==t?void 0:null===(a=t.response)||void 0===a?void 0:null===(r=a.data)||void 0===r?void 0:r.message)||(null==t?void 0:t.message),data:null==t?void 0:null===(l=t.response)||void 0===l?void 0:l.data})}constructor(){this.isDevelopment=!1}}let l=new a,i={debug:(e,t)=>l.debug(e,t),info:(e,t)=>l.info(e,t),warn:(e,t)=>l.warn(e,t),error:(e,t)=>l.error(e,t),apiError:(e,t)=>l.apiError(e,t)}},24033:function(e,t,s){e.exports=s(15313)}},function(e){e.O(0,[1176,4829,2385,2971,4938,1744],function(){return e(e.s=89688)}),_N_E=e.O()}]);