exports.id=8679,exports.ids=[8679],exports.modules={5158:(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var a=r(95344),s=r(3729),i=r(24774),n=r(94913),o=r(36846);function l({userId:e}){let[t,r]=(0,s.useState)([]),[l,c]=(0,s.useState)(0),[d,m]=(0,s.useState)(!1),[u,f]=(0,s.useState)(!1),x=(0,s.useRef)(null);(0,s.useEffect)(()=>{if(e){p(),h();let e=setInterval(()=>{h(),d&&p()},3e4);return()=>clearInterval(e)}},[e,d]),(0,s.useEffect)(()=>{let e=e=>{x.current&&!x.current.contains(e.target)&&m(!1)};return d&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[d]);let p=async()=>{f(!0);try{let e=await i.Lz.getNotifications({limit:10});r(e.data.notifications||[]),c(e.data.unreadCount||0)}catch(e){o.cM.apiError("/notifications",e)}finally{f(!1)}},h=async()=>{try{let e=await i.Lz.getUnreadCount();c(e.data.unreadCount||0)}catch(e){}},g=async e=>{try{await i.Lz.markAsRead(e),r(t=>t.map(t=>t._id===e?{...t,isRead:!0,readAt:new Date}:t)),c(e=>Math.max(0,e-1))}catch(e){o.cM.apiError("/notifications/mark-read",e)}},y=async()=>{try{await i.Lz.markAllAsRead(),r(e=>e.map(e=>({...e,isRead:!0,readAt:new Date}))),c(0)}catch(e){o.cM.apiError("/notifications/mark-all-read",e)}},N=async e=>{try{await i.Lz.deleteNotification(e),r(t=>t.filter(t=>t._id!==e));let a=t.find(t=>t._id===e);a&&!a.isRead&&c(e=>Math.max(0,e-1))}catch(e){o.cM.apiError("/notifications/delete",e)}},b=e=>{e.isRead||g(e._id),e.link&&(window.location.href=e.link)};return(0,a.jsxs)("div",{className:"relative",ref:x,children:[(0,a.jsxs)("button",{onClick:()=>{m(!d),d||p()},className:"relative flex h-10 w-10 cursor-pointer items-center justify-center overflow-hidden rounded-lg bg-background-dark text-gray-300 hover:bg-surface transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined",children:"notifications"}),l>0&&a.jsx("span",{className:"absolute top-1 right-1 flex h-5 w-5 items-center justify-center rounded-full bg-red-500 text-xs font-bold text-white",children:l>9?"9+":l})]}),d&&(0,a.jsxs)("div",{className:"absolute right-0 top-12 z-50 w-96 rounded-lg bg-surface border border-surface shadow-xl",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between border-b border-surface p-4",children:[a.jsx("h3",{className:"text-lg font-bold text-white",children:"Notifications"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[l>0&&a.jsx("button",{onClick:y,className:"text-sm text-primary hover:text-yellow-400 transition-colors",children:"Mark all read"}),a.jsx("button",{onClick:()=>m(!1),className:"text-gray-400 hover:text-white transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-xl",children:"close"})})]})]}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:u?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx("div",{className:"size-6 animate-spin rounded-full border-2 border-primary border-t-transparent"})}):0===t.length?(0,a.jsxs)("div",{className:"p-8 text-center text-gray-400",children:[a.jsx("span",{className:"material-symbols-outlined text-4xl mb-2",children:"notifications_off"}),a.jsx("p",{children:"No notifications"})]}):a.jsx("div",{className:"divide-y divide-surface",children:t.map(e=>a.jsx("div",{className:`p-4 hover:bg-background-dark transition-colors cursor-pointer ${e.isRead?"":"bg-background-dark/50"}`,onClick:()=>b(e),children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`flex-shrink-0 mt-1 ${e.isRead?"text-gray-400":"text-primary"}`,children:a.jsx("span",{className:"material-symbols-outlined",children:"deposit_approved"===e.type||"withdrawal_approved"===e.type?"check_circle":"deposit_rejected"===e.type||"withdrawal_rejected"===e.type?"cancel":"bet_won"===e.type?"emoji_events":"bonus_awarded"===e.type?"card_giftcard":"support_ticket_replied"===e.type?"support_agent":"notifications"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("h4",{className:`text-sm font-medium ${e.isRead?"text-gray-300":"text-white"}`,children:e.title}),!e.isRead&&a.jsx("span",{className:"flex-shrink-0 size-2 rounded-full bg-primary"})]}),a.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:e.message}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:(0,n.o0)(e.createdAt)})]}),a.jsx("button",{onClick:t=>{t.stopPropagation(),N(e._id)},className:"flex-shrink-0 text-gray-500 hover:text-red-400 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-lg",children:"delete"})})]})},e._id))})}),t.length>0&&a.jsx("div",{className:"border-t border-surface p-3 text-center",children:a.jsx("a",{href:"/notifications",className:"text-sm text-primary hover:text-yellow-400 transition-colors",children:"View all notifications"})})]})]})}},22254:(e,t,r)=>{e.exports=r(14767)},2324:(e,t,r)=>{"use strict";r.d(t,{$8:()=>i,GJ:()=>n,My:()=>o,kS:()=>l,ts:()=>a});let a=()=>null,s=()=>null,i=()=>!!s(),n=()=>{let e=a();return!!e&&["admin","super_admin","operator"].includes(e.role)},o=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",l=()=>{}},94913:(e,t,r)=>{"use strict";r.d(t,{X6:()=>o,dN:()=>n,o0:()=>s,p6:()=>a});let a=(e,t={})=>{if(!e)return"N/A";try{let r=new Date(e);if(isNaN(r.getTime()))return"N/A";let a={day:"2-digit",month:"2-digit",year:"numeric",...t};return r.toLocaleDateString("tr-TR",a)}catch(e){return console.error("Error formatting date:",e),"N/A"}},s=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},i=(e,t="TRY",r="tr-TR")=>{if(null==e)return i(0,t,r);try{let a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return i(0,t,r);return new Intl.NumberFormat(r,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(r){return console.error("Error formatting currency:",r),`${e} ${t}`}},n=e=>i(e,"TRY","tr-TR"),o=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return`+${t.toFixed(1)}%`;if(t<0)return`${t.toFixed(1)}%`;return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},36846:(e,t,r)=>{"use strict";r.d(t,{cM:()=>n});let a={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class s{constructor(){this.isDevelopment=!1}formatMessage(e,t,r=null){let a=new Date().toISOString(),s=`[${a}] [${e.toUpperCase()}]`;return r?{prefix:s,message:t,data:r}:{prefix:s,message:t}}debug(e,t=null){if(!this.isDevelopment)return;let r=this.formatMessage(a.DEBUG,e,t);t?console.log(r.prefix,r.message,r.data):console.log(r.prefix,r.message)}info(e,t=null){let r=this.formatMessage(a.INFO,e,t);t?console.info(r.prefix,r.message,r.data):console.info(r.prefix,r.message)}warn(e,t=null){let r=this.formatMessage(a.WARN,e,t);t?console.warn(r.prefix,r.message,r.data):console.warn(r.prefix,r.message)}error(e,t=null){let r=this.formatMessage(a.ERROR,e,t);t?(console.error(r.prefix,r.message,t),this.isDevelopment):console.error(r.prefix,r.message)}apiError(e,t){this.error(`API Error [${e}]`,{endpoint:e,status:t?.response?.status,message:t?.response?.data?.message||t?.message,data:t?.response?.data})}}let i=new s,n={debug:(e,t)=>i.debug(e,t),info:(e,t)=>i.info(e,t),warn:(e,t)=>i.warn(e,t),error:(e,t)=>i.error(e,t),apiError:(e,t)=>i.apiError(e,t)}}};