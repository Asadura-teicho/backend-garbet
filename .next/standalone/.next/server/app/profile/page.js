(()=>{var e={};e.id=4178,e.ids=[4178],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},52012:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=r(50482),s=r(69108),l=r(62563),i=r.n(l),n=r(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["profile",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,31579)),"W:\\garbet\\Frontend\\app\\profile\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,69847)),"W:\\garbet\\Frontend\\app\\layout.js"],error:[()=>Promise.resolve().then(r.bind(r,60826)),"W:\\garbet\\Frontend\\app\\error.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,46178)),"W:\\garbet\\Frontend\\app\\not-found.js"]}],c=["W:\\garbet\\Frontend\\app\\profile\\page.js"],m="/profile/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/profile/page",pathname:"/profile",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},20243:(e,t,r)=>{Promise.resolve().then(r.bind(r,2188))},2188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var a=r(95344),s=r(3729),l=r(22254),i=r(20783),n=r.n(i),o=r(24774),d=r(37249),c=r(34749);function m(){let e=(0,l.useRouter)(),[t,r]=(0,s.useState)(null),[i,d]=(0,s.useState)(!0),[m,u]=(0,s.useState)(""),[x,p]=(0,s.useState)(""),[h,b]=(0,s.useState)({firstName:"",lastName:"",phone:"",iban:"",ibanHolderName:"",bankName:""}),[f,g]=(0,s.useState)("not_submitted"),[N,j]=(0,s.useState)({idFront:null,idBack:null,addressProof:null}),[w,y]=(0,s.useState)(!1),[v,k]=(0,s.useState)(!1);(0,s.useEffect)(()=>{(async()=>{try{u(""),d(!0);let e=null;try{let t=localStorage.getItem("user");t&&(e=JSON.parse(t))}catch(e){}let[t,a]=await Promise.all([o.kv.getMe().catch(t=>{if(e)return{data:e};throw t}),o.uV.getKYC().catch(e=>({data:{kycStatus:"not_submitted",documents:{}}}))]),s=t.data||e;if(!s)throw Error("No user data available");try{localStorage.setItem("user",JSON.stringify(s))}catch(e){}r(s),b({firstName:s.firstName||"",lastName:s.lastName||"",phone:s.phone||"",iban:s.iban||"",ibanHolderName:s.ibanHolderName||"",bankName:s.bankName||""}),a?.data&&(g(a.data.kycStatus||"not_submitted"),j(a.data.documents||{}))}catch(t){if(console.error("Profile fetch error:",t),t.response?.status===401){window.location.href="/auth/login";return}let e=localStorage.getItem("user");if(e)try{let t=JSON.parse(e);r(t),b({firstName:t.firstName||"",lastName:t.lastName||"",phone:t.phone||"",iban:t.iban||"",ibanHolderName:t.ibanHolderName||"",bankName:t.bankName||""}),u("")}catch(e){u("Failed to load profile. Please refresh the page.")}else u(t.response?.data?.message||t.message||"Failed to load profile. Please try again.")}finally{d(!1)}})()},[e]);let P=async e=>{e.preventDefault(),u(""),p(""),d(!0);try{await o.wm.updateProfile(h),p("Profile updated successfully!");let e=await o.kv.getMe();r(e.data)}catch(e){u(e.response?.data?.message||"Failed to update profile")}finally{d(!1)}},q=async e=>{e.preventDefault(),u(""),p(""),y(!0);try{let t=e.currentTarget,r=new FormData,a=t.elements.namedItem("idFront")?.files[0],s=t.elements.namedItem("idBack")?.files[0],l=t.elements.namedItem("addressProof")?.files[0];if(a&&r.append("idFront",a),s&&r.append("idBack",s),l&&r.append("addressProof",l),!a&&!s&&!l){u("Please select at least one document to upload");return}let i=await o.uV.uploadKYCDocuments(r);p("KYC documents uploaded successfully! Status: Pending Review"),g("pending"),j(i.data.documents||{}),t.reset()}catch(e){u(e.response?.data?.message||"Failed to upload KYC documents")}finally{y(!1)}};return i&&!t?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:a.jsx("p",{className:"text-white",children:"Loading..."})}):(0,a.jsxs)("div",{className:"flex min-h-screen bg-background-dark font-display text-[#EAEAEA]",children:[a.jsx(c.Z,{}),a.jsx("div",{className:"flex-1 flex flex-col ml-0 lg:ml-64",children:a.jsx("main",{className:"flex-1 overflow-y-auto",children:a.jsx("div",{className:"container mx-auto px-4 py-8 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"mx-auto max-w-4xl",children:[a.jsx("h1",{className:"text-white text-4xl font-bold mb-2",children:"My Profile"}),a.jsx("p",{className:"text-white/60 mb-8",children:"Manage your account information"}),m&&a.jsx("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:a.jsx("p",{className:"text-sm text-red-400",children:m})}),x&&a.jsx("div",{className:"mb-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:a.jsx("p",{className:"text-sm text-green-400",children:x})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"bg-component-dark rounded-lg p-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Balance"}),(0,a.jsxs)("p",{className:"text-white text-2xl font-bold",children:["₺",t?.balance?.toFixed(2)||"0.00"]})]}),(0,a.jsxs)("div",{className:"bg-component-dark rounded-lg p-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Bonus Balance"}),(0,a.jsxs)("p",{className:"text-white text-2xl font-bold",children:["₺",t?.bonusBalance?.toFixed(2)||"0.00"]})]}),(0,a.jsxs)("div",{className:"bg-component-dark rounded-lg p-6 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-sm mb-1",children:"Status"}),a.jsx("p",{className:"text-white text-2xl font-bold capitalize",children:t?.status||"Active"})]})]}),(0,a.jsxs)("form",{onSubmit:P,className:"bg-component-dark rounded-lg p-6 border border-white/10 space-y-6",children:[a.jsx("h2",{className:"text-white text-xl font-semibold mb-4",children:"Personal Information"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"First Name"}),a.jsx("input",{type:"text",value:h.firstName,onChange:e=>b({...h,firstName:e.target.value}),className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"Last Name"}),a.jsx("input",{type:"text",value:h.lastName,onChange:e=>b({...h,lastName:e.target.value}),className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"Phone"}),a.jsx("input",{type:"tel",value:h.phone,onChange:e=>b({...h,phone:e.target.value}),className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none",required:!0})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"Email"}),a.jsx("input",{type:"email",value:t?.email||"",disabled:!0,className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white/50 cursor-not-allowed"})]})]}),a.jsx("h2",{className:"text-white text-xl font-semibold mt-8 mb-4",children:"Banking Information"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"IBAN"}),a.jsx("input",{type:"text",value:h.iban,onChange:e=>b({...h,iban:e.target.value}),placeholder:"TR330006100519786457841326",className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none"}),a.jsx("p",{className:"text-white/50 text-xs mt-1",children:"Required for withdrawals"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"IBAN Holder Name"}),a.jsx("input",{type:"text",value:h.ibanHolderName,onChange:e=>b({...h,ibanHolderName:e.target.value}),className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2",children:"Bank Name"}),a.jsx("input",{type:"text",value:h.bankName,onChange:e=>b({...h,bankName:e.target.value}),className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] px-4 text-white focus:border-primary focus:outline-none"})]})]}),a.jsx("button",{type:"submit",disabled:i,className:"w-full bg-primary text-black h-12 rounded-lg font-bold hover:bg-yellow-400 transition-colors disabled:opacity-50",children:i?"Saving...":"Save Changes"})]}),(0,a.jsxs)("div",{className:"bg-component-dark rounded-lg p-6 border border-white/10 mt-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-white text-xl font-semibold",children:"KYC Verification"}),a.jsx("p",{className:"text-white/60 text-sm mt-1",children:"Upload your identity documents for verification"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${(e=>{switch(e){case"approved":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"rejected":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}})(f)}`,children:(e=>{switch(e){case"approved":return"Approved";case"pending":return"Pending Review";case"rejected":return"Rejected";default:return"Not Submitted"}})(f)}),a.jsx("button",{onClick:()=>k(!v),className:"text-primary hover:text-yellow-400 transition-colors",children:a.jsx("span",{className:"material-symbols-outlined",children:v?"expand_less":"expand_more"})})]})]}),v&&(0,a.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2 text-sm",children:"ID Front"}),a.jsx("input",{type:"file",name:"idFront",accept:"image/*,.pdf",className:"w-full text-white/70 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-black hover:file:bg-yellow-400 file:cursor-pointer"}),N.idFront&&a.jsx("a",{href:N.idFront,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-xs mt-1 hover:underline",children:"View uploaded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2 text-sm",children:"ID Back"}),a.jsx("input",{type:"file",name:"idBack",accept:"image/*,.pdf",className:"w-full text-white/70 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-black hover:file:bg-yellow-400 file:cursor-pointer"}),N.idBack&&a.jsx("a",{href:N.idBack,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-xs mt-1 hover:underline",children:"View uploaded"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-white mb-2 text-sm",children:"Address Proof"}),a.jsx("input",{type:"file",name:"addressProof",accept:"image/*,.pdf",className:"w-full text-white/70 text-sm file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-black hover:file:bg-yellow-400 file:cursor-pointer"}),N.addressProof&&a.jsx("a",{href:N.addressProof,target:"_blank",rel:"noopener noreferrer",className:"text-primary text-xs mt-1 hover:underline",children:"View uploaded"})]})]}),a.jsx("button",{type:"submit",disabled:w,className:"w-full bg-primary text-black h-12 rounded-lg font-bold hover:bg-yellow-400 transition-colors disabled:opacity-50",children:w?"Uploading...":"Upload KYC Documents"})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex gap-4",children:[a.jsx(n(),{href:"/dashboard",className:"bg-white/10 text-white px-6 py-2 rounded-lg hover:bg-white/20 transition-colors",children:"Back to Dashboard"}),a.jsx(n(),{href:"/withdraw",className:"bg-primary text-black px-6 py-2 rounded-lg font-bold hover:bg-yellow-400 transition-colors",children:"Withdraw Funds"})]})]})})})})]})}function u(){return a.jsx(d.Z,{children:a.jsx(m,{})})}},37249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var a=r(95344),s=r(3729),l=r(22254),i=r(2324),n=r(89873);function o({children:e,requiredRole:t=null,allowedRoles:r=null}){let o=(0,l.useRouter)(),[d,c]=(0,s.useState)(!1),[m,u]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(()=>{if(!(0,i.$8)()){o.push("/auth/login");return}let e=(0,i.ts)();if(!e){o.push("/auth/login");return}if(t&&e.role!==t||r&&!r.includes(e.role)){o.push((0,i.My)(e.role));return}c(!0),u(!1)})()},[o,t,r]),m)?a.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),a.jsx("p",{className:"text-white",children:"Loading..."})]})}):d?(0,a.jsxs)(a.Fragment,{children:[a.jsx(n.Z,{}),e]}):null}},34749:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var a=r(95344),s=r(3729),l=r(20783),i=r.n(l),n=r(22254),o=r(19747),d=r(24774);function c(){let{t:e}=(0,o.$)(),t=(0,n.usePathname)(),[r,l]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{try{let e=await d.kv.getMe();l(e.data)}catch(e){console.error("Failed to fetch user:",e)}})()},[]);let c=[{id:"overview",label:e("dashboard.menuOverview"),icon:"dashboard",href:"/dashboard"},{id:"deposit",label:e("dashboard.menuDeposit"),icon:"account_balance_wallet",href:"/deposit"},{id:"withdraw",label:e("dashboard.menuWithdraw"),icon:"payments",href:"/withdraw"},{id:"transactions",label:"Transactions",icon:"receipt_long",href:"/transactions"},{id:"bet-history",label:e("dashboard.menuBetHistory"),icon:"sports_soccer",href:"/sports"},{id:"game-history",label:e("dashboard.menuGameHistory"),icon:"casino",href:"/slots"},{id:"bonuses",label:e("dashboard.menuBonuses"),icon:"emoji_events",href:"/bonuses"},{id:"settings",label:e("dashboard.menuSettings"),icon:"settings",href:"/profile"}];return(0,a.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex-col bg-background-dark border-r border-surface hidden lg:flex z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-surface",children:[a.jsx("div",{className:"size-8 text-primary",children:(0,a.jsxs)("svg",{fill:"currentColor",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("g",{clipPath:"url(#clip0_6_319)",children:a.jsx("path",{d:"M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z"})}),a.jsx("defs",{children:a.jsx("clipPath",{id:"clip0_6_319",children:a.jsx("rect",{fill:"white",height:"48",width:"48"})})})]})}),a.jsx(i(),{href:"/",children:a.jsx("h2",{className:"text-white text-xl font-bold",children:"Garbet"})})]}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 p-4 overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 p-2 mb-4",children:[a.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAuhux6dpQvPR-RdOeaTaRrgQkV5Eq0ycakfmhZ14nIjMP68y4K7cXqyORaLFyN0P3tEwtd0zZqPHn5rulfpLx7bkvQElTJmDbLf6Z44yXJAlanpWVQqtzFfVEkFtQzWBb5CBABwV-PJyT82HfkwXfNrquaMr92GzVOd2NyezQu1QoSzfn8PkY_ukvA5q1szlNZBBw1SZD83oQj2FTqIMaRH8Js3ufJIyWtGhy9ml7_96FcmxSt35SIW7FQ2v-822p0zaAR0bRc0S8")'}}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h1",{className:"text-white text-base font-medium leading-normal",children:r?.firstName&&r?.lastName?`${r.firstName} ${r.lastName}`:r?.username||"User"}),a.jsx("p",{className:"text-gray-400 text-sm font-normal leading-normal",children:r?.email||"user@email.com"})]})]}),a.jsx("nav",{className:"flex flex-col gap-2",children:c.map(e=>{let r=t===e.href||"/dashboard"===e.href&&t.startsWith("/dashboard");return(0,a.jsxs)(i(),{href:e.href,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r?"bg-surface text-primary":"hover:bg-surface/50 text-white"}`,children:[a.jsx("span",{className:`material-symbols-outlined ${r?"text-blue":"text-white/70"}`,style:r?{fontVariationSettings:"'FILL' 1"}:{},children:e.icon}),a.jsx("p",{className:"text-white text-sm font-medium leading-normal",children:e.label})]},e.id)})})]})]})}},31579:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>l,__esModule:()=>s,default:()=>i});let a=(0,r(86843).createProxy)(String.raw`W:\garbet\Frontend\app\profile\page.js`),{__esModule:s,$$typeof:l}=a,i=a.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[1263,9069,8679,9873],()=>r(52012));module.exports=a})();