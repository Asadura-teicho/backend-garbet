(()=>{var e={};e.id=2449,e.ids=[2449],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},2659:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var s=r(50482),a=r(69108),i=r(62563),l=r.n(i),n=r(68300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);r.d(t,o);let d=["",{children:["deposit",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,40253)),"W:\\garbet\\Frontend\\app\\deposit\\page.js"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,69847)),"W:\\garbet\\Frontend\\app\\layout.js"],error:[()=>Promise.resolve().then(r.bind(r,60826)),"W:\\garbet\\Frontend\\app\\error.js"],"not-found":[()=>Promise.resolve().then(r.bind(r,46178)),"W:\\garbet\\Frontend\\app\\not-found.js"]}],c=["W:\\garbet\\Frontend\\app\\deposit\\page.js"],m="/deposit/page",x={require:r,loadChunk:()=>Promise.resolve()},u=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/deposit/page",pathname:"/deposit",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},38382:(e,t,r)=>{Promise.resolve().then(r.bind(r,62046))},62046:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>m});var s=r(95344),a=r(3729),i=r(22254);r(20783);var l=r(19747),n=r(37249),o=r(24774),d=r(34749);function c(){let{t:e}=(0,l.$)(),t=(0,i.useRouter)(),[r,n]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[x,u]=(0,a.useState)([]),[p,h]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),f=(0,a.useMemo)(()=>x.find(e=>e.name===r||e.id===r)||null,[x,r]),[j,y]=(0,a.useState)(null),[N,v]=(0,a.useState)(!1),[k,w]=(0,a.useState)(""),[q,A]=(0,a.useState)("");(0,a.useEffect)(()=>{let e=async()=>{try{let e=await o.kv.getMe();y(e.data)}catch(e){e?.response?.status===401?t.push("/auth/login"):console.error("Failed to load user",e)}};(async()=>{try{let[e,t,s]=await Promise.allSettled([o.wm.getDepositMethods(),o.wm.getIbanInfo(),o.Sl.getActiveIbans()]);if("fulfilled"===e.status){let t=e.value.data?.methods??e.value.data??[],s=Array.isArray(t)?t:[];if(u(s),s.length>0&&!r){let e=s[0].name||s[0].id;n(e)}}if("fulfilled"===t.status){let e=t.value.data?.ibanInfo??t.value.data??null;h(e)}if("fulfilled"===s.status){let e=s.value.data?.ibans??[];g(Array.isArray(e)?e:[])}}catch(e){console.error("Failed to fetch payment metadata",e)}})(),e()},[]);let _=e=>{if(!e)return!1;let t=(e.id||"").toString().toLowerCase(),r=(e.name||"").toString().toLowerCase();return!!("iban"===t||/iban|havale|eft|bank|bank-transfer|bank transfer/.test(r))},P=e=>{m(e.replace("₺","").replace(",","").trim())},S=async e=>{if(e&&e.preventDefault(),!c||0>=parseFloat(c)||isNaN(parseFloat(c))){w("L\xfctfen ge\xe7erli bir tutar girin");return}if(!f||!r){w("L\xfctfen bir \xf6deme y\xf6ntemi se\xe7in");return}v(!0),w(""),A("");try{let e;e=_(f)?await o.wm.createIbanDeposit({amount:parseFloat(c),description:`${f.name} ile yatırım`,...j?{userId:j._id}:{}}):await o.wm.createDeposit({amount:parseFloat(c),method:f.id||f.name,description:`${f.name} ile yatırım`}),A(e.data?.message||"Yatırım talebi başarıyla oluşturuldu!"),m("0.00");try{let e=await o.kv.getMe();y(e.data)}catch(e){}}catch(e){console.error("Deposit error:",e),w(e.response?.data?.message||"Yatırım talebi oluşturulamadı")}finally{v(!1)}};return(0,s.jsxs)("div",{className:"flex min-h-screen bg-background-light dark:bg-background-dark font-display text-[#EAEAEA]",children:[s.jsx(d.Z,{}),s.jsx("div",{className:"flex-1 flex flex-col ml-0 lg:ml-64",children:s.jsx("div",{className:"flex-1 overflow-y-auto p-4 sm:p-6 lg:p-8",children:s.jsx("div",{className:"max-w-6xl mx-auto",children:(0,s.jsxs)("main",{className:"flex-grow pt-8 sm:pt-12 pb-12",children:[s.jsx("div",{className:"flex flex-wrap justify-between gap-4 p-4",children:(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[s.jsx("p",{className:"text-white text-3xl sm:text-4xl font-black leading-tight tracking-[-0.033em]",children:e("common.depositTitle")}),s.jsx("p",{className:"text-text-dark text-base font-normal leading-normal",children:e("common.depositInstructions")})]})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8 p-4",children:[(0,s.jsxs)("div",{className:"lg:col-span-2",children:[s.jsx("h2",{className:"text-white text-xl sm:text-[22px] font-bold leading-tight tracking-[-0.015em] mb-4",children:e("common.paymentMethods")}),0===x.length?s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-text-dark",children:"\xd6deme y\xf6ntemleri y\xfckleniyor..."})}):s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-4",children:x.map(t=>(0,s.jsxs)("div",{onClick:()=>n(t.name||t.id),className:`flex flex-col gap-3 p-3 rounded-lg bg-surface-dark border-2 transition-all duration-300 cursor-pointer ${r===t.name||r===t.id?"border-primary shadow-glow-primary":"border-border-dark hover:border-primary/50"}`,children:[t.image&&s.jsx("div",{className:"w-full bg-center bg-no-repeat aspect-video bg-cover rounded-lg bg-white p-2",children:s.jsx("img",{alt:t.name||"Payment method",className:"w-full h-full object-contain",src:t.image,onError:e=>{e.target.style.display="none"}})}),(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-white text-base font-medium leading-normal",children:t.name||t.id}),(0,s.jsxs)("p",{className:"text-text-dark text-sm font-normal leading-normal",children:[t.min&&`${e("common.min")||"Min"}: ${t.min}`,t.min&&t.max&&" / ",t.max&&`${e("common.max")||"Max"}: ${t.max}`]})]})]},t.id||t.name))})]}),s.jsx("div",{className:"lg:col-span-1",children:(0,s.jsxs)("div",{className:"bg-surface-dark rounded-xl p-6 border border-border-dark h-full flex flex-col",children:[s.jsx("h2",{className:"text-white text-xl sm:text-[22px] font-bold leading-tight tracking-[-0.015em] mb-4",children:e("common.depositDetails")}),f?(0,s.jsxs)("div",{className:"flex items-center gap-4 bg-background-dark px-4 py-3 min-h-14 justify-between rounded-lg border border-border-dark",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[f.image&&s.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-lg size-10 bg-white p-1",children:s.jsx("img",{alt:f.name,className:"w-full h-full object-contain",src:f.image})}),s.jsx("p",{className:"text-white text-base font-normal leading-normal flex-1 truncate",children:f.name||r})]}),s.jsx("div",{className:"shrink-0",children:s.jsx("button",{onClick:()=>n(""),type:"button",className:"text-primary text-sm font-medium leading-normal hover:underline",children:e("common.change")})})]}):s.jsx("div",{className:"flex items-center justify-center gap-4 bg-background-dark px-4 py-3 min-h-14 rounded-lg border border-border-dark",children:s.jsx("p",{className:"text-text-dark text-sm",children:"L\xfctfen bir \xf6deme y\xf6ntemi se\xe7in"})}),k&&s.jsx("div",{className:"mt-4 rounded-lg bg-red-500/20 border border-red-500/50 p-3",children:s.jsx("p",{className:"text-sm text-red-400",children:k})}),q&&s.jsx("div",{className:"mt-4 rounded-lg bg-green-500/20 border border-green-500/50 p-3",children:s.jsx("p",{className:"text-sm text-green-400",children:q})}),(0,s.jsxs)("form",{onSubmit:S,className:"mt-6 flex-grow flex flex-col justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-white mb-2",htmlFor:"amount",children:e("common.amount")||"Amount"}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx("input",{className:"w-full h-12 rounded-lg border border-[#3a3a3a] bg-[#2a2a2a] text-white pl-12 pr-4 text-base font-normal leading-normal placeholder:text-gray-500 transition-all focus:border-primary focus:bg-[#2f2f2f] focus:outline-none focus:ring-2 focus:ring-primary/20",id:"amount",name:"amount",placeholder:"0.00",type:"number",min:"0",step:"0.01",value:c,onChange:e=>m(e.target.value),"aria-required":"true",required:!0}),s.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-base text-gray-500",children:"₺"})]})]}),s.jsx("div",{className:"flex gap-2 mb-4",children:["100₺","250₺","500₺"].map(e=>s.jsx("button",{onClick:()=>P(e),type:"button",className:"flex-1 text-sm bg-background-dark rounded-md py-2 border border-border-dark hover:border-primary/50 transition-colors text-white",children:e},e))}),s.jsx("p",{className:"text-sm font-medium text-text-light mb-2",children:e("common.instructions")||"Instructions"}),s.jsx("p",{className:"text-sm text-text-dark mb-4 bg-background-dark p-3 rounded-lg border border-border-dark",children:e("common.depositInstructionText")||"Please follow the instructions for your selected payment method."}),_(f)&&s.jsx("div",{className:"mb-4",children:b.length>0?(0,s.jsxs)("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-white font-medium text-sm mb-2",children:"Banka Hesapları"}),b.map((e,t)=>s.jsx("div",{className:"p-4 rounded-lg border border-border-dark bg-[#0b0b0b] text-sm",children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-dark",children:"Banka:"}),s.jsx("p",{className:"text-white font-medium",children:e.bankName})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[s.jsx("p",{className:"text-text-dark",children:"Hesap Sahibi:"}),s.jsx("p",{className:"text-white font-medium",children:e.accountHolder})]}),(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("p",{className:"text-text-dark shrink-0",children:"IBAN:"}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1 justify-end",children:[s.jsx("p",{className:"text-white font-mono text-xs break-all text-right",children:e.ibanNumber}),s.jsx("button",{type:"button",onClick:async()=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e.ibanNumber),A("IBAN kopyalandı!"),setTimeout(()=>A(""),3e3);else{let t=document.createElement("textarea");t.value=e.ibanNumber,t.style.position="fixed",t.style.left="-999999px",document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),A("IBAN kopyalandı!"),setTimeout(()=>A(""),3e3)}}catch(e){console.error("Failed to copy IBAN:",e),w("IBAN kopyalanamadı. L\xfctfen manuel olarak kopyalayın."),setTimeout(()=>w(""),3e3)}},className:"shrink-0 text-primary hover:text-primary/80 transition-colors",title:"IBAN'ı Kopyala",children:s.jsx("span",{className:"material-symbols-outlined text-lg",children:"content_copy"})})]})]})]})},t)),s.jsx("p",{className:"text-xs text-text-dark mt-3",children:"L\xfctfen yatırım yaparken yukarıdaki hesaplardan birini kullanın. Yatırım işleminiz onaylandıktan sonra bakiyenize eklenecektir."})]}):p?(0,s.jsxs)("div",{className:"p-3 rounded-lg border border-border-dark bg-[#0b0b0b] text-sm text-text-dark",children:[s.jsx("p",{className:"text-white font-medium",children:"IBAN Bilgileri"}),(0,s.jsxs)("p",{className:"mt-1",children:["Hesap Sahibi: ",s.jsx("span",{className:"text-white",children:p.accountHolder})]}),(0,s.jsxs)("p",{children:["Bank: ",s.jsx("span",{className:"text-white",children:p.bankName})]}),(0,s.jsxs)("p",{children:["IBAN: ",s.jsx("span",{className:"text-white",children:p.iban})]}),p.instructions&&Array.isArray(p.instructions)&&s.jsx("ul",{className:"mt-2 list-disc list-inside text-xs text-text-dark",children:p.instructions.map((e,t)=>s.jsx("li",{children:e},t))})]}):(0,s.jsxs)("div",{className:"p-3 rounded-lg border border-border-dark bg-[#0b0b0b] text-sm text-text-dark",children:[s.jsx("p",{className:"text-white font-medium",children:"Banka Hesabı Bilgileri"}),s.jsx("p",{className:"mt-2 text-xs",children:"Banka hesap bilgileri y\xfckleniyor..."})]})})]}),s.jsx("button",{type:"submit",disabled:N||!r||!f,className:"w-full mt-6 bg-primary text-black font-bold py-4 rounded-lg text-base hover:brightness-110 transition-all duration-300 shadow-glow-primary-lg disabled:opacity-50 disabled:cursor-not-allowed",children:N?e("common.processing")||"İşleniyor...":e("common.completeDeposit")||"Yatırım Yap"})]})]})})]})]})})})})]})}function m(){return s.jsx(n.Z,{children:s.jsx(c,{})})}},37249:(e,t,r)=>{"use strict";r.d(t,{Z:()=>o});var s=r(95344),a=r(3729),i=r(22254),l=r(2324),n=r(89873);function o({children:e,requiredRole:t=null,allowedRoles:r=null}){let o=(0,i.useRouter)(),[d,c]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{(()=>{if(!(0,l.$8)()){o.push("/auth/login");return}let e=(0,l.ts)();if(!e){o.push("/auth/login");return}if(t&&e.role!==t||r&&!r.includes(e.role)){o.push((0,l.My)(e.role));return}c(!0),x(!1)})()},[o,t,r]),m)?s.jsx("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:(0,s.jsxs)("div",{className:"text-center",children:[s.jsx("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),s.jsx("p",{className:"text-white",children:"Loading..."})]})}):d?(0,s.jsxs)(s.Fragment,{children:[s.jsx(n.Z,{}),e]}):null}},34749:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(95344),a=r(3729),i=r(20783),l=r.n(i),n=r(22254),o=r(19747),d=r(24774);function c(){let{t:e}=(0,o.$)(),t=(0,n.usePathname)(),[r,i]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{try{let e=await d.kv.getMe();i(e.data)}catch(e){console.error("Failed to fetch user:",e)}})()},[]);let c=[{id:"overview",label:e("dashboard.menuOverview"),icon:"dashboard",href:"/dashboard"},{id:"deposit",label:e("dashboard.menuDeposit"),icon:"account_balance_wallet",href:"/deposit"},{id:"withdraw",label:e("dashboard.menuWithdraw"),icon:"payments",href:"/withdraw"},{id:"transactions",label:"Transactions",icon:"receipt_long",href:"/transactions"},{id:"bet-history",label:e("dashboard.menuBetHistory"),icon:"sports_soccer",href:"/sports"},{id:"game-history",label:e("dashboard.menuGameHistory"),icon:"casino",href:"/slots"},{id:"bonuses",label:e("dashboard.menuBonuses"),icon:"emoji_events",href:"/bonuses"},{id:"settings",label:e("dashboard.menuSettings"),icon:"settings",href:"/profile"}];return(0,s.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex-col bg-background-dark border-r border-surface hidden lg:flex z-50",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 px-6 py-5 border-b border-surface",children:[s.jsx("div",{className:"size-8 text-primary",children:(0,s.jsxs)("svg",{fill:"currentColor",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("g",{clipPath:"url(#clip0_6_319)",children:s.jsx("path",{d:"M8.57829 8.57829C5.52816 11.6284 3.451 15.5145 2.60947 19.7452C1.76794 23.9758 2.19984 28.361 3.85056 32.3462C5.50128 36.3314 8.29667 39.7376 11.8832 42.134C15.4698 44.5305 19.6865 45.8096 24 45.8096C28.3135 45.8096 32.5302 44.5305 36.1168 42.134C39.7033 39.7375 42.4987 36.3314 44.1494 32.3462C45.8002 28.361 46.2321 23.9758 45.3905 19.7452C44.549 15.5145 42.4718 11.6284 39.4217 8.57829L24 24L8.57829 8.57829Z"})}),s.jsx("defs",{children:s.jsx("clipPath",{id:"clip0_6_319",children:s.jsx("rect",{fill:"white",height:"48",width:"48"})})})]})}),s.jsx(l(),{href:"/",children:s.jsx("h2",{className:"text-white text-xl font-bold",children:"Garbet"})})]}),(0,s.jsxs)("div",{className:"flex flex-col flex-1 p-4 overflow-y-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 p-2 mb-4",children:[s.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAuhux6dpQvPR-RdOeaTaRrgQkV5Eq0ycakfmhZ14nIjMP68y4K7cXqyORaLFyN0P3tEwtd0zZqPHn5rulfpLx7bkvQElTJmDbLf6Z44yXJAlanpWVQqtzFfVEkFtQzWBb5CBABwV-PJyT82HfkwXfNrquaMr92GzVOd2NyezQu1QoSzfn8PkY_ukvA5q1szlNZBBw1SZD83oQj2FTqIMaRH8Js3ufJIyWtGhy9ml7_96FcmxSt35SIW7FQ2v-822p0zaAR0bRc0S8")'}}),(0,s.jsxs)("div",{className:"flex flex-col",children:[s.jsx("h1",{className:"text-white text-base font-medium leading-normal",children:r?.firstName&&r?.lastName?`${r.firstName} ${r.lastName}`:r?.username||"User"}),s.jsx("p",{className:"text-gray-400 text-sm font-normal leading-normal",children:r?.email||"user@email.com"})]})]}),s.jsx("nav",{className:"flex flex-col gap-2",children:c.map(e=>{let r=t===e.href||"/dashboard"===e.href&&t.startsWith("/dashboard");return(0,s.jsxs)(l(),{href:e.href,className:`flex items-center gap-3 px-3 py-2.5 rounded-lg transition-colors ${r?"bg-surface text-primary":"hover:bg-surface/50 text-white"}`,children:[s.jsx("span",{className:`material-symbols-outlined ${r?"text-blue":"text-white/70"}`,style:r?{fontVariationSettings:"'FILL' 1"}:{},children:e.icon}),s.jsx("p",{className:"text-white text-sm font-medium leading-normal",children:e.label})]},e.id)})})]})]})}},40253:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>i,__esModule:()=>a,default:()=>l});let s=(0,r(86843).createProxy)(String.raw`W:\garbet\Frontend\app\deposit\page.js`),{__esModule:a,$$typeof:i}=s,l=s.default}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1263,9069,8679,9873],()=>r(2659));module.exports=s})();