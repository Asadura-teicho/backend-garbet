(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7003],{92260:function(e,t,s){Promise.resolve().then(s.bind(s,85604))},85604:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return m}});var a=s(57437),r=s(2265),l=s(24033);s(61396);var n=s(60473),d=s(96299),i=s(24322),c=s(62385),o=s(24215),x=s(66209);function u(){var e,t,s,i,u,m,p,h;let{t:g}=(0,d.$)();(0,l.useRouter)();let[b,f]=(0,r.useState)([]),[y,j]=(0,r.useState)(!0),[v,N]=(0,r.useState)(""),[w,k]=(0,r.useState)(1),[D,T]=(0,r.useState)(1),[C,R]=(0,r.useState)({resultType:"all",startDate:"",endDate:""}),[S,L]=(0,r.useState)(null);(0,r.useEffect)(()=>{A(),B()},[w,C]);let A=async()=>{var e,t,s;j(!0),N("");try{let t={page:w,limit:20,sortBy:"createdAt",sortOrder:"desc"};"all"!==C.resultType&&(t.resultType=C.resultType),C.startDate&&(t.startDate=C.startDate),C.endDate&&(t.endDate=C.endDate);let s=await c.jZ.getBetRoundHistory(t);f(s.data.betRounds||[]),T((null===(e=s.data.pagination)||void 0===e?void 0:e.totalPages)||1)}catch(e){N((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to load betting history"),o.cM.apiError("/bet-rounds/history",e)}finally{j(!1)}},B=async()=>{try{let e={};C.startDate&&(e.startDate=C.startDate),C.endDate&&(e.endDate=C.endDate);let t=await c.jZ.getBetRoundStatistics(e);L(t.data)}catch(e){o.cM.apiError("/bet-rounds/statistics",e)}},E=(e,t)=>{R(s=>({...s,[e]:t})),k(1)},F=e=>{switch(e){case"win":return"bg-teal-500/20 text-teal-400";case"loss":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}};return(0,a.jsxs)("div",{className:"relative flex min-h-screen w-full flex-col group/design-root overflow-x-hidden",children:[(0,a.jsx)(n.Z,{}),(0,a.jsxs)("main",{className:"flex-grow p-4 lg:p-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h1",{className:"text-white text-3xl md:text-4xl font-black tracking-tight mb-2",children:"Betting Rounds History"}),(0,a.jsx)("p",{className:"text-gray-400 text-base",children:"View your betting round history and statistics"})]}),S&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Total Rounds"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-white",children:(null===(e=S.overview)||void 0===e?void 0:e.totalRounds)||0})]}),(0,a.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Win Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-teal-400",children:[(null===(t=S.overview)||void 0===t?void 0:t.winRate)||0,"%"]})]}),(0,a.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Total Bet Amount"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-white",children:[(null===(i=S.financial)||void 0===i?void 0:null===(s=i.totalBetAmount)||void 0===s?void 0:s.toFixed(2))||"0.00"," TL"]})]}),(0,a.jsxs)("div",{className:"bg-surface rounded-lg p-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Profit/Loss"}),(0,a.jsxs)("p",{className:"text-2xl font-bold ".concat(((null===(u=S.financial)||void 0===u?void 0:u.profitLoss)||0)>=0?"text-teal-400":"text-red-400"),children:[((null===(m=S.financial)||void 0===m?void 0:m.profitLoss)||0)>=0?"+":"",(null===(h=S.financial)||void 0===h?void 0:null===(p=h.profitLoss)||void 0===p?void 0:p.toFixed(2))||"0.00"," TL"]})]})]}),(0,a.jsx)("div",{className:"bg-surface rounded-lg p-4 mb-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Result Type"}),(0,a.jsxs)("select",{value:C.resultType,onChange:e=>E("resultType",e.target.value),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50",children:[(0,a.jsx)("option",{value:"all",children:"All"}),(0,a.jsx)("option",{value:"win",children:"Win"}),(0,a.jsx)("option",{value:"loss",children:"Loss"}),(0,a.jsx)("option",{value:"neutral",children:"Neutral"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Start Date"}),(0,a.jsx)("input",{type:"date",value:C.startDate,onChange:e=>E("startDate",e.target.value),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"End Date"}),(0,a.jsx)("input",{type:"date",value:C.endDate,onChange:e=>E("endDate",e.target.value),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,a.jsx)("div",{className:"flex items-end",children:(0,a.jsx)("button",{onClick:()=>{R({resultType:"all",startDate:"",endDate:""}),k(1)},className:"w-full rounded-lg bg-gray-600 hover:bg-gray-700 px-4 py-2 text-white text-sm font-medium transition-colors",children:"Clear Filters"})})]})}),v&&(0,a.jsx)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:v})}),(0,a.jsxs)("div",{className:"bg-surface rounded-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm",children:[(0,a.jsx)("thead",{className:"bg-background-dark border-b border-surface",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Round #"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Bet Amount"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Percentage"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Result"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Amount Change"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Balance After"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Date"})]})}),(0,a.jsx)("tbody",{className:"divide-y divide-surface",children:y?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"Loading..."})}):0===b.length?(0,a.jsx)("tr",{children:(0,a.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"No betting rounds found"})}):b.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-background-dark/50 transition-colors",children:[(0,a.jsxs)("td",{className:"px-6 py-4 font-medium text-white",children:["#",e.roundNumber]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-white",children:[e.betAmount.toFixed(2)," TL"]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-white",children:[e.percentage>0?"+":"",e.percentage,"%"]}),(0,a.jsx)("td",{className:"px-6 py-4",children:(0,a.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat(F(e.resultType)),children:e.resultType.charAt(0).toUpperCase()+e.resultType.slice(1)})}),(0,a.jsxs)("td",{className:"px-6 py-4 font-medium ".concat(e.amountChange>=0?"text-teal-400":"text-red-400"),children:[e.amountChange>=0?"+":"",e.amountChange.toFixed(2)," TL"]}),(0,a.jsxs)("td",{className:"px-6 py-4 text-white",children:[e.balanceAfter.toFixed(2)," TL"]}),(0,a.jsx)("td",{className:"px-6 py-4 text-gray-400",children:(0,x.p6)(e.createdAt)})]},e.id))})]})}),D>1&&(0,a.jsxs)("div",{className:"px-6 py-4 border-t border-surface flex items-center justify-between",children:[(0,a.jsx)("button",{onClick:()=>k(e=>Math.max(1,e-1)),disabled:1===w,className:"px-4 py-2 rounded-lg bg-background-dark text-white hover:bg-background-dark/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,a.jsxs)("span",{className:"text-gray-400",children:["Page ",w," of ",D]}),(0,a.jsx)("button",{onClick:()=>k(e=>Math.min(D,e+1)),disabled:w===D,className:"px-4 py-2 rounded-lg bg-background-dark text-white hover:bg-background-dark/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]})}function m(){return(0,a.jsx)(i.Z,{children:(0,a.jsx)(u,{})})}},24322:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var a=s(57437),r=s(2265),l=s(24033),n=s(87300),d=s(60473);function i(e){let{children:t,requiredRole:s=null,allowedRoles:i=null}=e,c=(0,l.useRouter)(),[o,x]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(()=>{if(!(0,n.$8)()){c.push("/auth/login");return}let e=(0,n.ts)();if(!e){c.push("/auth/login");return}if(s&&e.role!==s||i&&!i.includes(e.role)){c.push((0,n.My)(e.role));return}x(!0),m(!1)})()},[c,s,i]),u)?(0,a.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-background-dark",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent"}),(0,a.jsx)("p",{className:"text-white",children:"Loading..."})]})}):o?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.Z,{}),t]}):null}}},function(e){e.O(0,[1176,4829,2385,6299,1761,473,2971,4938,1744],function(){return e(e.s=92260)}),_N_E=e.O()}]);