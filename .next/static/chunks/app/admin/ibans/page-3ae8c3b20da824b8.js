(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7299],{35739:function(e,t,a){Promise.resolve().then(a.bind(a,98680))},98680:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return x}});var r=a(57437),s=a(2265),n=a(24033),i=a(61396),l=a.n(i),o=a(96666),c=a(62385),d=a(24215),u=a(66209);function m(){(0,n.useRouter)();let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),[o,m]=(0,s.useState)(""),[x,g]=(0,s.useState)(""),[h,p]=(0,s.useState)(1),[b,f]=(0,s.useState)(1),[N,v]=(0,s.useState)("all"),[y,j]=(0,s.useState)(!1),[k,w]=(0,s.useState)(null),[A,I]=(0,s.useState)({bankName:"",accountHolder:"",ibanNumber:"",isActive:!0});(0,s.useEffect)(()=>{S()},[h,N]);let S=async()=>{var e,a,r;i(!0),m("");try{let a={page:h,limit:20};"all"!==N&&(a.isActive="active"===N);let r=await c.X$.getIbans(a);t(r.data.ibans||[]),f((null===(e=r.data.pagination)||void 0===e?void 0:e.totalPages)||1)}catch(e){m((null===(r=e.response)||void 0===r?void 0:null===(a=r.data)||void 0===a?void 0:a.message)||"Failed to load IBANs"),d.cM.apiError("/ibans",e)}finally{i(!1)}},B=e=>{w(e),I({bankName:e.bankName,accountHolder:e.accountHolder,ibanNumber:e.ibanNumber,isActive:e.isActive}),j(!0)},E=async e=>{e.preventDefault(),m(""),g("");try{k?(await c.X$.updateIban(k.id,A),g("IBAN updated successfully")):(await c.X$.createIban(A),g("IBAN created successfully")),j(!1),S(),setTimeout(()=>g(""),3e3)}catch(e){var t,a;m((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to save IBAN"),d.cM.apiError(k?"/ibans/update":"/ibans/create",e)}},C=async e=>{if(confirm("Are you sure you want to delete this IBAN?"))try{await c.X$.deleteIban(e),g("IBAN deleted successfully"),S(),setTimeout(()=>g(""),3e3)}catch(e){var t,a;m((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to delete IBAN"),d.cM.apiError("/ibans/delete",e)}},D=async e=>{try{await c.X$.toggleIbanStatus(e),g("IBAN status updated"),S(),setTimeout(()=>g(""),3e3)}catch(e){var t,a;m((null===(a=e.response)||void 0===a?void 0:null===(t=a.data)||void 0===t?void 0:t.message)||"Failed to toggle IBAN status"),d.cM.apiError("/ibans/toggle",e)}};return(0,r.jsxs)("div",{className:"flex h-screen bg-background-light dark:bg-background-dark font-display",children:[(0,r.jsxs)("aside",{className:"flex w-64 flex-col bg-background-dark border-r border-surface p-4",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3 mb-8 px-2",children:[(0,r.jsx)("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-black",children:"casino"})}),(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("h1",{className:"text-base font-bold text-white",children:"Casino Admin"}),(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Management"})]})]}),(0,r.jsx)("nav",{className:"flex flex-col gap-2",children:[{id:"dashboard",label:"Dashboard",icon:"dashboard",href:"/admin"},{id:"users",label:"Users",icon:"group",href:"/admin/users"},{id:"games",label:"Games",icon:"casino",href:"/admin/games"},{id:"deposits",label:"Deposits",icon:"arrow_downward",href:"/admin/deposits"},{id:"withdrawals",label:"Withdrawals",icon:"arrow_upward",href:"/admin/withdrawals"},{id:"tournaments",label:"Tournaments",icon:"emoji_events",href:"/admin/tournaments"},{id:"ibans",label:"IBAN Management",icon:"account_balance",href:"/admin/ibans"},{id:"settings",label:"Settings",icon:"settings",href:"/admin/settings"}].map(e=>(0,r.jsxs)(l(),{href:e.href,className:"flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ".concat("/admin/ibans"===e.href?"bg-primary/20 text-primary":"text-gray-300 hover:bg-white/10"),children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:e.icon}),(0,r.jsx)("p",{children:e.label})]},e.id))}),(0,r.jsxs)("div",{className:"mt-auto",children:[(0,r.jsxs)(l(),{href:"/admin/settings",className:"flex items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-white/10 transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"settings"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Settings"})]}),(0,r.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/auth/login"},className:"mt-2 flex w-full items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"logout"}),(0,r.jsx)("p",{className:"text-sm font-medium",children:"Logout"})]})]})]}),(0,r.jsxs)("main",{className:"flex-1 overflow-y-auto bg-background-light dark:bg-background-dark",children:[(0,r.jsx)("header",{className:"sticky top-0 z-10 flex h-16 items-center justify-between border-b border-surface bg-background-dark/80 px-4 sm:px-6 lg:px-8 backdrop-blur-sm",children:(0,r.jsx)("div",{className:"flex items-center gap-8",children:(0,r.jsx)("h1",{className:"text-white text-xl font-bold",children:"IBAN Management"})})}),(0,r.jsxs)("div",{className:"p-4 sm:p-6 lg:p-8",children:[o&&(0,r.jsx)("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-red-400",children:o})}),x&&(0,r.jsx)("div",{className:"mb-4 rounded-lg bg-teal-500/20 border border-teal-500/50 p-4",children:(0,r.jsx)("p",{className:"text-sm text-teal-400",children:x})}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-white text-2xl font-bold",children:"IBANs"}),(0,r.jsx)("p",{className:"text-gray-400 text-sm",children:"Manage bank account IBANs"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsxs)("select",{value:N,onChange:e=>{v(e.target.value),p(1)},className:"rounded-lg bg-surface border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50",children:[(0,r.jsx)("option",{value:"all",children:"All IBANs"}),(0,r.jsx)("option",{value:"active",children:"Active Only"}),(0,r.jsx)("option",{value:"inactive",children:"Inactive Only"})]}),(0,r.jsxs)("button",{onClick:()=>{w(null),I({bankName:"",accountHolder:"",ibanNumber:"",isActive:!0}),j(!0)},className:"flex items-center gap-2 rounded-lg bg-primary text-background-dark px-4 py-2 font-bold hover:bg-yellow-400 transition-colors",children:[(0,r.jsx)("span",{className:"material-symbols-outlined",children:"add"}),"Add IBAN"]})]})]}),(0,r.jsxs)("div",{className:"bg-surface rounded-lg overflow-hidden",children:[(0,r.jsx)("div",{className:"overflow-x-auto",children:(0,r.jsxs)("table",{className:"w-full text-sm",children:[(0,r.jsx)("thead",{className:"bg-background-dark border-b border-surface",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Bank Name"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Account Holder"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"IBAN Number"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Status"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Added By"}),(0,r.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-400 uppercase",children:"Created"}),(0,r.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-400 uppercase",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"divide-y divide-surface",children:a?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"Loading..."})}):0===e.length?(0,r.jsx)("tr",{children:(0,r.jsx)("td",{colSpan:7,className:"px-6 py-8 text-center text-gray-400",children:"No IBANs found"})}):e.map(e=>{var t,a;return(0,r.jsxs)("tr",{className:"hover:bg-background-dark/50 transition-colors",children:[(0,r.jsx)("td",{className:"px-6 py-4 font-medium text-white",children:e.bankName}),(0,r.jsx)("td",{className:"px-6 py-4 text-white",children:e.accountHolder}),(0,r.jsx)("td",{className:"px-6 py-4 text-white font-mono",children:e.ibanNumber}),(0,r.jsx)("td",{className:"px-6 py-4",children:(0,r.jsx)("span",{className:"inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium ".concat(e.isActive?"bg-teal-500/20 text-teal-400":"bg-gray-500/20 text-gray-400"),children:e.isActive?"Active":"Inactive"})}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-400",children:(null===(t=e.addedBy)||void 0===t?void 0:t.name)||(null===(a=e.addedBy)||void 0===a?void 0:a.email)||"N/A"}),(0,r.jsx)("td",{className:"px-6 py-4 text-gray-400",children:(0,u.p6)(e.createdAt)}),(0,r.jsx)("td",{className:"px-6 py-4 text-right",children:(0,r.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,r.jsx)("button",{onClick:()=>D(e.id),className:"p-2 rounded-lg hover:bg-background-dark transition-colors",title:e.isActive?"Deactivate":"Activate",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-lg text-gray-400 hover:text-white",children:e.isActive?"toggle_on":"toggle_off"})}),(0,r.jsx)("button",{onClick:()=>B(e),className:"p-2 rounded-lg hover:bg-background-dark transition-colors",title:"Edit",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-lg text-gray-400 hover:text-blue-400",children:"edit"})}),(0,r.jsx)("button",{onClick:()=>C(e.id),className:"p-2 rounded-lg hover:bg-background-dark transition-colors",title:"Delete",children:(0,r.jsx)("span",{className:"material-symbols-outlined text-lg text-gray-400 hover:text-red-400",children:"delete"})})]})})]},e.id)})})]})}),b>1&&(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-surface flex items-center justify-between",children:[(0,r.jsx)("button",{onClick:()=>p(e=>Math.max(1,e-1)),disabled:1===h,className:"px-4 py-2 rounded-lg bg-background-dark text-white hover:bg-background-dark/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),(0,r.jsxs)("span",{className:"text-gray-400",children:["Page ",h," of ",b]}),(0,r.jsx)("button",{onClick:()=>p(e=>Math.min(b,e+1)),disabled:h===b,className:"px-4 py-2 rounded-lg bg-background-dark text-white hover:bg-background-dark/80 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})]})]}),y&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-surface rounded-lg p-6 max-w-md w-full",children:[(0,r.jsx)("h3",{className:"text-white text-xl font-bold mb-4",children:k?"Edit IBAN":"Create IBAN"}),(0,r.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Bank Name"}),(0,r.jsx)("input",{type:"text",required:!0,value:A.bankName,onChange:e=>I({...A,bankName:e.target.value}),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"Account Holder"}),(0,r.jsx)("input",{type:"text",required:!0,value:A.accountHolder,onChange:e=>I({...A,accountHolder:e.target.value}),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm text-gray-400 mb-2",children:"IBAN Number"}),(0,r.jsx)("input",{type:"text",required:!0,value:A.ibanNumber,onChange:e=>I({...A,ibanNumber:e.target.value}),className:"w-full rounded-lg bg-background-dark border border-surface px-4 py-2 text-white font-mono focus:outline-none focus:ring-2 focus:ring-primary/50"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"isActive",checked:A.isActive,onChange:e=>I({...A,isActive:e.target.checked}),className:"w-4 h-4 rounded bg-background-dark border-surface text-primary focus:ring-primary/50"}),(0,r.jsx)("label",{htmlFor:"isActive",className:"text-sm text-gray-400",children:"Active"})]}),(0,r.jsxs)("div",{className:"flex gap-4 pt-4",children:[(0,r.jsx)("button",{type:"button",onClick:()=>j(!1),className:"flex-1 rounded-lg bg-gray-600 hover:bg-gray-700 px-4 py-2 text-white font-medium transition-colors",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",className:"flex-1 rounded-lg bg-primary text-background-dark px-4 py-2 font-bold hover:bg-yellow-400 transition-colors",children:k?"Update":"Create"})]})]})]})})]})}function x(){return(0,r.jsx)(o.Z,{children:(0,r.jsx)(m,{})})}},96666:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var r=a(57437),s=a(2265),n=a(24033),i=a(87300);function l(e){let{children:t}=e,a=(0,n.useRouter)(),l=(0,n.usePathname)(),[o,c]=(0,s.useState)(!1),[d,u]=(0,s.useState)(!0);return((0,s.useEffect)(()=>{(()=>{if(!(0,i.$8)()){let e=encodeURIComponent(l||"/admin");a.push("/auth/login?next=".concat(e));return}if(!(0,i.GJ)()){a.push("/dashboard");return}c(!0),u(!1)})()},[a,l]),d)?(0,r.jsx)("div",{className:"flex min-h-screen w-full items-center justify-center bg-background-dark",children:(0,r.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,r.jsx)("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"}),(0,r.jsx)("p",{className:"text-white/70 text-sm",children:"Verifying access..."})]})}):o?(0,r.jsx)(r.Fragment,{children:t}):null}},87300:function(e,t,a){"use strict";a.d(t,{$8:function(){return n},GJ:function(){return i},My:function(){return l},kS:function(){return o},ts:function(){return r}});let r=()=>{try{let e=localStorage.getItem("user");return e?JSON.parse(e):null}catch(e){return null}},s=()=>localStorage.getItem("token"),n=()=>!!s(),i=()=>{let e=r();return!!e&&["admin","super_admin","operator"].includes(e.role)},l=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",o=()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/"}},66209:function(e,t,a){"use strict";a.d(t,{X6:function(){return l},dN:function(){return i},o0:function(){return s},p6:function(){return r}});let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return"N/A";try{let a=new Date(e);if(isNaN(a.getTime()))return"N/A";let r={day:"2-digit",month:"2-digit",year:"numeric",...t};return a.toLocaleDateString("tr-TR",r)}catch(e){return console.error("Error formatting date:",e),"N/A"}},s=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"TRY",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"tr-TR";if(null==e)return n(0,t,a);try{let r="string"==typeof e?parseFloat(e):e;if(isNaN(r))return n(0,t,a);return new Intl.NumberFormat(a,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}catch(a){return console.error("Error formatting currency:",a),"".concat(e," ").concat(t)}},i=e=>n(e,"TRY","tr-TR"),l=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return"+".concat(t.toFixed(1),"%");if(t<0)return"".concat(t.toFixed(1),"%");return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},24215:function(e,t,a){"use strict";a.d(t,{cM:function(){return i}});let r={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class s{formatMessage(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new Date().toISOString(),s="[".concat(r,"] [").concat(e.toUpperCase(),"]");return a?{prefix:s,message:t,data:a}:{prefix:s,message:t}}debug(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.isDevelopment)return;let a=this.formatMessage(r.DEBUG,e,t);t?console.log(a.prefix,a.message,a.data):console.log(a.prefix,a.message)}info(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(r.INFO,e,t);t?console.info(a.prefix,a.message,a.data):console.info(a.prefix,a.message)}warn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(r.WARN,e,t);t?console.warn(a.prefix,a.message,a.data):console.warn(a.prefix,a.message)}error(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.formatMessage(r.ERROR,e,t);t?(console.error(a.prefix,a.message,t),this.isDevelopment):console.error(a.prefix,a.message)}apiError(e,t){var a,r,s,n;this.error("API Error [".concat(e,"]"),{endpoint:e,status:null==t?void 0:null===(a=t.response)||void 0===a?void 0:a.status,message:(null==t?void 0:null===(s=t.response)||void 0===s?void 0:null===(r=s.data)||void 0===r?void 0:r.message)||(null==t?void 0:t.message),data:null==t?void 0:null===(n=t.response)||void 0===n?void 0:n.data})}constructor(){this.isDevelopment=!1}}let n=new s,i={debug:(e,t)=>n.debug(e,t),info:(e,t)=>n.info(e,t),warn:(e,t)=>n.warn(e,t),error:(e,t)=>n.error(e,t),apiError:(e,t)=>n.apiError(e,t)}},24033:function(e,t,a){e.exports=a(15313)}},function(e){e.O(0,[1176,4829,2385,2971,4938,1744],function(){return e(e.s=35739)}),_N_E=e.O()}]);