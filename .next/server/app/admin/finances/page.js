(()=>{var e={};e.id=5395,e.ids=[5395],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},42661:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>d,routeModule:()=>h,tree:()=>c});var a=s(50482),r=s(69108),l=s(62563),n=s.n(l),i=s(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["admin",{children:["finances",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,80554)),"W:\\garbet\\Frontend\\app\\admin\\finances\\page.js"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,69847)),"W:\\garbet\\Frontend\\app\\layout.js"],error:[()=>Promise.resolve().then(s.bind(s,60826)),"W:\\garbet\\Frontend\\app\\error.js"],"not-found":[()=>Promise.resolve().then(s.bind(s,46178)),"W:\\garbet\\Frontend\\app\\not-found.js"]}],d=["W:\\garbet\\Frontend\\app\\admin\\finances\\page.js"],m="/admin/finances/page",x={require:s,loadChunk:()=>Promise.resolve()},h=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/finances/page",pathname:"/admin/finances",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},67030:(e,t,s)=>{Promise.resolve().then(s.bind(s,81158))},81158:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var a=s(95344),r=s(3729),l=s(20783),n=s.n(l),i=s(22254),o=s(21475),c=s(24774),d=s(94913),m=s(36846),x=s(60367);function h(){let e=(0,i.usePathname)(),[t,s]=(0,r.useState)("withdrawals"),[l,o]=(0,r.useState)(""),[h,u]=(0,r.useState)("pending"),[p,b]=(0,r.useState)(1),[g,f]=(0,r.useState)(!1),[w,j]=(0,r.useState)(""),[N,y]=(0,r.useState)([]),[v,k]=(0,r.useState)([]),[S,C]=(0,r.useState)(1),[A,E]=(0,r.useState)(0),[B,_]=(0,r.useState)(null),[D,R]=(0,r.useState)(!1),[I,q]=(0,r.useState)(""),[F,T]=(0,r.useState)([]),[M,P]=(0,r.useState)(!1),[O,$]=(0,r.useState)(""),[z,U]=(0,r.useState)(""),[H,W]=(0,r.useState)(""),[G,Y]=(0,r.useState)(""),[Q,K]=(0,r.useState)(""),[L,Z]=(0,r.useState)(!1),[V,X]=(0,r.useState)(""),[J,ee]=(0,r.useState)(""),[et,es]=(0,r.useState)("all"),[ea,er]=(0,r.useState)(!1),[el,en]=(0,r.useState)(!1),[ei,eo]=(0,r.useState)(null),[ec,ed]=(0,r.useState)({iban:"",ibanHolderName:"",bankName:""}),[em,ex]=(0,r.useState)({amount:"",type:"add",description:""});(0,r.useEffect)(()=>{eh()},[t,h,p,G,Q,et]);let eh=async()=>{f(!0),j("");try{let e={status:"Status: All"===h?void 0:h,page:p,limit:50};if(G&&(e.startDate=G),Q&&(e.endDate=Q),et&&"all"!==et&&(e.paymentMethod=et),"withdrawals"===t){let t=await c.Sb.getWithdrawalPool(e);y(t.data.withdrawals||[]),C(t.data.totalPages||1),E(t.data.total||0)}else{let t=await c.Sb.getDepositPool(e);k(t.data.deposits||[]),C(t.data.totalPages||1),E(t.data.total||0)}}catch(e){j(e.response?.data?.message||"Veri y\xfcklenirken bir hata oluştu"),"withdrawals"===t?(y(x.RN),C(1),E(x.RN.length)):(k(x.sR),C(1),E(x.sR.length)),m.cM.apiError("/admin/finances",e)}finally{f(!1)}},eu=e=>{switch(e){case"approved":case"paid":return"bg-green-500/20 text-green-400";case"pending":return"bg-yellow-500/20 text-yellow-400";case"rejected":case"cancelled":return"bg-red-500/20 text-red-400";default:return"bg-gray-500/20 text-gray-400"}},ep=e=>{switch(e){case"pending":return"Beklemede";case"approved":return"Onaylandı";case"paid":return"\xd6dendi";case"rejected":return"Reddedildi";case"cancelled":return"İptal Edildi";default:return e}},eb=async e=>{try{"withdrawals"===t?await c.Sb.approveWithdrawal(e,{adminNotes:I}):await c.Sb.approveDeposit(e,{adminNotes:I}),R(!1),q(""),_(null),eh()}catch(e){j(e.response?.data?.message||"Onaylama işlemi başarısız")}},eg=async e=>{let t=prompt("Red nedeni:");if(t)try{await c.Sb.rejectWithdrawal(e,{rejectionReason:t,adminNotes:I}),eh()}catch(e){j(e.response?.data?.message||"Red işlemi başarısız")}},ef=async e=>{if(confirm("Bu talebi iptal etmek istediğinizden emin misiniz?"))try{await c.Sb.cancelDeposit(e,{adminNotes:I}),W("Deposit cancelled successfully"),eh()}catch(e){j(e.response?.data?.message||"İptal işlemi başarısız")}},ew=e=>{T(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])},ej=async()=>{if(O&&0!==F.length)try{if("withdrawals"===t){if("approve"===O)await c.Sb.bulkApproveWithdrawals({withdrawalIds:F,adminNotes:I}),W(`Successfully approved ${F.length} withdrawals`);else if("reject"===O){if(!z){j("Rejection reason is required");return}await c.Sb.bulkRejectWithdrawals({withdrawalIds:F,rejectionReason:z,adminNotes:I}),W(`Successfully rejected ${F.length} withdrawals`)}}else"approve"===O?(await c.Sb.bulkApproveDeposits({depositIds:F,adminNotes:I}),W(`Successfully approved ${F.length} deposits`)):"cancel"===O&&(await c.Sb.bulkCancelDeposits({depositIds:F,adminNotes:I}),W(`Successfully cancelled ${F.length} deposits`));T([]),P(!1),$(""),U(""),q(""),eh()}catch(e){j(e.response?.data?.message||"Bulk operation failed"),m.cM.apiError("/admin/bulk-action",e)}},eN=async()=>{try{let e={};h&&"Status: All"!==h&&(e.status=h),G&&(e.startDate=G),Q&&(e.endDate=Q),et&&"all"!==et&&(e.paymentMethod=et);let s="withdrawals"===t?await c.Sb.exportWithdrawals(e):await c.Sb.exportDeposits(e),a=new Blob([s.data],{type:"text/csv;charset=utf-8;"}),r=document.createElement("a"),l=URL.createObjectURL(a);r.setAttribute("href",l),r.setAttribute("download",`${t}-export-${new Date().toISOString().split("T")[0]}.csv`),r.style.visibility="hidden",document.body.appendChild(r),r.click(),document.body.removeChild(r),W(`${"withdrawals"===t?"Withdrawals":"Deposits"} exported successfully`)}catch(e){j(e.response?.data?.message||"Failed to export"),m.cM.apiError("/admin/export",e)}},ey=("withdrawals"===t?N:v).filter(e=>{if(!l)return!0;let t=l.toLowerCase();return e.user?.username?.toLowerCase().includes(t)||e.user?.email?.toLowerCase().includes(t)||e._id?.toString().toLowerCase().includes(t)}),ev=("withdrawals"===t?N:v).filter(e=>"pending"===e.status).reduce((e,t)=>e+(t.amount||0),0);return(0,a.jsxs)("div",{className:"flex min-h-screen w-full bg-background-dark",children:[(0,a.jsxs)("div",{className:"flex bg-background-dark min-h-screen",children:[(0,a.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 flex flex-col bg-background-dark border-r border-surface p-4 z-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-8 px-2",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-lg bg-primary",children:a.jsx("span",{className:"material-symbols-outlined text-black",children:"casino"})}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h1",{className:"text-base font-bold text-white",children:"Casino Admin"}),a.jsx("p",{className:"text-sm text-gray-400",children:"Management"})]})]}),a.jsx("nav",{className:"flex flex-col gap-2",children:[{id:"dashboard",label:"Dashboard Overview",icon:"dashboard",href:"/admin"},{id:"users",label:"User Management",icon:"group",href:"/admin/users"},{id:"kyc",label:"KYC Management",icon:"badge",href:"/admin/kyc"},{id:"games",label:"Game Management",icon:"gamepad",href:"/admin/games"},{id:"betting",label:"Betting Management",icon:"sports_soccer",href:"/admin/betting"},{id:"promotions",label:"Promotions Management",icon:"campaign",href:"/admin/promotions"},{id:"deposits",label:"Deposits",icon:"arrow_downward",href:"/admin/deposits"},{id:"withdrawals",label:"Withdrawals",icon:"arrow_upward",href:"/admin/withdrawals"},{id:"tournaments",label:"Tournaments",icon:"emoji_events",href:"/admin/tournaments"},{id:"content",label:"Content Management",icon:"wysiwyg",href:"/admin/content"}].map(t=>(0,a.jsxs)(n(),{href:t.href,className:`flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors ${e===t.href||"dashboard"===t.id&&"/admin"===e?"bg-primary/20 text-primary":"text-gray-300 hover:bg-white/10"}`,children:[a.jsx("span",{className:"material-symbols-outlined",children:t.icon}),a.jsx("p",{children:t.label})]},t.id))}),(0,a.jsxs)("div",{className:"mt-auto",children:[(0,a.jsxs)(n(),{href:"/admin/settings",className:"flex items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-white/10 transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined",children:"settings"}),a.jsx("p",{className:"text-sm font-medium",children:"Settings"})]}),(0,a.jsxs)("button",{onClick:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("adminEmail"),window.location.href="/auth/login"},className:"mt-2 flex w-full items-center gap-3 rounded-lg px-3 py-2 text-gray-300 hover:bg-red-500/20 hover:text-red-400 transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined",children:"logout"}),a.jsx("p",{className:"text-sm font-medium",children:"Logout"})]}),(0,a.jsxs)("div",{className:"mt-4 flex items-center gap-3 border-t border-white/10 pt-4",children:[a.jsx("div",{className:"bg-center bg-no-repeat aspect-square bg-cover rounded-full size-10",style:{backgroundImage:'url("https://lh3.googleusercontent.com/aida-public/AB6AXuAeBaCCsTptl1trq-7t7S9yHg2U-j1m_3eQJ6dpRP-IZjxZIDKL6U_iFBKUwWt18HwxovSG8ldqiQCa7NbmEcelTnHQGSwTeQORHSMYn7gGZDs-U982dOqo8QbAOQy7uCWkHjlHxe0m_eXtY2xDHYQYW3KAKuLgW2ZrQlV3yrUSs8tMyu4QaShzTzhohnzpDGQllaTrkdAQoFvcjS9zzhmKAnFrldqCRC16_VfbZD7OYbVjNJOiQ4Gz2-oKSG6XZ4azP4qWoBeSO74")'}}),(0,a.jsxs)("div",{className:"flex flex-col",children:[a.jsx("h2",{className:"text-sm font-medium text-white",children:"Admin User"}),a.jsx("p",{className:"text-xs text-gray-400",children:"admin@casino.com"})]})]})]})]}),a.jsx("main",{className:"ml-64 flex-1 min-h-screen"})]}),a.jsx("main",{className:"flex-1 p-6 lg:p-10 bg-background-light dark:bg-background-dark",children:(0,a.jsxs)("div",{className:"layout-content-container flex flex-col w-full max-w-7xl mx-auto",children:[(0,a.jsxs)("div",{className:"flex flex-wrap justify-between gap-3 mb-6",children:[a.jsx("p",{className:"text-black dark:text-white text-4xl font-black leading-tight tracking-[-0.033em] min-w-72",children:"withdrawals"===t?"\xc7ekim Havuzu":"Yatırım Havuzu"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[F.length>0&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("button",{onClick:()=>P(!0),className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-yellow-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-yellow-600 transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"check_circle"}),(0,a.jsxs)("span",{className:"truncate",children:["Bulk Action (",F.length,")"]})]}),a.jsx("button",{onClick:()=>T([]),className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-gray-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-gray-600 transition-colors",children:a.jsx("span",{className:"truncate",children:"Clear"})})]}),(0,a.jsxs)("button",{onClick:eN,className:"flex items-center justify-center gap-2 overflow-hidden rounded-lg h-10 px-4 bg-green-500 text-white text-sm font-bold leading-normal tracking-[0.015em] hover:bg-green-600 transition-colors",children:[a.jsx("span",{className:"material-symbols-outlined text-lg",children:"download"}),a.jsx("span",{className:"truncate",children:"Export CSV"})]})]})]}),w&&a.jsx("div",{className:"mb-4 rounded-lg bg-red-500/20 border border-red-500/50 p-4",children:a.jsx("p",{className:"text-sm text-red-400",children:w})}),H&&a.jsx("div",{className:"mb-4 rounded-lg bg-green-500/20 border border-green-500/50 p-4",children:a.jsx("p",{className:"text-sm text-green-400",children:H})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-white/5 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-base font-medium leading-normal",children:"withdrawals"===t?"Toplam Bekleyen \xc7ekimler":"Toplam Bekleyen Yatırımlar"}),(0,a.jsxs)("p",{className:"text-white tracking-light text-2xl font-bold leading-tight",children:["₺",ev.toFixed(2)]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 rounded-xl p-6 bg-white/5 border border-white/10",children:[a.jsx("p",{className:"text-white/70 text-base font-medium leading-normal",children:"Toplam Kayıt"}),a.jsx("p",{className:"text-white tracking-light text-2xl font-bold leading-tight",children:A})]})]}),(0,a.jsxs)("div",{className:"bg-[#1E1E2B]/50 dark:bg-black/20 rounded-xl border border-white/10",children:[a.jsx("div",{className:"pb-3",children:(0,a.jsxs)("div",{className:"flex border-b border-white/10 px-4 gap-8",children:[a.jsx("button",{onClick:()=>{s("deposits"),b(1)},className:`flex flex-col items-center justify-center border-b-[3px] pb-[13px] pt-4 transition-colors ${"deposits"===t?"border-b-[#0dccf2] text-[#0dccf2]":"border-b-transparent text-white/50"}`,children:a.jsx("p",{className:"text-sm font-bold leading-normal tracking-[0.015em]",children:"Yatırımlar"})}),a.jsx("button",{onClick:()=>{s("withdrawals"),b(1)},className:`flex flex-col items-center justify-center border-b-[3px] pb-[13px] pt-4 transition-colors ${"withdrawals"===t?"border-b-[#0dccf2] text-[#0dccf2]":"border-b-transparent text-white/50"}`,children:a.jsx("p",{className:"text-sm font-bold leading-normal tracking-[0.015em]",children:"\xc7ekimler"})})]})}),(0,a.jsxs)("div",{className:"p-4 flex flex-col lg:flex-row gap-4",children:[a.jsx("div",{className:"flex-grow",children:a.jsx("label",{className:"flex flex-col min-w-40 h-12 w-full",children:(0,a.jsxs)("div",{className:"flex w-full flex-1 items-stretch rounded-lg h-full",children:[a.jsx("div",{className:"text-white/50 flex border-none bg-white/5 items-center justify-center pl-4 rounded-l-lg border-r-0",children:a.jsx("span",{className:"material-symbols-outlined",children:"search"})}),a.jsx("input",{className:"form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white focus:outline-0 focus:ring-2 focus:ring-[#0dccf2]/50 border-none bg-white/5 h-full placeholder:text-white/50 px-4 rounded-l-none border-l-0 pl-2 text-base font-normal leading-normal",placeholder:"Kullanıcı adı, email veya ID ile ara...",value:l,onChange:e=>o(e.target.value),type:"text"})]})})}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{className:"appearance-none form-select h-12 w-full lg:w-40 rounded-lg bg-white/5 border-none text-white focus:ring-2 focus:ring-[#0dccf2]/50 pl-4 pr-10",value:h,onChange:e=>{u(e.target.value),b(1)},children:[a.jsx("option",{value:"Status: All",className:"bg-[#1E1E2B] text-white",children:"Durum: T\xfcm\xfc"}),a.jsx("option",{value:"pending",className:"bg-[#1E1E2B] text-white",children:"Beklemede"}),a.jsx("option",{value:"approved",className:"bg-[#1E1E2B] text-white",children:"Onaylandı"}),a.jsx("option",{value:"rejected",className:"bg-[#1E1E2B] text-white",children:"Reddedildi"}),a.jsx("option",{value:"cancelled",className:"bg-[#1E1E2B] text-white",children:"İptal Edildi"})]}),a.jsx("span",{className:"material-symbols-outlined text-white/50 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:"expand_more"})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsxs)("select",{className:"appearance-none form-select h-12 w-full lg:w-40 rounded-lg bg-white/5 border-none text-white focus:ring-2 focus:ring-[#0dccf2]/50 pl-4 pr-10",value:et,onChange:e=>{es(e.target.value),b(1)},children:[a.jsx("option",{value:"all",className:"bg-[#1E1E2B] text-white",children:"Payment: All"}),a.jsx("option",{value:"IBAN",className:"bg-[#1E1E2B] text-white",children:"IBAN"}),a.jsx("option",{value:"Banka Havalesi",className:"bg-[#1E1E2B] text-white",children:"Banka Havalesi"}),a.jsx("option",{value:"Papara",className:"bg-[#1E1E2B] text-white",children:"Papara"}),a.jsx("option",{value:"Credit Card",className:"bg-[#1E1E2B] text-white",children:"Credit Card"})]}),a.jsx("span",{className:"material-symbols-outlined text-white/50 absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:"expand_more"})]}),L?(0,a.jsxs)("div",{className:"flex gap-2 items-center",children:[a.jsx("input",{type:"date",value:G,onChange:e=>Y(e.target.value),className:"h-12 rounded-lg bg-white/5 px-4 text-white text-sm border border-white/10 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Start Date"}),a.jsx("input",{type:"date",value:Q,onChange:e=>K(e.target.value),className:"h-12 rounded-lg bg-white/5 px-4 text-white text-sm border border-white/10 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"End Date"}),a.jsx("button",{onClick:()=>{Z(!1),Y(""),K("")},className:"h-12 w-12 rounded-lg bg-white/5 hover:bg-white/10 flex items-center justify-center transition-colors",children:a.jsx("span",{className:"material-symbols-outlined text-white/50",children:"close"})})]}):(0,a.jsxs)("button",{onClick:()=>Z(!0),className:"flex h-12 items-center justify-center gap-2 rounded-lg bg-white/5 px-4 hover:bg-white/10 transition-colors text-white/80",children:[a.jsx("span",{className:"material-symbols-outlined",children:"calendar_month"}),a.jsx("span",{className:"text-sm",children:"Date Range"})]}),(0,a.jsxs)("button",{onClick:()=>{o(""),u("Status: All"),es("all"),Y(""),K(""),Z(!1),X(""),ee("")},className:"flex h-12 items-center justify-center gap-2 rounded-lg bg-transparent px-4 hover:bg-white/10 transition-colors text-white/50 hover:text-white",children:[a.jsx("span",{className:"material-symbols-outlined",children:"close"}),a.jsx("span",{className:"text-sm",children:"Clear Filters"})]})]})]}),g?a.jsx("div",{className:"p-8 text-center",children:a.jsx("p",{className:"text-white/50",children:"Y\xfckleniyor..."})}):a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full text-sm text-left text-white/80",children:[a.jsx("thead",{className:"text-xs text-white/50 uppercase bg-black/20",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3",scope:"col",children:a.jsx("input",{type:"checkbox",checked:F.length===("withdrawals"===t?N:v).filter(e=>"pending"===e.status).length&&("withdrawals"===t?N:v).filter(e=>"pending"===e.status).length>0,onChange:()=>{let e=("withdrawals"===t?N:v).filter(e=>"pending"===e.status).map(e=>e._id);F.length===e.length&&e.length>0?T([]):T(e)},className:"rounded border-white/20 bg-transparent"})}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"ID"}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"Kullanıcı"}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"Tutar"}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"Y\xf6ntem"}),"withdrawals"===t&&a.jsx("th",{className:"px-6 py-3",scope:"col",children:"IBAN"}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"Tarih"}),a.jsx("th",{className:"px-6 py-3",scope:"col",children:"Durum"}),a.jsx("th",{className:"px-6 py-3 text-center",scope:"col",children:"İşlemler"})]})}),a.jsx("tbody",{children:0===ey.length?a.jsx("tr",{children:a.jsx("td",{colSpan:"withdrawals"===t?9:8,className:"px-6 py-8 text-center text-white/50",children:"withdrawals"===t?"Bekleyen \xe7ekim talebi bulunmamaktadır.":"Bekleyen yatırım talebi bulunmamaktadır."})}):ey.map(e=>(0,a.jsxs)("tr",{className:"border-b border-white/10 hover:bg-white/5 transition-colors",children:[a.jsx("td",{className:"px-6 py-4",children:"pending"===e.status&&a.jsx("input",{type:"checkbox",checked:F.includes(e._id),onChange:()=>ew(e._id),className:"rounded border-white/20 bg-transparent"})}),(0,a.jsxs)("td",{className:"px-6 py-4 font-mono text-white/60",children:[e._id.toString().substring(0,8),"..."]}),a.jsx("td",{className:"px-6 py-4 font-medium text-white",children:e.user?.username||e.user?.email||"N/A"}),(0,a.jsxs)("td",{className:"px-6 py-4 font-medium text-white",children:["₺",e.amount?.toFixed(2)]}),a.jsx("td",{className:"px-6 py-4",children:e.paymentMethod||"IBAN"}),"withdrawals"===t&&(0,a.jsxs)("td",{className:"px-6 py-4 text-sm text-white/60",children:[e.iban?.substring(0,12),"..."]}),a.jsx("td",{className:"px-6 py-4",children:(0,d.p6)(e.createdAt)}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-2 py-1 text-xs font-semibold rounded-full ${eu(e.status)}`,children:ep(e.status)})}),a.jsx("td",{className:"px-6 py-4",children:"pending"===e.status?(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 flex-wrap",children:[a.jsx("button",{onClick:()=>{_(e),R(!0)},className:"px-3 py-1 text-xs font-bold text-black bg-green-400 rounded-md hover:bg-green-500 transition-colors",children:"Onayla"}),"withdrawals"===t?a.jsx("button",{onClick:()=>eg(e._id),className:"px-3 py-1 text-xs font-bold text-white bg-red-500/80 rounded-md hover:bg-red-500 transition-colors",children:"Reddet"}):a.jsx("button",{onClick:()=>ef(e._id),className:"px-3 py-1 text-xs font-bold text-white bg-red-500/80 rounded-md hover:bg-red-500 transition-colors",children:"İptal"}),"withdrawals"===t&&(0,a.jsxs)(a.Fragment,{children:[a.jsx("button",{onClick:()=>{eo(e.user?._id||e.user),ed({iban:e.iban||e.user?.iban||"",ibanHolderName:e.ibanHolderName||e.user?.ibanHolderName||"",bankName:e.bankName||e.user?.bankName||""}),er(!0)},className:"px-3 py-1 text-xs font-bold text-white bg-blue-500/80 rounded-md hover:bg-blue-500 transition-colors",title:"Edit IBAN",children:"IBAN"}),a.jsx("button",{onClick:()=>{eo(e.user?._id||e.user),ex({amount:"",type:"add",description:""}),en(!0)},className:"px-3 py-1 text-xs font-bold text-white bg-purple-500/80 rounded-md hover:bg-purple-500 transition-colors",title:"Update Balance",children:"Bakiye"})]})]}):a.jsx("div",{className:"text-center text-white/50 italic",children:"Tamamlandı"})})]},e._id))})]})}),S>1&&(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-t border-white/10",children:[(0,a.jsxs)("span",{className:"text-sm text-white/50",children:["Sayfa ",p," / ",S," (Toplam ",A," kayıt)"]}),(0,a.jsxs)("div",{className:"inline-flex items-center -space-x-px text-sm",children:[a.jsx("button",{onClick:()=>b(Math.max(1,p-1)),disabled:1===p,className:"flex items-center justify-center px-3 h-8 ml-0 leading-tight text-white/60 bg-white/5 border border-white/10 rounded-l-lg hover:bg-white/10 hover:text-white transition-colors disabled:opacity-50",children:"\xd6nceki"}),[...Array(Math.min(5,S))].map((e,t)=>{let s=t+1;return a.jsx("button",{onClick:()=>b(s),className:`flex items-center justify-center px-3 h-8 leading-tight border border-white/10 transition-colors ${p===s?"text-white bg-[#0dccf2]/20 border-[#0dccf2]/50 hover:bg-[#0dccf2]/30":"text-white/60 bg-white/5 hover:bg-white/10 hover:text-white"}`,children:s},s)}),a.jsx("button",{onClick:()=>b(Math.min(S,p+1)),disabled:p===S,className:"flex items-center justify-center px-3 h-8 leading-tight text-white/60 bg-white/5 border border-white/10 rounded-r-lg hover:bg-white/10 hover:text-white transition-colors disabled:opacity-50",children:"Sonraki"})]})]})]})]})}),D&&B&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-4",children:"withdrawals"===t?"\xc7ekim Onayla":"Yatırım Onayla"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Kullanıcı: ",B.user?.username||B.user?.email]}),(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Tutar: ₺",B.amount?.toFixed(2)]}),"withdrawals"===t&&(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["IBAN: ",B.iban]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Admin Notu (Opsiyonel)"}),a.jsx("textarea",{className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",value:I,onChange:e=>q(e.target.value),placeholder:"Not ekleyin..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:()=>eb(B._id),className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:"Onayla"}),a.jsx("button",{onClick:()=>{R(!1),q(""),_(null)},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"İptal"})]})]})}),ea&&ei&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-4",children:"Edit User IBAN"}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["User: ","object"==typeof ei?ei.username||ei.email:"N/A"]})}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"IBAN *"}),a.jsx("input",{type:"text",value:ec.iban,onChange:e=>ed({...ec,iban:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"TR00 0000 0000 0000 0000 0000 00"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"IBAN Holder Name *"}),a.jsx("input",{type:"text",value:ec.ibanHolderName,onChange:e=>ed({...ec,ibanHolderName:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Account Holder Name"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Bank Name (Optional)"}),a.jsx("input",{type:"text",value:ec.bankName,onChange:e=>ed({...ec,bankName:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Bank Name"})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:async()=>{try{let e="object"==typeof ei?ei._id:ei;await c.Sb.updateUserIban(e,ec),W("IBAN updated successfully"),er(!1),eo(null),ed({iban:"",ibanHolderName:"",bankName:""}),eh(),setTimeout(()=>W(""),3e3)}catch(e){j(e.response?.data?.message||"Failed to update IBAN")}},disabled:!ec.iban||!ec.ibanHolderName,className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Update IBAN"}),a.jsx("button",{onClick:()=>{er(!1),eo(null),ed({iban:"",ibanHolderName:"",bankName:""})},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),el&&ei&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-4",children:"Update User Balance"}),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["User: ","object"==typeof ei?ei.username||ei.email:"N/A"]}),"object"==typeof ei&&void 0!==ei.balance&&(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-2",children:["Current Balance: ₺",ei.balance?.toFixed(2)||"0.00"]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Amount *"}),a.jsx("input",{type:"number",value:em.amount,onChange:e=>ex({...em,amount:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"0.00",min:"0",step:"0.01"})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Type *"}),(0,a.jsxs)("select",{value:em.type,onChange:e=>ex({...em,type:e.target.value}),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[a.jsx("option",{value:"add",children:"Add (Credit)"}),a.jsx("option",{value:"subtract",children:"Subtract (Debit)"})]})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Description (Optional)"}),a.jsx("textarea",{value:em.description,onChange:e=>ex({...em,description:e.target.value}),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Transaction description..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:async()=>{try{let e="object"==typeof ei?ei._id:ei;await c.Sb.updateUserBalance(e,em),W(`Balance ${"add"===em.type?"added":"subtracted"} successfully`),en(!1),eo(null),ex({amount:"",type:"add",description:""}),eh(),setTimeout(()=>W(""),3e3)}catch(e){j(e.response?.data?.message||"Failed to update balance")}},disabled:!em.amount||0>=parseFloat(em.amount),className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Update Balance"}),a.jsx("button",{onClick:()=>{en(!1),eo(null),ex({amount:"",type:"add",description:""})},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})}),M&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-[#1E1E2B] rounded-xl p-6 max-w-md w-full mx-4 border border-white/10",children:[a.jsx("h3",{className:"text-white text-xl font-bold mb-4",children:"Bulk Action"}),a.jsx("div",{className:"mb-4",children:(0,a.jsxs)("p",{className:"text-white/70 text-sm mb-4",children:["withdrawals"===t?"Withdrawals":"Deposits",": ",a.jsx("span",{className:"font-bold text-white",children:F.length})," selected"]})}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Action"}),(0,a.jsxs)("select",{value:O,onChange:e=>$(e.target.value),className:"w-full h-12 rounded-lg bg-white/5 border border-white/10 text-white px-4 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",children:[a.jsx("option",{value:"",children:"Select Action"}),a.jsx("option",{value:"approve",children:"Approve"}),"withdrawals"===t?a.jsx("option",{value:"reject",children:"Reject"}):a.jsx("option",{value:"cancel",children:"Cancel"})]})]}),"reject"===O&&(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Rejection Reason *"}),a.jsx("textarea",{value:z,onChange:e=>U(e.target.value),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Enter rejection reason...",required:!0})]}),(0,a.jsxs)("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-white/70 text-sm mb-2",children:"Admin Notes (Optional)"}),a.jsx("textarea",{value:I,onChange:e=>q(e.target.value),className:"w-full h-24 rounded-lg bg-white/5 border border-white/10 text-white p-3 focus:outline-none focus:ring-2 focus:ring-[#0dccf2]/50",placeholder:"Add notes..."})]}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsxs)("button",{onClick:ej,disabled:!O||"reject"===O&&!z,className:"flex-1 px-4 py-2 bg-[#0dccf2] text-white rounded-lg hover:bg-[#0dccf2]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:["approve"===O?"Approve":"reject"===O?"Reject":"Cancel"," ",F.length," Items"]}),a.jsx("button",{onClick:()=>{P(!1),$(""),U(""),q("")},className:"flex-1 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]})})]})}function u(){return a.jsx(o.Z,{children:a.jsx(h,{})})}},21475:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var a=s(95344),r=s(3729),l=s(22254),n=s(2324);function i({children:e}){let t=(0,l.useRouter)(),s=(0,l.usePathname)(),[i,o]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!0);return((0,r.useEffect)(()=>{(()=>{if(!(0,n.$8)()){let e=encodeURIComponent(s||"/admin");t.push(`/auth/login?next=${e}`);return}if(!(0,n.GJ)()){t.push("/dashboard");return}o(!0),d(!1)})()},[t,s]),c)?a.jsx("div",{className:"flex min-h-screen w-full items-center justify-center bg-background-dark",children:(0,a.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[a.jsx("div",{className:"size-8 animate-spin rounded-full border-4 border-[#0dccf2] border-t-transparent"}),a.jsx("p",{className:"text-white/70 text-sm",children:"Verifying access..."})]})}):i?a.jsx(a.Fragment,{children:e}):null}},22254:(e,t,s)=>{e.exports=s(14767)},2324:(e,t,s)=>{"use strict";s.d(t,{$8:()=>l,GJ:()=>n,My:()=>i,kS:()=>o,ts:()=>a});let a=()=>null,r=()=>null,l=()=>!!r(),n=()=>{let e=a();return!!e&&["admin","super_admin","operator"].includes(e.role)},i=e=>["admin","super_admin","operator"].includes(e)?"/admin":"/dashboard",o=()=>{}},94913:(e,t,s)=>{"use strict";s.d(t,{X6:()=>i,dN:()=>n,o0:()=>r,p6:()=>a});let a=(e,t={})=>{if(!e)return"N/A";try{let s=new Date(e);if(isNaN(s.getTime()))return"N/A";let a={day:"2-digit",month:"2-digit",year:"numeric",...t};return s.toLocaleDateString("tr-TR",a)}catch(e){return console.error("Error formatting date:",e),"N/A"}},r=e=>{if(!e)return"N/A";try{let t=new Date(e);if(isNaN(t.getTime()))return"N/A";return t.toLocaleDateString("tr-TR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch(e){return console.error("Error formatting date time:",e),"N/A"}},l=(e,t="TRY",s="tr-TR")=>{if(null==e)return l(0,t,s);try{let a="string"==typeof e?parseFloat(e):e;if(isNaN(a))return l(0,t,s);return new Intl.NumberFormat(s,{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(a)}catch(s){return console.error("Error formatting currency:",s),`${e} ${t}`}},n=e=>l(e,"TRY","tr-TR"),i=e=>{if(null==e)return"0%";try{let t="string"==typeof e?parseFloat(e):e;if(isNaN(t))return"0%";if(t>0)return`+${t.toFixed(1)}%`;if(t<0)return`${t.toFixed(1)}%`;return"0%"}catch(e){return console.error("Error formatting change:",e),"0%"}}},36846:(e,t,s)=>{"use strict";s.d(t,{cM:()=>n});let a={DEBUG:"debug",INFO:"info",WARN:"warn",ERROR:"error"};class r{constructor(){this.isDevelopment=!1}formatMessage(e,t,s=null){let a=new Date().toISOString(),r=`[${a}] [${e.toUpperCase()}]`;return s?{prefix:r,message:t,data:s}:{prefix:r,message:t}}debug(e,t=null){if(!this.isDevelopment)return;let s=this.formatMessage(a.DEBUG,e,t);t?console.log(s.prefix,s.message,s.data):console.log(s.prefix,s.message)}info(e,t=null){let s=this.formatMessage(a.INFO,e,t);t?console.info(s.prefix,s.message,s.data):console.info(s.prefix,s.message)}warn(e,t=null){let s=this.formatMessage(a.WARN,e,t);t?console.warn(s.prefix,s.message,s.data):console.warn(s.prefix,s.message)}error(e,t=null){let s=this.formatMessage(a.ERROR,e,t);t?(console.error(s.prefix,s.message,t),this.isDevelopment):console.error(s.prefix,s.message)}apiError(e,t){this.error(`API Error [${e}]`,{endpoint:e,status:t?.response?.status,message:t?.response?.data?.message||t?.message,data:t?.response?.data})}}let l=new r,n={debug:(e,t)=>l.debug(e,t),info:(e,t)=>l.info(e,t),warn:(e,t)=>l.warn(e,t),error:(e,t)=>l.error(e,t),apiError:(e,t)=>l.apiError(e,t)}},80554:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>l,__esModule:()=>r,default:()=>n});let a=(0,s(86843).createProxy)(String.raw`W:\garbet\Frontend\app\admin\finances\page.js`),{__esModule:r,$$typeof:l}=a,n=a.default}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[1263,9069,367],()=>s(42661));module.exports=a})();