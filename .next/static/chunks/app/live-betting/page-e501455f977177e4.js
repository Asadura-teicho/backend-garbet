(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3106],{82370:function(e,t,s){Promise.resolve().then(s.bind(s,17041))},17041:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var a=s(57437),l=s(2265);s(61396);var n=s(24033),r=s(60473),i=s(96299),c=s(62385),d=s(24215);function o(){let{t:e}=(0,i.$)(),t=(0,n.useRouter)(),[s,o]=(0,l.useState)([]),[m,x]=(0,l.useState)("10.00"),[u,h]=(0,l.useState)(e("liveBetting.live")),[p,f]=(0,l.useState)([]),[g,b]=(0,l.useState)(!0),[y,j]=(0,l.useState)(""),[v,N]=(0,l.useState)(!1);(0,l.useEffect)(()=>{k();let t=setInterval(()=>{u===e("liveBetting.live")&&k()},3e4);return()=>clearInterval(t)},[u]);let k=async()=>{b(!0),j("");try{let t={page:1,limit:50};if(u===e("liveBetting.live"))t.status="live";else if(u===e("liveBetting.today")){t.status="upcoming";let e=new Date;e.setHours(0,0,0,0);let s=new Date(e);s.setDate(s.getDate()+1),t.startDate=e.toISOString(),t.endDate=s.toISOString()}else u===e("liveBetting.upcoming")&&(t.status="upcoming");let s=await c.pp.getMatches(t);f(s.data.matches||[])}catch(e){var t,s;console.error("Error fetching matches:",e),j((null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||"Failed to load matches"),d.cM.apiError("/matches",e)}finally{b(!1)}},w=p.reduce((e,t)=>{let s=t.league||"Other";return e[s]||(e[s]=[]),e[s].push(t),e},{}),B=e=>{var t,s,a;let l=null===(t=e.markets)||void 0===t?void 0:t.find(e=>"1X2"===e.type),n={};l&&l.selections.forEach(e=>{"Team A Win"===e.name?n["1"]=e.odds:"Draw"===e.name?n.X=e.odds:"Team B Win"===e.name&&(n["2"]=e.odds)});let r=(null===(s=e.result)||void 0===s?void 0:s.teamAScore)!==null&&(null===(a=e.result)||void 0===a?void 0:a.teamBScore)!==null?"".concat(e.result.teamAScore," - ").concat(e.result.teamBScore):null,i=e.matchTime||"LIVE";return{id:e._id,_id:e._id,time:i,teams:"".concat(e.teamA," vs ").concat(e.teamB),score:r,odds:n,matchName:e.matchName,league:e.league,status:e.status,rawMatch:e}},_=e=>{o(s.filter((t,s)=>s!==e))},S=(t,a,l)=>{let n={matchId:t._id,matchName:t.matchName||"".concat(t.teamA," vs ").concat(t.teamB),selection:"1"===a?"Team A Win":"X"===a?"Draw":"Team B Win",odds:parseFloat(l),marketType:"1X2",marketName:"Match Winner",type:e("liveBetting.matchResult")},r=s.findIndex(e=>e.matchId===t._id&&e.selection===n.selection);r>=0?o(s.filter((e,t)=>t!==r)):o([...s,n])},F=async()=>{if(0===s.length||!m||0>=parseFloat(m)){j("Please select bets and enter a stake amount");return}N(!0),j("");try{for(let e of s)await c.pp.placeBet(e.matchId,{marketType:e.marketType,marketName:e.marketName,selection:e.selection,stake:parseFloat(m),useBonusBalance:!1});o([]),x("10.00"),t.push("/dashboard")}catch(t){var e,a;j((null===(a=t.response)||void 0===a?void 0:null===(e=a.data)||void 0===e?void 0:e.message)||"Failed to place bet"),d.cM.apiError("/matches/bet",t)}finally{N(!1)}},T=s.length>0?s.reduce((e,t)=>e*t.odds,1).toFixed(2):"0.00",C=s.length>0&&m?(parseFloat(m)*parseFloat(T)).toFixed(2):"0.00";return(0,a.jsxs)("div",{className:"relative min-h-screen w-full bg-background-dark",children:[(0,a.jsx)(r.Z,{}),(0,a.jsxs)("main",{className:"mx-auto flex w-full max-w-7xl flex-col gap-4 p-4 lg:flex-row lg:gap-8 lg:p-6",children:[(0,a.jsxs)("div",{className:"w-full flex-1",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-4 rounded-lg bg-surface p-3 shadow-soft sm:flex-row sm:items-center",children:[(0,a.jsxs)("div",{className:"flex flex-1 gap-2 overflow-x-auto pb-2 sm:pb-0",children:[(0,a.jsxs)("button",{className:"flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-background-dark pl-3 pr-4 shadow-md",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg text-primary",children:"sports_soccer"}),(0,a.jsx)("p",{className:"text-sm font-medium text-primary-text",children:"Futbol"})]}),(0,a.jsxs)("button",{className:"flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-surface/80 pl-3 pr-4 transition-colors hover:bg-surface",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg text-secondary-text",children:"sports_basketball"}),(0,a.jsx)("p",{className:"text-sm font-medium text-secondary-text",children:"Basketbol"})]}),(0,a.jsxs)("button",{className:"flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-surface/80 pl-3 pr-4 transition-colors hover:bg-surface",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg text-secondary-text",children:"sports_tennis"}),(0,a.jsx)("p",{className:"text-sm font-medium text-secondary-text",children:"Tenis"})]}),(0,a.jsxs)("button",{className:"flex h-10 shrink-0 items-center justify-center gap-x-2 rounded-lg bg-surface/80 pl-3 pr-4 transition-colors hover:bg-surface",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-lg text-secondary-text",children:"sports_volleyball"}),(0,a.jsx)("p",{className:"text-sm font-medium text-secondary-text",children:"Voleybol"})]})]}),(0,a.jsxs)("div",{className:"flex h-10 flex-shrink-0 items-center justify-center rounded-lg bg-background-dark p-1 sm:w-auto sm:min-w-[280px]",children:[(0,a.jsxs)("label",{className:"flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-3 text-sm font-medium leading-normal text-secondary-text has-[:checked]:bg-surface has-[:checked]:text-primary-text",children:[(0,a.jsx)("span",{className:"truncate",children:"CanlÄ±"}),(0,a.jsx)("input",{checked:"Live Now"===u,onChange:()=>h("Live Now"),className:"invisible w-0",name:"time-filter",type:"radio",value:"Live Now"})]}),(0,a.jsxs)("label",{className:"flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-3 text-sm font-medium leading-normal text-secondary-text has-[:checked]:bg-surface has-[:checked]:text-primary-text",children:[(0,a.jsx)("span",{className:"truncate",children:e("liveBetting.today")}),(0,a.jsx)("input",{checked:u===e("liveBetting.today"),onChange:()=>h(e("liveBetting.today")),className:"invisible w-0",name:"time-filter",type:"radio",value:e("liveBetting.today")})]}),(0,a.jsxs)("label",{className:"flex h-full flex-1 cursor-pointer items-center justify-center overflow-hidden rounded-md px-3 text-sm font-medium leading-normal text-secondary-text has-[:checked]:bg-surface has-[:checked]:text-primary-text",children:[(0,a.jsx)("span",{className:"truncate",children:e("liveBetting.upcoming")}),(0,a.jsx)("input",{checked:u===e("liveBetting.upcoming"),onChange:()=>h(e("liveBetting.upcoming")),className:"invisible w-0",name:"time-filter",type:"radio",value:e("liveBetting.upcoming")})]})]})]}),(0,a.jsxs)("div",{className:"mt-6 flex flex-col gap-4",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold leading-tight tracking-[-0.015em] text-primary-text px-2",children:e("liveBetting.liveFootball")}),y&&(0,a.jsx)("div",{className:"rounded-lg bg-red-500/20 border border-red-500/50 p-4 mx-2",children:(0,a.jsx)("p",{className:"text-sm text-red-400",children:y})}),g?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("p",{className:"text-secondary-text",children:"Loading matches..."})}):0===Object.keys(w).length?(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)("p",{className:"text-secondary-text",children:"No matches found"})}):Object.entries(w).map((e,t)=>{let[l,n]=e;return(0,a.jsxs)("div",{className:"flex flex-col gap-2 ".concat(t>0?"mt-4":""),children:[(0,a.jsx)("h3",{className:"text-sm font-semibold text-secondary-text px-2",children:l}),n.map(e=>{let t=B(e);return(0,a.jsxs)("div",{className:"flex flex-col gap-3 rounded-lg bg-surface p-4 shadow-soft",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-primary",children:t.time}),(0,a.jsx)("p",{className:"text-base font-medium text-primary-text",children:t.teams})]}),t.score&&(0,a.jsx)("span",{className:"text-lg font-bold text-primary-text",children:t.score})]}),(0,a.jsx)("div",{className:"grid grid-cols-3 gap-2",children:["1","X","2"].map(l=>{var n;let r=s.some(t=>t.matchId===e._id&&("1"===l&&"Team A Win"===t.selection||"X"===l&&"Draw"===t.selection||"2"===l&&"Team B Win"===t.selection));return(0,a.jsxs)("button",{onClick:()=>S(e,l,t.odds[l]),className:"group flex flex-col items-center justify-center rounded-lg py-2 transition-colors ".concat(r?"bg-primary/30 border-2 border-primary":"bg-background-dark/50 hover:bg-background-dark/80"),children:[(0,a.jsx)("span",{className:"text-xs text-secondary-text",children:l}),(0,a.jsx)("span",{className:"font-bold text-primary-text",children:(null===(n=t.odds[l])||void 0===n?void 0:n.toFixed(2))||"N/A"})]},l)})})]},e._id)})]},t)})]})]}),(0,a.jsx)("aside",{className:"sticky top-24 hidden h-fit w-full max-w-xs flex-col gap-4 lg:flex",children:(0,a.jsxs)("div",{className:"rounded-lg bg-surface p-4 shadow-soft",children:[(0,a.jsx)("h3",{className:"mb-4 text-lg font-bold text-primary-text",children:e("liveBetting.betSlip")}),0===s.length?(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center py-10",children:[(0,a.jsx)("span",{className:"material-symbols-outlined text-4xl text-secondary-text",children:"receipt_long"}),(0,a.jsx)("p",{className:"mt-2 text-sm text-secondary-text",children:e("liveBetting.yourSelections")})]}):(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[s.map((t,s)=>(0,a.jsxs)("div",{className:"rounded-lg bg-background-dark p-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium text-primary-text",children:t.match}),(0,a.jsx)("p",{className:"text-xs text-secondary-text",children:t.type})]}),(0,a.jsx)("button",{onClick:()=>_(s),className:"text-secondary-text hover:text-primary-text",children:(0,a.jsx)("span",{className:"material-symbols-outlined text-base",children:"close"})})]}),(0,a.jsxs)("div",{className:"mt-2 flex items-center justify-between",children:[(0,a.jsxs)("p",{className:"text-sm font-bold text-primary",children:[e("liveBetting.selectionLabel"),": ",t.selection]}),(0,a.jsxs)("p",{className:"text-sm font-bold text-primary-text",children:["@",t.odds]})]})]},s)),(0,a.jsxs)("div",{className:"mt-2 border-t border-background-dark pt-3",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm font-medium text-secondary-text",children:[(0,a.jsx)("span",{children:e("liveBetting.totalOdds")}),(0,a.jsx)("span",{className:"text-primary-text",children:T})]}),(0,a.jsxs)("div",{className:"mt-3",children:[(0,a.jsx)("label",{className:"mb-1 block text-sm font-medium text-secondary-text",htmlFor:"stake-desktop",children:e("liveBetting.stake")}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("input",{className:"w-full rounded-lg border-none bg-background-dark py-2 pl-3 pr-12 text-primary-text focus:ring-2 focus:ring-primary",id:"stake-desktop",type:"text",value:m,onChange:e=>x(e.target.value)}),(0,a.jsx)("span",{className:"absolute inset-y-0 right-3 flex items-center text-sm font-bold text-secondary-text",children:"TRY"})]})]}),(0,a.jsxs)("div",{className:"mt-3 flex justify-between text-sm font-medium text-secondary-text",children:[(0,a.jsx)("span",{children:e("liveBetting.maxWinnings")}),(0,a.jsxs)("span",{className:"text-lg font-bold text-primary",children:[C," TRY"]})]})]}),(0,a.jsx)("button",{onClick:F,disabled:0===s.length||!m||0>=parseFloat(m)||v,className:"mt-4 flex h-12 w-full items-center justify-center rounded-lg text-base font-bold shadow-soft transition-opacity ".concat(s.length>0&&m&&parseFloat(m)>0?"bg-primary text-background-dark hover:opacity-90":"bg-primary/30 text-primary/60 cursor-not-allowed"),children:v?"Placing Bet...":e("liveBetting.placeBet")})]})]})})]}),s.length>0&&(0,a.jsx)("div",{className:"sticky bottom-0 z-40 block bg-gradient-to-t from-background-dark to-transparent px-4 pb-4 pt-8 lg:hidden",children:(0,a.jsxs)("button",{onClick:F,disabled:!m||0>=parseFloat(m)||v,className:"flex h-14 w-full items-center justify-between rounded-lg bg-primary px-4 text-background-dark shadow-soft disabled:opacity-50",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"material-symbols-outlined font-semibold",children:"receipt_long"}),(0,a.jsxs)("span",{className:"text-base font-bold",children:["Kuponu G\xf6r\xfcnt\xfcle (",s.length,")"]})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end",children:[(0,a.jsx)("span",{className:"text-xs",children:"Toplam Oran"}),(0,a.jsx)("span",{className:"text-base font-bold",children:T})]})]})})]})}}},function(e){e.O(0,[1176,4829,2385,6299,1761,473,2971,4938,1744],function(){return e(e.s=82370)}),_N_E=e.O()}]);